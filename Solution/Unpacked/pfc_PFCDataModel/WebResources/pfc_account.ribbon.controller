/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@avanade/bizapps-sdk/dist/bizapps-sdk.esm.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@avanade/bizapps-sdk/dist/bizapps-sdk.esm.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AttributeMock\": () => (/* binding */ AttributeMock),\n/* harmony export */   \"BooleanFormAttribute\": () => (/* binding */ BooleanFormAttribute),\n/* harmony export */   \"BooleanODataAttribute\": () => (/* binding */ BooleanODataAttribute),\n/* harmony export */   \"CachedRibbonRuleEntry\": () => (/* binding */ CachedRibbonRuleEntry),\n/* harmony export */   \"CachedRibbonRuleExecutor\": () => (/* binding */ CachedRibbonRuleExecutor),\n/* harmony export */   \"ClientContextMock\": () => (/* binding */ ClientContextMock),\n/* harmony export */   \"ControlMock\": () => (/* binding */ ControlMock),\n/* harmony export */   \"CustomerFormAttribute\": () => (/* binding */ CustomerFormAttribute),\n/* harmony export */   \"CustomerODataAttribute\": () => (/* binding */ CustomerODataAttribute),\n/* harmony export */   \"DateTimeFormAttribute\": () => (/* binding */ DateTimeFormAttribute),\n/* harmony export */   \"DateTimeODataAttribute\": () => (/* binding */ DateTimeODataAttribute),\n/* harmony export */   \"DateTimeODataAttributeFilter\": () => (/* binding */ DateTimeODataAttributeFilter),\n/* harmony export */   \"DecimalFormAttribute\": () => (/* binding */ DecimalFormAttribute),\n/* harmony export */   \"DecimalODataAttribute\": () => (/* binding */ DecimalODataAttribute),\n/* harmony export */   \"DisplayRule\": () => (/* binding */ DisplayRule),\n/* harmony export */   \"DoubleFormAttribute\": () => (/* binding */ DoubleFormAttribute),\n/* harmony export */   \"DoubleODataAttribute\": () => (/* binding */ DoubleODataAttribute),\n/* harmony export */   \"DynamicsContext\": () => (/* binding */ DynamicsContext),\n/* harmony export */   \"DynamicsContextMock\": () => (/* binding */ DynamicsContextMock),\n/* harmony export */   \"DynamicsContextMockData\": () => (/* binding */ DynamicsContextMockData),\n/* harmony export */   \"EnableRule\": () => (/* binding */ EnableRule),\n/* harmony export */   \"Entity\": () => (/* binding */ Entity),\n/* harmony export */   \"EntityNameFormAttribute\": () => (/* binding */ EntityNameFormAttribute),\n/* harmony export */   \"EntityNameODataAttribute\": () => (/* binding */ EntityNameODataAttribute),\n/* harmony export */   \"ExecutionContextMock\": () => (/* binding */ ExecutionContextMock),\n/* harmony export */   \"Expires\": () => (/* binding */ Expires),\n/* harmony export */   \"FakeCommandResponse\": () => (/* binding */ FakeCommandResponse),\n/* harmony export */   \"FakeODataResponse\": () => (/* binding */ FakeODataResponse),\n/* harmony export */   \"FakeResponse\": () => (/* binding */ FakeResponse),\n/* harmony export */   \"FakeServer\": () => (/* binding */ FakeServer),\n/* harmony export */   \"FilterGroup\": () => (/* binding */ FilterGroup),\n/* harmony export */   \"FilterRule\": () => (/* binding */ FilterRule),\n/* harmony export */   \"FilterValue\": () => (/* binding */ FilterValue),\n/* harmony export */   \"FluentRuleFactory\": () => (/* binding */ FluentRuleFactory),\n/* harmony export */   \"FluentRules\": () => (/* binding */ FluentRules),\n/* harmony export */   \"FooterSectionMock\": () => (/* binding */ FooterSectionMock),\n/* harmony export */   \"FormAttributeBase\": () => (/* binding */ FormAttributeBase),\n/* harmony export */   \"FormContextDataMock\": () => (/* binding */ FormContextDataMock),\n/* harmony export */   \"FormContextDataProcessMock\": () => (/* binding */ FormContextDataProcessMock),\n/* harmony export */   \"FormContextEntityMock\": () => (/* binding */ FormContextEntityMock),\n/* harmony export */   \"FormContextMock\": () => (/* binding */ FormContextMock),\n/* harmony export */   \"FormContextUIMock\": () => (/* binding */ FormContextUIMock),\n/* harmony export */   \"FormItemMock\": () => (/* binding */ FormItemMock),\n/* harmony export */   \"FormObjectBase\": () => (/* binding */ FormObjectBase),\n/* harmony export */   \"FormSelectorMock\": () => (/* binding */ FormSelectorMock),\n/* harmony export */   \"FormTypes\": () => (/* binding */ FormTypes),\n/* harmony export */   \"FormUtils\": () => (/* binding */ FormUtils),\n/* harmony export */   \"FormVerifier\": () => (/* binding */ FormVerifier),\n/* harmony export */   \"GlobalContextMock\": () => (/* binding */ GlobalContextMock),\n/* harmony export */   \"Guid\": () => (/* binding */ Guid),\n/* harmony export */   \"Guids\": () => (/* binding */ Guids),\n/* harmony export */   \"HeaderSectionMock\": () => (/* binding */ HeaderSectionMock),\n/* harmony export */   \"IntegerFormAttribute\": () => (/* binding */ IntegerFormAttribute),\n/* harmony export */   \"IntegerODataAttribute\": () => (/* binding */ IntegerODataAttribute),\n/* harmony export */   \"ItemCollection\": () => (/* binding */ ItemCollection),\n/* harmony export */   \"LogLevel\": () => (/* binding */ LogLevel),\n/* harmony export */   \"Logger\": () => (/* binding */ Logger),\n/* harmony export */   \"LookUpCustomFilter\": () => (/* binding */ LookUpCustomFilter),\n/* harmony export */   \"LookupAttributeMock\": () => (/* binding */ LookupAttributeMock),\n/* harmony export */   \"LookupControlMock\": () => (/* binding */ LookupControlMock),\n/* harmony export */   \"LookupConverter\": () => (/* binding */ LookupConverter),\n/* harmony export */   \"LookupFormAttribute\": () => (/* binding */ LookupFormAttribute),\n/* harmony export */   \"LookupODataAttribute\": () => (/* binding */ LookupODataAttribute),\n/* harmony export */   \"MemoFormAttribute\": () => (/* binding */ MemoFormAttribute),\n/* harmony export */   \"MemoODataAttribute\": () => (/* binding */ MemoODataAttribute),\n/* harmony export */   \"MoneyFormAttribute\": () => (/* binding */ MoneyFormAttribute),\n/* harmony export */   \"MoneyODataAttribute\": () => (/* binding */ MoneyODataAttribute),\n/* harmony export */   \"MultiSelectPicklistFormAttribute\": () => (/* binding */ MultiSelectPicklistFormAttribute),\n/* harmony export */   \"MultiSelectPicklistODataAttribute\": () => (/* binding */ MultiSelectPicklistODataAttribute),\n/* harmony export */   \"NotificationLevel\": () => (/* binding */ NotificationLevel),\n/* harmony export */   \"NotificationRule\": () => (/* binding */ NotificationRule),\n/* harmony export */   \"NumberODataAttributeFilter\": () => (/* binding */ NumberODataAttributeFilter),\n/* harmony export */   \"ODataAttributeFilterBase\": () => (/* binding */ ODataAttributeFilterBase),\n/* harmony export */   \"ODataAttributeOrder\": () => (/* binding */ ODataAttributeOrder),\n/* harmony export */   \"ODataCommand\": () => (/* binding */ ODataCommand),\n/* harmony export */   \"ODataCommandResponse\": () => (/* binding */ ODataCommandResponse),\n/* harmony export */   \"ODataEntity\": () => (/* binding */ ODataEntity),\n/* harmony export */   \"ODataError\": () => (/* binding */ ODataError),\n/* harmony export */   \"ODataFailure\": () => (/* binding */ ODataFailure),\n/* harmony export */   \"ODataQueryBuilder\": () => (/* binding */ ODataQueryBuilder),\n/* harmony export */   \"ODataQueryBuilderLogic\": () => (/* binding */ ODataQueryBuilderLogic),\n/* harmony export */   \"ODataQueryBuilderMode\": () => (/* binding */ ODataQueryBuilderMode),\n/* harmony export */   \"ODataQueryParameters\": () => (/* binding */ ODataQueryParameters),\n/* harmony export */   \"ODataQueryResponseMapper\": () => (/* binding */ ODataQueryResponseMapper),\n/* harmony export */   \"ODataRequest\": () => (/* binding */ ODataRequest),\n/* harmony export */   \"ODataResponse\": () => (/* binding */ ODataResponse),\n/* harmony export */   \"ODataResponseTypes\": () => (/* binding */ ODataResponseTypes),\n/* harmony export */   \"Observable\": () => (/* binding */ Observable),\n/* harmony export */   \"OdataRegExBuilder\": () => (/* binding */ OdataRegExBuilder),\n/* harmony export */   \"OnSaveRule\": () => (/* binding */ OnSaveRule),\n/* harmony export */   \"OptionSetAttributeMock\": () => (/* binding */ OptionSetAttributeMock),\n/* harmony export */   \"OptionSetControlMock\": () => (/* binding */ OptionSetControlMock),\n/* harmony export */   \"OrderDirection\": () => (/* binding */ OrderDirection),\n/* harmony export */   \"OrganizationSettingsMock\": () => (/* binding */ OrganizationSettingsMock),\n/* harmony export */   \"OwnerFormAttribute\": () => (/* binding */ OwnerFormAttribute),\n/* harmony export */   \"OwnerODataAttribute\": () => (/* binding */ OwnerODataAttribute),\n/* harmony export */   \"PartyListFormAttribute\": () => (/* binding */ PartyListFormAttribute),\n/* harmony export */   \"PartyListODataAttribute\": () => (/* binding */ PartyListODataAttribute),\n/* harmony export */   \"PicklistConverter\": () => (/* binding */ PicklistConverter),\n/* harmony export */   \"PicklistFormAttribute\": () => (/* binding */ PicklistFormAttribute),\n/* harmony export */   \"PicklistODataAttribute\": () => (/* binding */ PicklistODataAttribute),\n/* harmony export */   \"QueryOperators\": () => (/* binding */ QueryOperators),\n/* harmony export */   \"RequireRule\": () => (/* binding */ RequireRule),\n/* harmony export */   \"RibbonContext\": () => (/* binding */ RibbonContext),\n/* harmony export */   \"RibbonContractBase\": () => (/* binding */ RibbonContractBase),\n/* harmony export */   \"RibbonControllerBase\": () => (/* binding */ RibbonControllerBase),\n/* harmony export */   \"RuleBase\": () => (/* binding */ RuleBase),\n/* harmony export */   \"RuleDefinition\": () => (/* binding */ RuleDefinition),\n/* harmony export */   \"RuleStore\": () => (/* binding */ RuleStore),\n/* harmony export */   \"RuleType\": () => (/* binding */ RuleType),\n/* harmony export */   \"Section\": () => (/* binding */ Section),\n/* harmony export */   \"SectionMock\": () => (/* binding */ SectionMock),\n/* harmony export */   \"StateFormAttribute\": () => (/* binding */ StateFormAttribute),\n/* harmony export */   \"StateODataAttribute\": () => (/* binding */ StateODataAttribute),\n/* harmony export */   \"StatusFormAttribute\": () => (/* binding */ StatusFormAttribute),\n/* harmony export */   \"StatusODataAttribute\": () => (/* binding */ StatusODataAttribute),\n/* harmony export */   \"Storage\": () => (/* binding */ Storage),\n/* harmony export */   \"StringFormAttribute\": () => (/* binding */ StringFormAttribute),\n/* harmony export */   \"StringODataAttribute\": () => (/* binding */ StringODataAttribute),\n/* harmony export */   \"StringODataAttributeFilter\": () => (/* binding */ StringODataAttributeFilter),\n/* harmony export */   \"SubscribeRule\": () => (/* binding */ SubscribeRule),\n/* harmony export */   \"Tab\": () => (/* binding */ Tab),\n/* harmony export */   \"TabMock\": () => (/* binding */ TabMock),\n/* harmony export */   \"TriggerableRuleBase\": () => (/* binding */ TriggerableRuleBase),\n/* harmony export */   \"UniqueidentifierFormAttribute\": () => (/* binding */ UniqueidentifierFormAttribute),\n/* harmony export */   \"UniqueidentifierODataAttribute\": () => (/* binding */ UniqueidentifierODataAttribute),\n/* harmony export */   \"UserSettingsMock\": () => (/* binding */ UserSettingsMock),\n/* harmony export */   \"ValueRule\": () => (/* binding */ ValueRule)\n/* harmony export */ });\nclass DynamicsContext {\r\n    _formContext;\r\n    _executionContext;\r\n    _globalContext;\r\n    constructor(formContext, executionContext, globalContext) {\r\n        this._formContext = formContext;\r\n        this._executionContext = executionContext;\r\n        this._globalContext = globalContext;\r\n        if (!this._globalContext) {\r\n            if (window.Xrm && window.Xrm.Utility && typeof window.Xrm.Utility.getGlobalContext === \"function\") {\r\n                this._globalContext = Xrm.Utility.getGlobalContext();\r\n            }\r\n        }\r\n    }\r\n    get executionContext() {\r\n        return this._executionContext;\r\n    }\r\n    get formContext() {\r\n        return this._formContext;\r\n    }\r\n    get globalContext() {\r\n        if (!this._globalContext)\r\n            throw new Error(\"Global context does not exists\");\r\n        return this._globalContext;\r\n    }\r\n}\n\nclass Guid {\r\n    /**\r\n     * Generates a new random GUID\r\n     *\r\n     * @returnsThe The generated GUID\r\n     */\r\n    static generate() {\r\n        let currentDate = new Date().getTime();\r\n        let millisecondsSincePageLoad = (performance && performance.now && (performance.now() * 1000)) || 0;\r\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\r\n            let r = Math.random() * 16;\r\n            if (currentDate > 0) { //Use timestamp until depleted\r\n                r = (currentDate + r) % 16 | 0;\r\n                currentDate = Math.floor(currentDate / 16);\r\n            }\r\n            else {\r\n                r = (millisecondsSincePageLoad + r) % 16 | 0;\r\n                millisecondsSincePageLoad = Math.floor(millisecondsSincePageLoad / 16);\r\n            }\r\n            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n        });\r\n    }\r\n    /**\r\n     * Ensures that the guid starts with \"{\" and ends with \"}\"\r\n     *\r\n     * @param value The GUID\r\n     * @returnsThe GUID with braces\r\n     */\r\n    static ensureBraces(value) {\r\n        if (!value.startsWith(\"{\"))\r\n            value = `{${value}`;\r\n        if (!value.endsWith(\"}\"))\r\n            value += \"}\";\r\n        return value;\r\n    }\r\n    /**\r\n     * Ensures that the guid does NOT starts with \"{\" and ends with \"}\"\r\n     *\r\n     * @param value The GUID\r\n     * @returns The GUID without braces\r\n     */\r\n    static ensureNoBraces(value) {\r\n        return value.replace(\"{\", \"\").replace(\"}\", \"\");\r\n    }\r\n}\n\nvar LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"Verbose\"] = 0] = \"Verbose\";\r\n    LogLevel[LogLevel[\"Information\"] = 1] = \"Information\";\r\n    LogLevel[LogLevel[\"Warning\"] = 2] = \"Warning\";\r\n    LogLevel[LogLevel[\"Error\"] = 3] = \"Error\";\r\n})(LogLevel || (LogLevel = {}));\r\nclass Logger {\r\n    static log(msg, logLevel = LogLevel.Verbose) {\r\n        try {\r\n            if (window.console) {\r\n                this._executeConsoleLog(logLevel, msg);\r\n            }\r\n        }\r\n        catch (e) {\r\n            if (console.log)\r\n                console.log(msg);\r\n        }\r\n    }\r\n    static _executeConsoleLog(logLevel, msg) {\r\n        switch (logLevel) {\r\n            case LogLevel.Verbose:\r\n                window.console.debug(msg);\r\n                break;\r\n            case LogLevel.Information:\r\n                window.console.info(msg);\r\n                break;\r\n            case LogLevel.Warning:\r\n                window.console.warn(msg);\r\n                break;\r\n            case LogLevel.Error:\r\n                window.console.error(msg);\r\n                break;\r\n            default:\r\n                window.console.log(msg);\r\n                break;\r\n        }\r\n    }\r\n}\n\nclass Observable {\r\n    _changeHandlers;\r\n    _internalId;\r\n    constructor() {\r\n        this._changeHandlers = [];\r\n        this._internalId = Guid.generate();\r\n    }\r\n    /**\r\n     * Registers a callback to be executed on a change event\r\n     *\r\n     * @param callback The callback that will be called on change\r\n     */\r\n    registerOnChange(callback) {\r\n        this._changeHandlers.push(callback);\r\n    }\r\n    /**\r\n     * Registers a callback to be executed on a change event\r\n     *\r\n     * @param callback The callback that will be called on change\r\n     */\r\n    addOnChange(callback) {\r\n        this.registerOnChange(callback);\r\n    }\r\n    /**\r\n     * Unregisteres a callback from receiving onchange events\r\n     *\r\n     * @param callback The callback that will be unregistered\r\n     */\r\n    unregisterOnChange(callback) {\r\n        const index = this._changeHandlers.indexOf(callback);\r\n        if (index >= 0)\r\n            this._changeHandlers.slice(index, 1);\r\n    }\r\n    /**\r\n     * Unregisteres a callback from receiving onchange events\r\n     *\r\n     * @param callback The callback that will be unregistered\r\n     */\r\n    removeOnChange(callback) {\r\n        this.unregisterOnChange(callback);\r\n    }\r\n    /**\r\n     * Unregisters all callbacks from receiving onchange events\r\n     */\r\n    clearHandlers() {\r\n        this._changeHandlers = [];\r\n    }\r\n    /**\r\n     * Notifies all Observers that a change event occurred\r\n     */\r\n    fireOnChange() {\r\n        for (const handler of this._changeHandlers)\r\n            handler(this);\r\n    }\r\n}\n\nclass Tab {\r\n    _formContext;\r\n    _tabName;\r\n    constructor(tabName, formContext) {\r\n        this._formContext = formContext;\r\n        this._tabName = tabName;\r\n        this.sections = this.getTabSafe()?.sections ?? new ItemCollection([]);\r\n    }\r\n    getTab() {\r\n        return this._formContext.ui.tabs.get(this._tabName);\r\n    }\r\n    getTabSafe() {\r\n        try {\r\n            return this._formContext.ui.tabs.get(this._tabName);\r\n        }\r\n        catch (error) {\r\n            return null;\r\n        }\r\n    }\r\n    addTabStateChange(handler) {\r\n        this.getTab().addTabStateChange(handler);\r\n    }\r\n    getDisplayState() {\r\n        return this.getTab().getDisplayState();\r\n    }\r\n    getName() {\r\n        return this.getTab().getName();\r\n    }\r\n    getParent() {\r\n        return this.getTab().getParent();\r\n    }\r\n    removeTabStateChange(handler) {\r\n        this.getTab().removeTabStateChange(handler);\r\n    }\r\n    setDisplayState(displayState) {\r\n        this.getTab().setDisplayState(displayState);\r\n    }\r\n    sections;\r\n    getLabel() {\r\n        return this.getTab().getLabel();\r\n    }\r\n    setLabel(label) {\r\n        this.getTab().setLabel(label);\r\n    }\r\n    setFocus() {\r\n        this.getTab().setFocus();\r\n    }\r\n    setVisible(visible) {\r\n        const item = this._formContext.ui.tabs.get(this._tabName);\r\n        if (item != null)\r\n            item.setVisible(visible);\r\n    }\r\n    getVisible() {\r\n        const item = this._formContext.ui.tabs.get(this._tabName);\r\n        return item != null\r\n            ? item.getVisible()\r\n            : false;\r\n    }\r\n    setCollapsed(isCollapsed) {\r\n        const item = this._formContext.ui.tabs.get(this._tabName);\r\n        const state = isCollapsed ? \"collapsed\" : \"expanded\";\r\n        if (item != null)\r\n            item.setDisplayState(state);\r\n    }\r\n    isCollapsed() {\r\n        const item = this._formContext.ui.tabs.get(this._tabName);\r\n        return item != null\r\n            ? item.getDisplayState() === \"collapsed\"\r\n            : false;\r\n    }\r\n}\n\nvar FormTypes;\r\n(function (FormTypes) {\r\n    FormTypes[FormTypes[\"Undefined\"] = 0] = \"Undefined\";\r\n    FormTypes[FormTypes[\"Create\"] = 1] = \"Create\";\r\n    FormTypes[FormTypes[\"Update\"] = 2] = \"Update\";\r\n    FormTypes[FormTypes[\"ReadOnly\"] = 3] = \"ReadOnly\";\r\n    FormTypes[FormTypes[\"Disabled\"] = 4] = \"Disabled\";\r\n    FormTypes[FormTypes[\"BulkEdit\"] = 6] = \"BulkEdit\";\r\n    /**\r\n     * @deprecated QuickCreate has been deprecated\r\n     */\r\n    FormTypes[FormTypes[\"QuickCreate\"] = 5] = \"QuickCreate\";\r\n    /**\r\n     * @deprecated ReadOptimized has been deprecated.\r\n     */\r\n    FormTypes[FormTypes[\"ReadOptimized\"] = 11] = \"ReadOptimized\";\r\n})(FormTypes || (FormTypes = {}));\r\nclass FormUtils {\r\n    static getLookupStringRepresentation(lookup) {\r\n        if (lookup == null)\r\n            return null;\r\n        const value = FormUtils.firstOrDefault(lookup.getValue());\r\n        if (value == null)\r\n            return null;\r\n        const data = {\r\n            id: value.id,\r\n            name: value.name,\r\n            entityType: value.entityType,\r\n        };\r\n        if (data.id !== null && data.id !== undefined)\r\n            return `Lookup(type: ${data.entityType}, id: ${data.id}, name:\"${data.name}\")`;\r\n        return null;\r\n    }\r\n    static getLookupArrayStringRepresentation(lookups) {\r\n        const lookup = FormUtils.firstOrDefault(lookups);\r\n        if (lookup == null)\r\n            return \"\";\r\n        return FormUtils.getLookupStringRepresentation(lookup);\r\n    }\r\n    static getStringRepresentation(obj) {\r\n        let str = FormUtils.getLookupArrayStringRepresentation(obj);\r\n        if (str !== null)\r\n            return str;\r\n        str = FormUtils.getLookupStringRepresentation(obj);\r\n        if (str !== null)\r\n            return str;\r\n        return \"\";\r\n    }\r\n    static getLookupIdFromLookup(lookup) {\r\n        const value = lookup?.getValue();\r\n        if (!value)\r\n            return null;\r\n        if (value.length > 0) {\r\n            return value[0].id;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    static getLookupIdFromLookupArray(lookupArray) {\r\n        const lookup = FormUtils.firstOrDefault(lookupArray);\r\n        if (lookup == null)\r\n            return null;\r\n        return FormUtils.getLookupIdFromLookup(lookup);\r\n    }\r\n    static createLookupArray(id, entityLogicalName, name) {\r\n        const value = {\r\n            id,\r\n            entityType: entityLogicalName,\r\n            name,\r\n        };\r\n        return {\r\n            id: value.id,\r\n            name: value.name,\r\n            entityType: value.entityType\r\n        };\r\n    }\r\n    static firstOrDefault(array) {\r\n        if (array != null && array.length > 0)\r\n            return array[0];\r\n        return null;\r\n    }\r\n    static normalizeId(id) {\r\n        if (id != null)\r\n            return id.replace(\"{\", \"\").replace(\"}\", \"\").toLowerCase();\r\n        return id;\r\n    }\r\n}\n\nclass Section {\r\n    _formContext;\r\n    _tabName;\r\n    _sectionName;\r\n    constructor(tabName, sectionName, formContext) {\r\n        this._formContext = formContext;\r\n        this._tabName = tabName;\r\n        this._sectionName = sectionName;\r\n        this.controls = this.getSectionSafe()?.controls ?? new ItemCollection([]);\r\n    }\r\n    getSection() {\r\n        return this.getTab()?.sections.get(this._sectionName);\r\n    }\r\n    getSectionSafe() {\r\n        try {\r\n            return this.getTab()?.sections.get(this._sectionName);\r\n        }\r\n        catch (error) {\r\n            return null;\r\n        }\r\n    }\r\n    getTab() {\r\n        return this._formContext.ui.tabs.get(this._tabName);\r\n    }\r\n    getName() {\r\n        return this.getSection().getName();\r\n    }\r\n    getParent() {\r\n        return this.getSection().getParent();\r\n    }\r\n    controls;\r\n    getLabel() {\r\n        return this.getSection().getLabel();\r\n    }\r\n    setLabel(label) {\r\n        this.getSection().setLabel(label);\r\n    }\r\n    setVisible(visible) {\r\n        this.getSection().setVisible(visible);\r\n    }\r\n    getVisible() {\r\n        return this.getSection()?.getVisible() ?? false;\r\n    }\r\n}\n\nclass FormObjectBase {\r\n    _formContext;\r\n    _objectId;\r\n    _formName;\r\n    _formSelector;\r\n    _formItem;\r\n    constructor(formContext, formName) {\r\n        this._formContext = formContext;\r\n        this._formName = formName;\r\n        if (this._formContext) {\r\n            this._objectId = this._formContext.data.entity.getId();\r\n            this._formSelector = this._formContext.ui.formSelector;\r\n            this._formItem = this._formSelector.getCurrentItem();\r\n        }\r\n    }\r\n    setVisible(isVisible) {\r\n        this._formItem?.setVisible(isVisible);\r\n    }\r\n    getId() {\r\n        return this._formItem?.getId() ?? \"\";\r\n    }\r\n    getLabel() {\r\n        return this._formItem?.getLabel() ?? \"\";\r\n    }\r\n    navigate() {\r\n        this._formItem?.navigate();\r\n    }\r\n    get formType() {\r\n        return this._formContext.ui.getFormType();\r\n    }\r\n    get objectId() {\r\n        return this._objectId;\r\n    }\r\n    get formName() {\r\n        return this._formName;\r\n    }\r\n    get formSelector() {\r\n        return this._formSelector;\r\n    }\r\n}\n\nclass RuleBase {\r\n    _ruleType;\r\n    _activateOn = null;\r\n    _internalId = Guid.generate();\r\n    ruleStore;\r\n    formContext;\r\n    targetAttribute = null;\r\n    function = null;\r\n    /**\r\n     * Base class for all FluentRules\r\n     */\r\n    constructor(formContext, ruleStore, ruleType) {\r\n        this.formContext = formContext;\r\n        this.ruleStore = ruleStore;\r\n        this._ruleType = ruleType;\r\n        this.ruleStore.registerRule(this);\r\n    }\r\n    /**\r\n     * Gets whether the rule is active for the current form type\r\n     */\r\n    get isActive() {\r\n        const formType = this.formContext.ui.getFormType();\r\n        if (formType === FormTypes.BulkEdit)\r\n            return false;\r\n        // activate on not set -> activate on all types\r\n        if (this._activateOn == null)\r\n            return true;\r\n        return this._activateOn.includes(formType);\r\n    }\r\n    /**\r\n     * Gets the rule's name\r\n     */\r\n    get name() {\r\n        if (!this.targetAttribute)\r\n            return null;\r\n        return this.targetAttribute.attributeName;\r\n    }\r\n    /**\r\n     * Specifies one or more form types on which this rule should be executed.\r\n     * By default (if this method is not called) the rule will be activated on all form types\r\n     *\r\n     * @param formTypes The form types on which the rule should be activated\r\n     */\r\n    forFormType(...formTypes) {\r\n        this._activateOn = formTypes;\r\n        return this;\r\n    }\r\n    /**\r\n     * Executes the rule function and returns the result\r\n     */\r\n    executeFunction() {\r\n        try {\r\n            if (this.function)\r\n                return this.function();\r\n        }\r\n        catch (e) {\r\n            console.error(`Exception occurred in ${this.name}: ${e}`);\r\n        }\r\n    }\r\n}\n\nclass TriggerableRuleBase extends RuleBase {\r\n    triggers = [];\r\n    /**\r\n     * Creates a new TriggerableRuleBase\r\n     */\r\n    constructor(formContext, ruleStore, ruleType) {\r\n        super(formContext, ruleStore, ruleType);\r\n    }\r\n    /**\r\n     * Set the attributes or models that trigger this rule\r\n     */\r\n    triggeredby(...triggers) {\r\n        this.triggers = triggers;\r\n        for (const trigger of this.triggers) {\r\n            const attributeChangeHandler = () => { this.execute(); };\r\n            this.ruleStore.registeredChangeHandlers.set(trigger, attributeChangeHandler);\r\n            trigger.registerOnChange(attributeChangeHandler);\r\n        }\r\n        return this;\r\n    }\r\n    /**\r\n     * Execute the rule when the form is loaded\r\n     */\r\n    onLoad() {\r\n        this.ruleStore.onLoadActivations.push(this);\r\n        return this;\r\n    }\r\n    /**\r\n     * Execute the rule when the form is saved\r\n     */\r\n    onSave() {\r\n        this.ruleStore.onSaveActivations.push(this);\r\n        return this;\r\n    }\r\n}\n\nvar RuleType;\r\n(function (RuleType) {\r\n    RuleType[\"EnableRule\"] = \"EnableRule\";\r\n    RuleType[\"RequireRule\"] = \"RequireRule\";\r\n    RuleType[\"NotificationRule\"] = \"NotificationRule\";\r\n    RuleType[\"DispalyRule\"] = \"DispalyRule\";\r\n    RuleType[\"TabCollapsedRule\"] = \"TabCollapsedRule\";\r\n    RuleType[\"ValueRule\"] = \"ValueRule\";\r\n    RuleType[\"SubscribeRule\"] = \"SubscribeRule\";\r\n    RuleType[\"OnSaveRule\"] = \"OnSaveRule\";\r\n    RuleType[\"FilterRule\"] = \"FilterRule\";\r\n})(RuleType || (RuleType = {}));\n\nclass ValueRule extends TriggerableRuleBase {\r\n    _targetValueAttribute;\r\n    _canSetNull;\r\n    _allowOverwrite;\r\n    _executeFireOnChange;\r\n    _saveIfReadonly;\r\n    _overwriteSameValue;\r\n    _activateAlways;\r\n    constructor(formContext, ruleStore) {\r\n        super(formContext, ruleStore, RuleType.ValueRule);\r\n        this._canSetNull = true;\r\n        this._allowOverwrite = true;\r\n        this._executeFireOnChange = false;\r\n        this._saveIfReadonly = true;\r\n        this._overwriteSameValue = false;\r\n        this._activateAlways = false;\r\n    }\r\n    /**\r\n     * Prevents the calculated value to replace the existing one\r\n     */\r\n    noOverwrite() {\r\n        this._allowOverwrite = false;\r\n        return this;\r\n    }\r\n    /**\r\n     * Overwrite the attributes value even if its the same as the current value\r\n     */\r\n    overwriteSameValue() {\r\n        this._overwriteSameValue = true;\r\n        return this;\r\n    }\r\n    /**\r\n     * Allows the calculated value to be null\r\n     */\r\n    noDelete() {\r\n        this._canSetNull = false;\r\n        return this;\r\n    }\r\n    /**\r\n     * Tells the ValueRule to always set the value even when the form is \"Disabled\" or \"ReadOnly\"\r\n     *\r\n     * @returns {ValueRule}\r\n     */\r\n    activateAlways() {\r\n        this._activateAlways = true;\r\n        return this;\r\n    }\r\n    /**\r\n     * Specifies the function which returns the calcualted value\r\n     */\r\n    returns(func) {\r\n        this.function = func;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets the target attribute\r\n     */\r\n    for(target) {\r\n        this._targetValueAttribute = target;\r\n        return this;\r\n    }\r\n    /**\r\n     * Set the attributes or models that trigger this rule\r\n     */\r\n    triggeredby(...triggers) {\r\n        super.triggeredby(...triggers);\r\n        return this;\r\n    }\r\n    /**\r\n     * Specifies one or more form types on which this rule should be executed.\r\n     * By default (if this method is not called) the rule will be activated on all form types\r\n     */\r\n    forFormType(...formTypes) {\r\n        super.forFormType(...formTypes);\r\n        return this;\r\n    }\r\n    /**\r\n     * Executes a fireOnChange after settings the value\r\n     */\r\n    doFireOnChange() {\r\n        this._executeFireOnChange = true;\r\n        return this;\r\n    }\r\n    /**\r\n     * Prevents setting a value on a dissabled attribute\r\n     */\r\n    doNotSaveWhenDisabled() {\r\n        this._saveIfReadonly = false;\r\n        return this;\r\n    }\r\n    _handleValue(valueToSet) {\r\n        const shouldSet = this._shouldSetThatValue(valueToSet);\r\n        if (!shouldSet)\r\n            return true;\r\n        if (this._activateAlways) {\r\n            this._targetValueAttribute.setValueInternalIgnoreLockedForm(valueToSet);\r\n        }\r\n        else {\r\n            this._targetValueAttribute.setValue(valueToSet);\r\n        }\r\n        if (this._executeFireOnChange)\r\n            this._targetValueAttribute.fireOnChange();\r\n        return true;\r\n    }\r\n    execute() {\r\n        if (!this.isActive)\r\n            return false;\r\n        if (this._targetValueAttribute.getDisabled() && this._saveIfReadonly)\r\n            this._targetValueAttribute.submitValue(\"dirty\");\r\n        const valueToSetOrPromise = this.executeFunction();\r\n        if (valueToSetOrPromise && typeof valueToSetOrPromise.then === \"function\") {\r\n            return valueToSetOrPromise.then((value) => this._handleValue(value));\r\n        }\r\n        return this._handleValue(valueToSetOrPromise);\r\n    }\r\n    _activateDefaultLoadBehaviour() {\r\n        const callingFormType = this.formContext.ui.getFormType();\r\n        const isCreateForm = callingFormType === FormTypes.Create;\r\n        const isUpdateForm = callingFormType === FormTypes.Update;\r\n        const isDisbaledForm = callingFormType === FormTypes.Disabled;\r\n        if (callingFormType > FormTypes.Update && callingFormType !== FormTypes.Disabled)\r\n            return false;\r\n        if (!isCreateForm && !isUpdateForm && !isDisbaledForm)\r\n            return false;\r\n        // if the document is not ready (rule (cascadingly) triggererd onload), only execute on create form\r\n        return isCreateForm;\r\n    }\r\n    _shouldSetThatValue(newValue) {\r\n        const currentValue = this._targetValueAttribute.getValue();\r\n        // Prevent Setting of NULL values\r\n        if ((newValue === undefined || newValue === null) && !this._canSetNull)\r\n            return false;\r\n        // Prevent Overwrite of not NULL current values\r\n        if (currentValue != null && !this._allowOverwrite)\r\n            return false;\r\n        // Prevent setting of the same value\r\n        if (currentValue === newValue && !this._overwriteSameValue)\r\n            return false;\r\n        return true;\r\n    }\r\n}\n\n/**\r\n * A DisplayRule is used to conditionally hide a field on a given Form\r\n */\r\nclass DisplayRule extends TriggerableRuleBase {\r\n    _targetAttributes = [];\r\n    /**\r\n     * Creates a new Display Rule\r\n     */\r\n    constructor(formContext, ruleStore) {\r\n        super(formContext, ruleStore, RuleType.DispalyRule);\r\n    }\r\n    returns(func) {\r\n        this.function = func;\r\n        return this;\r\n    }\r\n    /**\r\n    * Set the attributes that enabled/disabled on the form\r\n    */\r\n    for(...targets) {\r\n        this._targetAttributes = targets;\r\n        return this;\r\n    }\r\n    execute() {\r\n        if (!this.isActive)\r\n            return;\r\n        const result = this.executeFunction();\r\n        for (const targetAttribute of this._targetAttributes) {\r\n            targetAttribute.setVisible(result);\r\n        }\r\n    }\r\n}\n\n/**\r\n * An EnableRule is used to conditionally disable specific field on a given Form\r\n */\r\nclass EnableRule extends TriggerableRuleBase {\r\n    _targetAttributes = [];\r\n    /**\r\n     * Creates a new EnableRule\r\n     */\r\n    constructor(formContext, ruleStore) {\r\n        super(formContext, ruleStore, RuleType.EnableRule);\r\n    }\r\n    returns(func) {\r\n        this.function = func;\r\n        return this;\r\n    }\r\n    /**\r\n    * Set the attributes that enabled/disabled on the form\r\n    */\r\n    for(...targets) {\r\n        this._targetAttributes = targets;\r\n        return this;\r\n    }\r\n    execute() {\r\n        if (!this.isActive)\r\n            return;\r\n        const shouldBeEnabled = this.executeFunction();\r\n        for (const targetAttribute of this._targetAttributes) {\r\n            targetAttribute.setDisabled(!shouldBeEnabled);\r\n        }\r\n    }\r\n}\n\nclass FilterRule extends TriggerableRuleBase {\r\n    _currentPreSearchHandler = null;\r\n    constructor(formContext, ruleStore) {\r\n        super(formContext, ruleStore, RuleType.FilterRule);\r\n    }\r\n    for(target) {\r\n        this.targetAttribute = target;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets the FetchXML Filter function\r\n     */\r\n    filter(filterFunction) {\r\n        this.function = filterFunction;\r\n    }\r\n    execute() {\r\n        if (!this.isActive)\r\n            return;\r\n        const fetchXML = this.executeFunction();\r\n        if (fetchXML == null)\r\n            return;\r\n        if (!this.targetAttribute) {\r\n            console.error(\"The target attribute has not been set.\");\r\n            return;\r\n        }\r\n        const control = this.targetAttribute.control();\r\n        if (control) {\r\n            if (this._currentPreSearchHandler != null)\r\n                control.removePreSearch(this._currentPreSearchHandler);\r\n            this._currentPreSearchHandler = () => {\r\n                control.addCustomFilter(fetchXML);\r\n            };\r\n            control.addPreSearch(this._currentPreSearchHandler);\r\n        }\r\n    }\r\n}\n\nclass FormAttributeBase extends Observable {\r\n    _formContext;\r\n    attributeName;\r\n    constructor(attributeName, formContext) {\r\n        super();\r\n        this._formContext = formContext;\r\n        this.attributeName = attributeName;\r\n        this.controls = this.getAttributeSafe()?.controls ?? new ItemCollection([]);\r\n    }\r\n    getAttributeType() {\r\n        return this.getAttribute().getAttributeType();\r\n    }\r\n    getFormat() {\r\n        return this.getAttribute().getFormat();\r\n    }\r\n    getIsDirty() {\r\n        return this.getAttribute().getIsDirty();\r\n    }\r\n    getName() {\r\n        return this.getAttribute().getName();\r\n    }\r\n    getParent() {\r\n        return this.getAttribute().getParent();\r\n    }\r\n    getSubmitMode() {\r\n        return this.getAttribute().getSubmitMode();\r\n    }\r\n    getUserPrivilege() {\r\n        return this.getAttribute().getUserPrivilege();\r\n    }\r\n    setSubmitMode(submitMode) {\r\n        this.getAttribute().setSubmitMode(submitMode);\r\n    }\r\n    controls;\r\n    getValue() {\r\n        return this.getAttribute().getValue();\r\n    }\r\n    setValue(value) {\r\n        this.getAttribute().setValue(value);\r\n    }\r\n    getAttribute() {\r\n        return this._formContext.getAttribute(this.attributeName);\r\n    }\r\n    getAttributeSafe() {\r\n        try {\r\n            return this._formContext.getAttribute(this.attributeName);\r\n        }\r\n        catch (error) {\r\n            return null;\r\n        }\r\n    }\r\n    control() {\r\n        return this._formContext.getControl(this.attributeName);\r\n    }\r\n    isCreateForm() {\r\n        return this._formContext.ui.getFormType() === 1;\r\n    }\r\n    isUpdateForm() {\r\n        return this._formContext.ui.getFormType() === 2;\r\n    }\r\n    isReadOnlyForm() {\r\n        return this._formContext.ui.getFormType() === 3;\r\n    }\r\n    isDisabledForm() {\r\n        return this._formContext.ui.getFormType() === 4;\r\n    }\r\n    isEditableForm() {\r\n        return this.isCreateForm || this.isUpdateForm;\r\n    }\r\n    isLockedForm() {\r\n        return !this.isEditableForm;\r\n    }\r\n    registerOnChange(handler) {\r\n        this.addOnChange(handler);\r\n    }\r\n    addOnChange(handler) {\r\n        this.getAttribute().addOnChange(handler);\r\n    }\r\n    removeOnChange(handler) {\r\n        this.getAttribute().removeOnChange(handler);\r\n    }\r\n    fireOnChange() {\r\n        this.getAttribute().fireOnChange();\r\n    }\r\n    setDisabled(disable) {\r\n        if (!disable && this.isLockedForm())\r\n            return;\r\n        const attributeControls = this.getAttribute().controls;\r\n        attributeControls.forEach(control => {\r\n            if (\"setDisabled\" in control) {\r\n                control.setDisabled(disable);\r\n            }\r\n        });\r\n    }\r\n    getDisabled() {\r\n        let disabled = true;\r\n        const attributeControls = this.getAttribute().controls;\r\n        attributeControls.forEach(control => {\r\n            if (\"getDisabled\" in control) {\r\n                disabled = disabled && control.getDisabled();\r\n            }\r\n        });\r\n        return disabled;\r\n    }\r\n    getVisible() {\r\n        const formAttribute = this.getAttribute();\r\n        const attributeControls = formAttribute.controls;\r\n        let visible = true;\r\n        attributeControls.forEach(control => { visible = visible && control.getVisible(); });\r\n        return visible;\r\n    }\r\n    setVisible(visible) {\r\n        const formAttribute = this.getAttribute();\r\n        const attributeControls = formAttribute.controls;\r\n        attributeControls.forEach(control => {\r\n            if (\"setVisible\" in control) {\r\n                control.setVisible(visible);\r\n            }\r\n        });\r\n    }\r\n    setValueInternal(value) {\r\n        if (this.isLockedForm())\r\n            return null;\r\n        return this.getAttribute().setValue(value);\r\n    }\r\n    setValueInternalIgnoreLockedForm(value) {\r\n        return this.getAttribute().setValue(value);\r\n    }\r\n    setValueIgnoreLockedForm(value) {\r\n        this.setValueInternalIgnoreLockedForm(value);\r\n    }\r\n    setRequiredLevel(requiredLevel) {\r\n        this.getAttribute().setRequiredLevel(requiredLevel);\r\n    }\r\n    getRequiredLevel() {\r\n        return this.getAttribute().getRequiredLevel();\r\n    }\r\n    getLabel() {\r\n        return this.control().getLabel();\r\n    }\r\n    setLabel(label) {\r\n        const attributeControls = this.getAttribute().controls;\r\n        attributeControls.forEach(control => { control.setLabel(label); });\r\n    }\r\n    submitValue(submit) {\r\n        this.getAttribute().setSubmitMode(submit);\r\n    }\r\n    setNotification(message, uniqueId) {\r\n        if (this.isLockedForm())\r\n            return;\r\n        const attributeControls = this.getAttribute().controls;\r\n        attributeControls.forEach(control => {\r\n            if (\"setNotification\" in control) {\r\n                control.setNotification(message, uniqueId);\r\n            }\r\n        });\r\n    }\r\n    clearNotification(uniqueId) {\r\n        if (this.isLockedForm())\r\n            return;\r\n        const attributeControls = this.getAttribute().controls;\r\n        attributeControls.forEach(control => {\r\n            if (\"clearNotification\" in control) {\r\n                control.clearNotification(uniqueId);\r\n            }\r\n        });\r\n    }\r\n    forEachControl(func) {\r\n        this.getAttribute().controls.forEach(func);\r\n    }\r\n    setIsValid(isValid, message) {\r\n        this.getAttribute().setIsValid(isValid, message);\r\n    }\r\n}\n\nclass StringFormAttribute extends FormAttributeBase {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n        this.controls = this._getTypedAttribute()?.controls;\r\n    }\r\n    _getTypedAttribute() {\r\n        return this.getAttributeSafe();\r\n    }\r\n    controls;\r\n    getFormat() {\r\n        return this._getTypedAttribute().getFormat();\r\n    }\r\n    getMaxLength() {\r\n        return this._getTypedAttribute().getMaxLength();\r\n    }\r\n    setIsValid(isValid, message) {\r\n        this._getTypedAttribute().setIsValid(isValid, message);\r\n    }\r\n}\n\nclass MemoFormAttribute extends StringFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass NumberFormAttribute extends FormAttributeBase {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n        this.controls = this._getTypedAttribute()?.controls;\r\n    }\r\n    _getTypedAttribute() {\r\n        return this.getAttributeSafe();\r\n    }\r\n    controls;\r\n    getFormat() {\r\n        return this._getTypedAttribute().getFormat();\r\n    }\r\n    getMax() {\r\n        return this._getTypedAttribute().getMax();\r\n    }\r\n    getMin() {\r\n        return this._getTypedAttribute().getMin();\r\n    }\r\n    getPrecision() {\r\n        return this._getTypedAttribute().getPrecision();\r\n    }\r\n    setPrecision(precision) {\r\n        this._getTypedAttribute().setPrecision(precision);\r\n    }\r\n    setIsValid(isValid, message) {\r\n        this._getTypedAttribute().setIsValid(isValid, message);\r\n    }\r\n}\n\nclass MoneyFormAttribute extends NumberFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass LookupFormAttribute extends FormAttributeBase {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n        this.controls = this._getTypedAttribute()?.controls;\r\n    }\r\n    _getTypedAttribute() {\r\n        return this.getAttributeSafe();\r\n    }\r\n    /**\r\n     * Builds the correct lookup array based on a variety input parameter types\r\n     *\r\n     * @param {string|{id: string, name: string}|Array<{id: string, name: string}>} value\r\n     * @returns {Array<{id: string}>|null} The lookup array\r\n     */\r\n    static buildLookupArray(value) {\r\n        let lookupValue;\r\n        if (typeof value === \"string\") {\r\n            lookupValue = [{ id: Guid.ensureBraces(value) }];\r\n        }\r\n        else if (typeof value === \"object\" && \"id\" in value && value.id) {\r\n            lookupValue = [value];\r\n            lookupValue[0].id = Guid.ensureBraces(value.id);\r\n        }\r\n        else if (typeof value === \"object\" && value instanceof Array && value.length > 0) {\r\n            lookupValue = value;\r\n            if (lookupValue != null && lookupValue[0] != null)\r\n                lookupValue[0].id = Guid.ensureBraces(lookupValue[0].id);\r\n        }\r\n        else {\r\n            throw new Error(\"Invalid Argument Type \\\"value\\\"\");\r\n        }\r\n        return lookupValue;\r\n    }\r\n    controls;\r\n    getValue() {\r\n        var value = this._getTypedAttribute().getValue();\r\n        if (value == null || value.length === 0)\r\n            return null;\r\n        return value[0];\r\n    }\r\n    getLookupId() {\r\n        const rawValue = this._getTypedAttribute().getValue();\r\n        if (rawValue == null || rawValue.length === 0) {\r\n            return null;\r\n        }\r\n        return rawValue[0].id;\r\n    }\r\n    getLookupName() {\r\n        const rawValue = this._getTypedAttribute().getValue();\r\n        if (rawValue == null || rawValue.length === 0) {\r\n            return undefined;\r\n        }\r\n        return rawValue[0].name;\r\n    }\r\n    setValue(value) {\r\n        const lookupArray = !value\r\n            ? null\r\n            : LookupFormAttribute.buildLookupArray(value);\r\n        this.setValueInternal(lookupArray);\r\n    }\r\n    getIsPartyList() {\r\n        return this._getTypedAttribute().getIsPartyList();\r\n    }\r\n    /**\r\n     * Sets the lookup value. A variety of parameter types is supported. Ignores locked form.\r\n     */\r\n    setValueIgnoreLockedForm(value) {\r\n        const lookupArray = LookupFormAttribute.buildLookupArray(value);\r\n        this.setValueInternalIgnoreLockedForm(lookupArray);\r\n    }\r\n    /**\r\n     * Sets the types of entities allowed in the lookup control.\r\n     */\r\n    setEntityTypes(logicalNames) {\r\n        this.control().setEntityTypes(logicalNames);\r\n    }\r\n    /**\r\n     * Gets the types of entities allowed in the lookup control.\r\n     */\r\n    getEntityTypes() {\r\n        return this.control().getEntityTypes();\r\n    }\r\n    /**\r\n     * Adds an additional custom filter to the lookup, with the \"AND\" filter operator.\r\n     * Can only be used within a \"pre search\" event handler\r\n     *\r\n     * @param filterField Field for which the filter value should be applied\r\n     * @param filterValue The filter value\r\n     */\r\n    addLookupFilter(filterField, filterValue) {\r\n        // noinspection HtmlUnknownAttribute\r\n        const filter = `<filter type='and'>\r\n            <condition attribute='${filterField}' operator='eq' value='${filterValue}' />\r\n        </filter>`;\r\n        this.controls.forEach(control => {\r\n            control.addCustomFilter(filter);\r\n        });\r\n    }\r\n    /**\r\n     * Sets a fetchXML lookup filter for this lookup attribute.\r\n     *\r\n     * @param The custom lookup filter\r\n     */\r\n    addLookupXMLFilter(xmlFilter) {\r\n        this.controls.forEach(control => {\r\n            control.addCustomFilter(xmlFilter);\r\n        });\r\n    }\r\n    setIsValid(isValid, message) {\r\n        this._getTypedAttribute().setIsValid(isValid, message);\r\n    }\r\n}\n\nclass UniqueidentifierFormAttribute extends LookupFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass OwnerFormAttribute extends UniqueidentifierFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass PicklistFormAttribute extends FormAttributeBase {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n        this.controls = this._getTypedAttribute()?.controls;\r\n    }\r\n    _getTypedAttribute() {\r\n        return this.getAttributeSafe();\r\n    }\r\n    controls;\r\n    getInitialValue() {\r\n        return this._getTypedAttribute().getInitialValue();\r\n    }\r\n    getFormat() {\r\n        return this._getTypedAttribute().getFormat();\r\n    }\r\n    getOption(value) {\r\n        if (typeof value === \"string\")\r\n            return this._getTypedAttribute().getOption(value);\r\n        else\r\n            return this._getTypedAttribute().getOption(value);\r\n    }\r\n    getOptions() {\r\n        return this._getTypedAttribute().getOptions();\r\n    }\r\n    removeOption(value) {\r\n        this.controls.forEach((control) => {\r\n            control?.removeOption(value);\r\n        });\r\n    }\r\n    getSelectedOption() {\r\n        return this._getTypedAttribute().getSelectedOption();\r\n    }\r\n    getText() {\r\n        return this._getTypedAttribute().getText();\r\n    }\r\n    setValue(value) {\r\n        this._getTypedAttribute().setValue(value);\r\n    }\r\n    setIsValid(isValid, message) {\r\n        this._getTypedAttribute().setIsValid(isValid, message);\r\n    }\r\n}\n\nclass StateFormAttribute extends PicklistFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass DoubleFormAttribute extends NumberFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass StatusFormAttribute extends PicklistFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass BooleanFormAttribute extends FormAttributeBase {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n    setIsValid(isValid, message) {\r\n        this._getAttribute().setIsValid(isValid, message);\r\n    }\r\n    _getAttribute() {\r\n        return this.getAttribute();\r\n    }\r\n    getInitialValue() {\r\n        return this._getAttribute().getInitialValue();\r\n    }\r\n}\n\nclass DecimalFormAttribute extends NumberFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass IntegerFormAttribute extends NumberFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass CustomerFormAttribute extends LookupFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass DateTimeFormAttribute extends FormAttributeBase {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n        this.controls = this._getTypedAttribute()?.controls;\r\n    }\r\n    _getTypedAttribute() {\r\n        return this.getAttributeSafe();\r\n    }\r\n    controls;\r\n    getFormat() {\r\n        return this._getTypedAttribute().getFormat();\r\n    }\r\n    setIsValid(isValid, message) {\r\n        this._getTypedAttribute().setIsValid(isValid, message);\r\n    }\r\n}\n\nclass MultiSelectPicklistFormAttribute extends PicklistFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nclass PartyListFormAttribute extends LookupFormAttribute {\r\n}\n\nclass EntityNameFormAttribute extends StringFormAttribute {\r\n    constructor(attributeName, formContext) {\r\n        super(attributeName, formContext);\r\n    }\r\n}\n\nvar NotificationLevel;\r\n(function (NotificationLevel) {\r\n    NotificationLevel[\"Info\"] = \"INFO\";\r\n    NotificationLevel[\"Warning\"] = \"WARNING\";\r\n    NotificationLevel[\"Error\"] = \"ERROR\";\r\n})(NotificationLevel || (NotificationLevel = {}));\r\n/**\r\n * A NotificationRule is used to conditionally show a notification on\r\n * either page level or on a specific attribute\r\n */\r\nclass NotificationRule extends TriggerableRuleBase {\r\n    _id;\r\n    _level = NotificationLevel.Info;\r\n    _showIfFunction = () => true;\r\n    isPageNotification = false;\r\n    constructor(formContext, ruleStore, id) {\r\n        super(formContext, ruleStore, RuleType.NotificationRule);\r\n        this._id = id || Guid.generate();\r\n        this.isPageNotification = false;\r\n    }\r\n    /**\r\n     * Sets the function which decides if the notification will be shown\r\n     */\r\n    if(func) {\r\n        this._showIfFunction = func;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets the function which returns the notification message\r\n     *\r\n     * @param value The function that returns the message\r\n     */\r\n    returns(value) {\r\n        this.function = value;\r\n        if (typeof value !== \"function\")\r\n            this.function = () => value;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets the form or attribute for which the notification will be displayed\r\n     */\r\n    for(formOrAttribute) {\r\n        this.isPageNotification = formOrAttribute instanceof FormObjectBase;\r\n        if (formOrAttribute instanceof FormAttributeBase)\r\n            this.targetAttribute = formOrAttribute;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets the notification level (Info / Error / Warning)\r\n     */\r\n    isLevel(level) {\r\n        this._level = level;\r\n        return this;\r\n    }\r\n    execute() {\r\n        if (!this.isActive)\r\n            return;\r\n        try {\r\n            const message = this.executeFunction();\r\n            const showMessage = this._showIfFunction();\r\n            if (this.isPageNotification)\r\n                this.setPageNotification(showMessage, message);\r\n            else\r\n                this.setAttributeNotification(showMessage, message);\r\n        }\r\n        catch (e) {\r\n            console.error(`Exception occurred during NotificationRule execution: ${e}`);\r\n        }\r\n    }\r\n    setPageNotification(showMessage, message = \"\") {\r\n        const msg = this._level;\r\n        if (showMessage)\r\n            this.formContext.ui.setFormNotification(message, msg, this._id);\r\n        else\r\n            this.formContext.ui.clearFormNotification(this._id);\r\n    }\r\n    setAttributeNotification(showMessage, message = \"\") {\r\n        if (!this.targetAttribute) {\r\n            console.error(\"The target attribute has not been set.\");\r\n            return;\r\n        }\r\n        if (showMessage)\r\n            this.targetAttribute.setNotification(message, this._id);\r\n        else\r\n            this.targetAttribute.clearNotification(this._id);\r\n    }\r\n}\n\nclass OnSaveRule extends RuleBase {\r\n    _preventFunction = null;\r\n    constructor(formContext, ruleStore) {\r\n        super(formContext, ruleStore, RuleType.OnSaveRule);\r\n        this.formContext.data.entity.addOnSave(execObj => {\r\n            if (this.isActive) {\r\n                if (this.function)\r\n                    this.executeFunction();\r\n                if (this._preventFunction != null) {\r\n                    const prevent = this._preventFunction();\r\n                    if (prevent)\r\n                        execObj.getEventArgs().preventDefault();\r\n                }\r\n            }\r\n        });\r\n    }\r\n    preventsIf(boolfunc) {\r\n        this._preventFunction = boolfunc;\r\n        return this;\r\n    }\r\n    executes(func) {\r\n        this.function = func;\r\n        return this;\r\n    }\r\n    execute() {\r\n        // Empty on purpose\r\n    }\r\n}\n\nclass RequireRule extends TriggerableRuleBase {\r\n    _targetAttributes = [];\r\n    constructor(formContext, ruleStore) {\r\n        super(formContext, ruleStore, RuleType.RequireRule);\r\n    }\r\n    returns(func) {\r\n        this.function = func;\r\n        return this;\r\n    }\r\n    for(...targets) {\r\n        this._targetAttributes = targets;\r\n        return this;\r\n    }\r\n    execute() {\r\n        if (this.isActive) {\r\n            const result = this.executeFunction();\r\n            for (const targetAttribute of this._targetAttributes) {\r\n                targetAttribute.setRequiredLevel(result ? \"required\" : \"none\");\r\n            }\r\n        }\r\n    }\r\n}\n\nclass SubscribeRule extends TriggerableRuleBase {\r\n    targetModel = null;\r\n    constructor(formContext, ruleStore) {\r\n        super(formContext, ruleStore, RuleType.SubscribeRule);\r\n    }\r\n    for(target) {\r\n        this.targetModel = target;\r\n        return this;\r\n    }\r\n    executes(func) {\r\n        this.function = func;\r\n        return this;\r\n    }\r\n    executeFunction() {\r\n        const result = super.executeFunction();\r\n        if (result && typeof result.then === \"function\") {\r\n            return result.then(() => {\r\n                this._doFireOnChange();\r\n            }, (error) => {\r\n                console.error(`Exception occurred during SubscribeRule execution: ${error}`);\r\n                throw error;\r\n            });\r\n        }\r\n        else {\r\n            this._doFireOnChange();\r\n            return result;\r\n        }\r\n    }\r\n    _doFireOnChange() {\r\n        if (this.targetModel)\r\n            this.targetModel.fireOnChange();\r\n    }\r\n    execute() {\r\n        if (this.isActive)\r\n            this.executeFunction();\r\n    }\r\n}\n\nclass FluentRuleFactory {\r\n    _formContext;\r\n    _ruleStore;\r\n    constructor(formContext, ruleStore) {\r\n        this._formContext = formContext;\r\n        this._ruleStore = ruleStore;\r\n    }\r\n    /**\r\n     * Creates a new DisplayRule\r\n     */\r\n    createDisplayRule() {\r\n        return new DisplayRule(this._formContext, this._ruleStore);\r\n    }\r\n    /**\r\n     * Creates a new EnableRule\r\n     */\r\n    createEnableRule() {\r\n        return new EnableRule(this._formContext, this._ruleStore);\r\n    }\r\n    /**\r\n     * Creates a new NotificationRule\r\n     */\r\n    createNotificationRule() {\r\n        return new NotificationRule(this._formContext, this._ruleStore);\r\n    }\r\n    /**\r\n     * Creates a new FilterRule\r\n     */\r\n    createFilterRule() {\r\n        return new FilterRule(this._formContext, this._ruleStore);\r\n    }\r\n    /**\r\n     * Creates a new OnSaveRule\r\n     */\r\n    createOnSaveRule() {\r\n        return new OnSaveRule(this._formContext, this._ruleStore);\r\n    }\r\n    /**\r\n     * Creates a new RequireRule\r\n     */\r\n    createRequireRule() {\r\n        return new RequireRule(this._formContext, this._ruleStore);\r\n    }\r\n    /**\r\n     * Creates a new ValueRule\r\n     */\r\n    createValueRule() {\r\n        return new ValueRule(this._formContext, this._ruleStore);\r\n    }\r\n    /**\r\n     * Creates a new SubscribeRule\r\n     */\r\n    createSubscribeRule() {\r\n        return new SubscribeRule(this._formContext, this._ruleStore);\r\n    }\r\n}\n\nclass RuleStore {\r\n    rules;\r\n    onLoadActivations;\r\n    onSaveActivations;\r\n    registeredChangeHandlers;\r\n    constructor() {\r\n        this.rules = [];\r\n        this.onLoadActivations = [];\r\n        this.onSaveActivations = [];\r\n        this.registeredChangeHandlers = new Map();\r\n    }\r\n    clearRules() {\r\n        for (const rule of this.rules) {\r\n            if (rule instanceof NotificationRule) {\r\n                if (rule.isPageNotification) {\r\n                    rule.setPageNotification(false);\r\n                }\r\n                else {\r\n                    rule.setAttributeNotification(false);\r\n                }\r\n            }\r\n        }\r\n        for (let [trigger, handler] of this.registeredChangeHandlers) {\r\n            trigger.unregisterOnChange(handler);\r\n        }\r\n        this.registeredChangeHandlers.clear();\r\n        this.onLoadActivations = [];\r\n        this.onSaveActivations = [];\r\n        this.rules = [];\r\n    }\r\n    registerRule(rule) {\r\n        this.rules.push(rule);\r\n    }\r\n    get allSubscribeRules() {\r\n        return this.rules.filter(r => r instanceof SubscribeRule);\r\n    }\r\n    get onLoadActivationSubscribeRules() {\r\n        return this.onLoadActivations.filter(r => r instanceof SubscribeRule);\r\n    }\r\n}\n\nclass FluentRules {\r\n    _dynamicsContext;\r\n    _ruleStore;\r\n    _impactedOnLoadRules;\r\n    _ruleFactory;\r\n    isDocumentReady;\r\n    constructor(dynamicsContext) {\r\n        this._dynamicsContext = dynamicsContext;\r\n        this._ruleStore = new RuleStore();\r\n        this._ruleFactory = new FluentRuleFactory(this._dynamicsContext.formContext, this._ruleStore);\r\n        this.isDocumentReady = false;\r\n        /**\r\n         * This array stores all models that are triggered by an onload subscribe rule.\r\n         * The FluentRule framework waits for all these models to fire an onchange event\r\n         * before setting {@link isDocumentReady} to true.\r\n         */\r\n        this._impactedOnLoadRules = [];\r\n    }\r\n    async onLoad() {\r\n        const rules = this._ruleStore.allSubscribeRules;\r\n        for (const rule of this._ruleStore.onLoadActivationSubscribeRules) {\r\n            const impactedRules = this._findImpactedRules(rules, rule);\r\n            this._impactedOnLoadRules.push(...impactedRules);\r\n        }\r\n        for (const rule of this._impactedOnLoadRules) {\r\n            if (rule.targetModel)\r\n                rule.targetModel.registerOnChange(this._impactedModelChangeHandler);\r\n        }\r\n        await Promise.all(this._ruleStore.onLoadActivations.map(item => item.execute()));\r\n        this._setDocumentReadyState();\r\n    }\r\n    async onSave() {\r\n        await Promise.all(this._ruleStore.onSaveActivations.map(item => item.execute()));\r\n    }\r\n    _setDocumentReadyState() {\r\n        if (this._impactedOnLoadRules.length === 0)\r\n            this.isDocumentReady = true;\r\n    }\r\n    _impactedModelChangeHandler(model) {\r\n        const rules = this._impactedOnLoadRules.filter(r => r.targetModel?._internalId === model._internalId);\r\n        for (const rule of rules) {\r\n            const index = this._impactedOnLoadRules.indexOf(rule);\r\n            this._impactedOnLoadRules.splice(index, 1);\r\n        }\r\n    }\r\n    _findImpactedRules(allRules, sourceRule) {\r\n        const impactedRules = allRules\r\n            .filter(r => r.triggers.some(t => t === sourceRule.targetModel));\r\n        for (const impactedRule of impactedRules) {\r\n            const childImpactedRules = this._findImpactedRules(allRules, impactedRule);\r\n            impactedRules.push(...childImpactedRules);\r\n        }\r\n        return impactedRules;\r\n    }\r\n}\n\nclass LookUpCustomFilter {\r\n    static isLookupControl(control) {\r\n        return true;\r\n    }\r\n    static apply(attributeAccessor, func) {\r\n        attributeAccessor().forEachControl((item) => {\r\n            if (this.isLookupControl(item))\r\n                func(item);\r\n        });\r\n    }\r\n    static removeFilter(attributeAccessor, handler) {\r\n        this.apply(attributeAccessor, (c) => c.removePreSearch(handler));\r\n    }\r\n    static applyFilter(attributeAccessor, fetchXmlFilterString, logicalName) {\r\n        const preSearchHandler = () => {\r\n            this.apply(attributeAccessor, (c) => {\r\n                c.addCustomFilter(fetchXmlFilterString, logicalName != null ? logicalName : undefined);\r\n            });\r\n        };\r\n        this.apply(attributeAccessor, (c) => c.addPreSearch(preSearchHandler));\r\n        return preSearchHandler;\r\n    }\r\n    static applyFilterMethod(attributeAccessor, handlerFunc, logicalName, addCustomFilterPredicate) {\r\n        const preSearchHandler = () => {\r\n            if (!addCustomFilterPredicate || typeof addCustomFilterPredicate !== \"function\" || addCustomFilterPredicate() === true) {\r\n                this.apply(attributeAccessor, (c) => {\r\n                    c.addCustomFilter(handlerFunc(), logicalName != null ? logicalName : undefined);\r\n                });\r\n            }\r\n        };\r\n        this.apply(attributeAccessor, (c) => c.addPreSearch(preSearchHandler));\r\n        return preSearchHandler;\r\n    }\r\n}\n\nclass ODataAttributeFilterBase {\r\n    _not;\r\n    _filterValue;\r\n    _attribute;\r\n    /**\r\n     * @param attribute The Attribute to filter\r\n     */\r\n    constructor(attribute) {\r\n        this._not = false;\r\n        this._filterValue = \"\";\r\n        this._attribute = attribute;\r\n    }\r\n    get filterValue() {\r\n        return this._filterValue;\r\n    }\r\n    isNotNull() {\r\n        this._filterValue = `${this._attribute.selector} ne null`;\r\n        return this;\r\n    }\r\n    isNull() {\r\n        this._filterValue = `${this._attribute.selector} eq null`;\r\n        return this;\r\n    }\r\n    equal(value) {\r\n        this._buildFilterValue(\"eq\", value);\r\n        return this;\r\n    }\r\n    notEqual(value) {\r\n        this._buildFilterValue(\"ne\", value);\r\n        return this;\r\n    }\r\n    _buildFilterValue(operator, value) {\r\n        this._filterValue = `${this._attribute.selector} ${operator} ${this._attribute.convert(value)}`;\r\n    }\r\n}\n\nvar OrderDirection;\r\n(function (OrderDirection) {\r\n    OrderDirection[OrderDirection[\"Ascending\"] = 0] = \"Ascending\";\r\n    OrderDirection[OrderDirection[\"Descending\"] = 1] = \"Descending\";\r\n})(OrderDirection || (OrderDirection = {}));\r\nclass ODataAttributeOrder {\r\n    _attribute;\r\n    _orderDirection;\r\n    constructor(attribute) {\r\n        this._attribute = attribute;\r\n        this._orderDirection = OrderDirection.Ascending;\r\n    }\r\n    ascending() {\r\n        this._orderDirection = OrderDirection.Ascending;\r\n        return this;\r\n    }\r\n    descending() {\r\n        this._orderDirection = OrderDirection.Descending;\r\n        return this;\r\n    }\r\n    buildOrderString() {\r\n        const direction = this._orderDirection === OrderDirection.Ascending ? \"asc\" : \"desc\";\r\n        return `${this._attribute.selector} ${direction}`;\r\n    }\r\n}\n\nclass ODataAttributeBase {\r\n    relation;\r\n    attributeName;\r\n    constructor(attributeName, relation) {\r\n        this.attributeName = attributeName;\r\n        this.relation = relation;\r\n    }\r\n    get selector() {\r\n        return this.attributeName.toLowerCase();\r\n    }\r\n    convert(value) {\r\n        return value;\r\n    }\r\n    asFilter() {\r\n        return new ODataAttributeFilterBase(this);\r\n    }\r\n    asOrder() {\r\n        return new ODataAttributeOrder(this);\r\n    }\r\n}\n\nclass StringODataAttributeFilter extends ODataAttributeFilterBase {\r\n    /**\r\n     * @param attribute The Attribute to filter\r\n     */\r\n    constructor(attribute) {\r\n        super(attribute);\r\n        this._not = false;\r\n    }\r\n    get filterValue() {\r\n        return (this._not ? \"not \" : \"\") + this._filterValue;\r\n    }\r\n    not() {\r\n        this._not = true;\r\n        return this;\r\n    }\r\n    startsWith(value) {\r\n        this._filterValue = `startswith(${this._attribute.selector},${this._attribute.convert(value)})`;\r\n        return this;\r\n    }\r\n    endsWith(value) {\r\n        this._filterValue = `endswith(${this._attribute.selector},${this._attribute.convert(value)})`;\r\n        return this;\r\n    }\r\n    contains(value) {\r\n        this._filterValue = `contains(${this._attribute.selector},${this._attribute.convert(value)})`;\r\n        return this;\r\n    }\r\n}\n\nclass MemoODataAttribute extends ODataAttributeBase {\r\n    convert(value) {\r\n        return `'${value}'`;\r\n    }\r\n    asFilter() {\r\n        return new StringODataAttributeFilter(this);\r\n    }\r\n}\n\nclass NumberODataAttributeFilter extends ODataAttributeFilterBase {\r\n    greaterThan(value) {\r\n        this._buildFilterValue(\"gt\", value);\r\n        return this;\r\n    }\r\n    lessThan(value) {\r\n        this._buildFilterValue(\"lt\", value);\r\n        return this;\r\n    }\r\n    lessThanOrEqual(value) {\r\n        this._buildFilterValue(\"le\", value);\r\n        return this;\r\n    }\r\n    greaterThanOrEqual(value) {\r\n        this._buildFilterValue(\"ge\", value);\r\n        return this;\r\n    }\r\n}\n\nclass MoneyODataAttribute extends ODataAttributeBase {\r\n    asFilter() {\r\n        return new NumberODataAttributeFilter(this);\r\n    }\r\n}\n\nclass OwnerODataAttribute extends ODataAttributeBase {\r\n    get selector() {\r\n        return `_${super.selector}_value`;\r\n    }\r\n    convert(value) {\r\n        if (value === null || value === undefined)\r\n            return null;\r\n        return value.replace(\"{\", \"\").replace(\"}\", \"\");\r\n    }\r\n}\n\nclass StateODataAttribute extends ODataAttributeBase {\r\n}\n\nclass DoubleODataAttribute extends ODataAttributeBase {\r\n    asFilter() {\r\n        return new NumberODataAttributeFilter(this);\r\n    }\r\n}\n\nclass LookupODataAttribute extends ODataAttributeBase {\r\n    get selector() {\r\n        return `_${super.selector}_value`;\r\n    }\r\n    convert(value) {\r\n        if (value === null || value === undefined)\r\n            return null;\r\n        return value.replace(\"{\", \"\").replace(\"}\", \"\");\r\n    }\r\n}\n\nclass StatusODataAttribute extends ODataAttributeBase {\r\n}\n\nclass StringODataAttribute extends ODataAttributeBase {\r\n    convert(value) {\r\n        return `'${value}'`;\r\n    }\r\n    asFilter() {\r\n        return new StringODataAttributeFilter(this);\r\n    }\r\n}\n\nclass BooleanODataAttribute extends ODataAttributeBase {\r\n}\n\nclass DecimalODataAttribute extends ODataAttributeBase {\r\n    asFilter() {\r\n        return new NumberODataAttributeFilter(this);\r\n    }\r\n}\n\nclass IntegerODataAttribute extends ODataAttributeBase {\r\n    asFilter() {\r\n        return new NumberODataAttributeFilter(this);\r\n    }\r\n}\n\nclass CustomerODataAttribute extends ODataAttributeBase {\r\n    get selector() {\r\n        return `_${super.selector}_value`;\r\n    }\r\n    convert(value) {\r\n        if (value === null || value === undefined)\r\n            return null;\r\n        return value.replace(\"{\", \"\").replace(\"}\", \"\");\r\n    }\r\n}\n\nclass DateTimeODataAttributeFilter extends ODataAttributeFilterBase {\r\n    greaterThan(value) {\r\n        this._buildFilterValue(\"gt\", value);\r\n        return this;\r\n    }\r\n    lessThan(value) {\r\n        this._buildFilterValue(\"lt\", value);\r\n        return this;\r\n    }\r\n    lessThanOrEqual(value) {\r\n        this._buildFilterValue(\"le\", value);\r\n        return this;\r\n    }\r\n    greaterThanOrEqual(value) {\r\n        this._buildFilterValue(\"ge\", value);\r\n        return this;\r\n    }\r\n}\n\nclass DateTimeODataAttribute extends ODataAttributeBase {\r\n    convert(value) {\r\n        return value.toISOString();\r\n    }\r\n    asFilter() {\r\n        return new DateTimeODataAttributeFilter(this);\r\n    }\r\n}\n\nclass PicklistODataAttribute extends ODataAttributeBase {\r\n}\n\nclass MultiSelectPicklistODataAttribute extends ODataAttributeBase {\r\n}\n\nclass PartyListODataAttribute extends ODataAttributeBase {\r\n    convert(value) {\r\n        if (value === null || value === undefined)\r\n            return null;\r\n        return value.replace(\"{\", \"\").replace(\"}\", \"\");\r\n    }\r\n}\n\nclass UniqueidentifierODataAttribute extends ODataAttributeBase {\r\n    convert(value) {\r\n        if (value === null || value === undefined)\r\n            return null;\r\n        return value.replace(\"{\", \"\").replace(\"}\", \"\");\r\n    }\r\n}\n\nclass EntityNameODataAttribute extends ODataAttributeBase {\r\n    convert(value) {\r\n        return `'${value}'`;\r\n    }\r\n    asFilter() {\r\n        return new StringODataAttributeFilter(this);\r\n    }\r\n}\n\nclass ODataEntity {\r\n    _relation;\r\n    EntitySetName = \"\";\r\n    constructor(relation) {\r\n        this._relation = relation;\r\n    }\r\n}\n\nclass LookupConverter {\r\n    static createAttributeLookup(id, logicalName, name) {\r\n        return [{\r\n                id,\r\n                entityType: logicalName,\r\n                name,\r\n            }];\r\n    }\r\n    static createAttributeLookupFromODataResponse(odataResponse, attributeSelector) {\r\n        return {\r\n            id: odataResponse[attributeSelector],\r\n            entityType: odataResponse[`${attributeSelector}@Microsoft.Dynamics.CRM.lookuplogicalname`],\r\n            name: odataResponse[`${attributeSelector}@OData.Community.Display.V1.FormattedValue`],\r\n        };\r\n    }\r\n}\n\nclass PicklistConverter {\r\n    static createAttributeLookupFromODataResponse(odataResponse, attributeSelector) {\r\n        return {\r\n            value: odataResponse[attributeSelector],\r\n            name: odataResponse[`${attributeSelector}@OData.Community.Display.V1.FormattedValue`],\r\n        };\r\n    }\r\n}\n\nclass FilterGroup {\r\n    _expressions;\r\n    /**\r\n     * @param {Array<FilterValue>} expressions The filter values\r\n     */\r\n    constructor(expressions) {\r\n        this._expressions = expressions;\r\n    }\r\n    get filterValue() {\r\n        let value = \"(\";\r\n        for (const exp of this._expressions) {\r\n            value += exp.filterValue;\r\n        }\r\n        return `${value})`;\r\n    }\r\n}\n\nclass FilterValue {\r\n    get filterValue() {\r\n        return \"\";\r\n    }\r\n}\n\n// ReSharper disable once InconsistentNaming\r\nclass AndQueryOperator extends FilterValue {\r\n    get filterValue() {\r\n        return \" and \";\r\n    }\r\n}\r\n// ReSharper disable once InconsistentNaming\r\nclass OrQueryOperator extends FilterValue {\r\n    get filterValue() {\r\n        return \" or \";\r\n    }\r\n}\r\n/**\r\n * @readonly\r\n */\r\nconst QueryOperators = {\r\n    And: new AndQueryOperator(),\r\n    Or: new OrQueryOperator(),\r\n};\n\nclass Entity {\r\n    relation = \"\";\r\n    EntityLogicalName = \"\";\r\n    EntitySchemaName = \"\";\r\n    EntitySetName = \"\";\r\n    PrimaryIdAttribute = \"\";\r\n    PrimaryNameAttribute = \"\";\r\n    constructor(relation) {\r\n        this.relation = relation;\r\n    }\r\n}\n\nvar ODataQueryBuilderMode;\r\n(function (ODataQueryBuilderMode) {\r\n    ODataQueryBuilderMode[ODataQueryBuilderMode[\"Undefined\"] = 0] = \"Undefined\";\r\n    ODataQueryBuilderMode[ODataQueryBuilderMode[\"SelectSingle\"] = 1] = \"SelectSingle\";\r\n    ODataQueryBuilderMode[ODataQueryBuilderMode[\"SelectMultiple\"] = 2] = \"SelectMultiple\";\r\n})(ODataQueryBuilderMode || (ODataQueryBuilderMode = {}));\n\nclass ODataQueryBuilderLogic {\r\n    _queryParameters;\r\n    _query;\r\n    _isPrimarySelector;\r\n    /**\r\n     * Creates a new Instance\r\n     */\r\n    constructor(queryParameters) {\r\n        this._queryParameters = queryParameters;\r\n        this._query = this._buildBaseQuery();\r\n        this._isPrimarySelector = true;\r\n    }\r\n    /**\r\n     * Builds the OData Query String\r\n     */\r\n    buildQueryString() {\r\n        if (this._queryParameters.isSelectSingle())\r\n            this._addEntityIdToQuery();\r\n        this._addSelectToQuery();\r\n        this._addExpandersToQuery();\r\n        this._addFiltersToQuery();\r\n        this._addOrderByToQuery();\r\n        this._addTopToQuery();\r\n        return this._query;\r\n    }\r\n    _addEntityIdToQuery() {\r\n        if (this._queryParameters.entityId == null)\r\n            throw \"Entity Id not available on query paramaeters\";\r\n        const cleanedEntityId = this._queryParameters.entityId.replace(\"{\", \"\").replace(\"}\", \"\");\r\n        this._query += `(${cleanedEntityId})`;\r\n    }\r\n    _addSelectToQuery() {\r\n        if (!this._queryParameters.hasPrimaryAttributes()) {\r\n            this._query += `${this._getNextUrlSelector()}$select=*`;\r\n            return;\r\n        }\r\n        const relationAttributes = this._queryParameters.primaryAttributes\r\n            .filter(attr => attr.relation != null);\r\n        for (const attr of relationAttributes) {\r\n            const relName = attr.relation;\r\n            if (relName != null) {\r\n                if (!this._queryParameters.expanders.hasOwnProperty(relName))\r\n                    this._queryParameters.expanders.set(relName, []);\r\n                this._queryParameters.expanders.get(relName).push(attr.selector);\r\n            }\r\n        }\r\n        const localAttributes = this._queryParameters.primaryAttributes\r\n            .filter(attr => attr.relation == null);\r\n        this._query += `${this._getNextUrlSelector()}$select=`;\r\n        for (let i = 0; i < localAttributes.length; i++) {\r\n            this._query += localAttributes[i].selector;\r\n            if (i < localAttributes.length - 1)\r\n                this._query += \",\";\r\n        }\r\n    }\r\n    _addOrderByToQuery() {\r\n        if (!this._queryParameters.hasOrderByAttributes())\r\n            return;\r\n        this._query += `${this._getNextUrlSelector()}$orderby=`;\r\n        for (let i = 0; i < this._queryParameters.orderByAttributes.length; i++) {\r\n            const attribute = this._queryParameters.orderByAttributes[i];\r\n            if (attribute instanceof ODataAttributeOrder)\r\n                this._query += attribute.buildOrderString();\r\n            else if (attribute instanceof ODataAttributeBase && attribute.relation == null)\r\n                this._query += attribute.selector;\r\n            else\r\n                throw new Error(\"Invalid orderby usage!\");\r\n            if (i !== this._queryParameters.orderByAttributes.length - 1)\r\n                this._query += \",\";\r\n        }\r\n    }\r\n    _addExpandersToQuery() {\r\n        if (!this._queryParameters.hasExpanders())\r\n            return;\r\n        this._query += `${this._getNextUrlSelector()}$expand=`;\r\n        for (let i = 0; i < Object.keys(this._queryParameters.expanders).length; i++) {\r\n            const relation = Object.keys(this._queryParameters.expanders)[i];\r\n            const attributes = this._queryParameters.expanders.get(relation);\r\n            if (attributes != null)\r\n                this._query += `${relation}($select=${attributes.join(\",\")})`;\r\n            else\r\n                console.log(`No attributes of relation ${relation} found in expander object`);\r\n            if (i < this._queryParameters.expanders.size - 1)\r\n                this._query += \",\";\r\n        }\r\n    }\r\n    _addFiltersToQuery() {\r\n        if (!this._queryParameters.hasFilters())\r\n            return;\r\n        if (this._queryParameters.selectionMode === ODataQueryBuilderMode.SelectSingle)\r\n            throw \"Cannot apply filters when selecting a single record\";\r\n        this._query += `${this._getNextUrlSelector()}$filter=`;\r\n        for (let i = 0; i < this._queryParameters.filters.length; i++) {\r\n            const filter = this._queryParameters.filters[i];\r\n            this._query += filter.filterValue;\r\n        }\r\n    }\r\n    _addTopToQuery() {\r\n        if (this._queryParameters.hasLimit())\r\n            this._query += `${this._getNextUrlSelector()}$top=${this._queryParameters.limit}`;\r\n    }\r\n    _getNextUrlSelector() {\r\n        if (this._isPrimarySelector === true) {\r\n            this._isPrimarySelector = false;\r\n            return \"?\";\r\n        }\r\n        return \"&\";\r\n    }\r\n    _buildBaseQuery() {\r\n        return this._queryParameters.entity.EntitySetName.toLowerCase();\r\n    }\r\n}\n\nclass Storage {\r\n    _db;\r\n    constructor() {\r\n        if (window.indexedDB)\r\n            this.open();\r\n    }\r\n    async open() {\r\n        await new Promise((resolve, reject) => {\r\n            if (this._db) {\r\n                resolve();\r\n            }\r\n            const dbRequest = window.indexedDB.open(\"dss-cache\");\r\n            dbRequest.onerror = (event) => {\r\n                console.error(event);\r\n                reject(\"Can't open index db database\");\r\n            };\r\n            dbRequest.onblocked = (event) => {\r\n                console.error(event);\r\n                reject(\"Can't open index db database\");\r\n            };\r\n            dbRequest.onsuccess = (event) => {\r\n                this._db = event?.target.result;\r\n                resolve();\r\n            };\r\n            dbRequest.onupgradeneeded = (event) => {\r\n                const db = event?.target.result;\r\n                if (!db.objectStoreNames.contains('dss-cache')) {\r\n                    db.createObjectStore('dss-cache', {\r\n                        autoIncrement: false\r\n                    });\r\n                }\r\n            };\r\n        });\r\n    }\r\n    async add(key, value) {\r\n        if (this._db == null) {\r\n            return;\r\n        }\r\n        await new Promise((resolve) => {\r\n            let tx = this._db.transaction(['dss-cache'], 'readwrite');\r\n            let store = tx.objectStore('dss-cache');\r\n            var putRequest = store.put(value, key);\r\n            putRequest.onsuccess = () => {\r\n                console.log(`[Storage] Stored object in ${key}`);\r\n                resolve();\r\n            };\r\n            putRequest.onerror = (event) => {\r\n                console.error(`[Storage] Can't store value in cache:`, event);\r\n                resolve();\r\n            };\r\n        });\r\n    }\r\n    async get(key) {\r\n        if (this._db == null) {\r\n            return null;\r\n        }\r\n        return await new Promise((resolve) => {\r\n            let tx = this._db.transaction(['dss-cache'], 'readwrite');\r\n            let store = tx.objectStore('dss-cache');\r\n            var getRequest = store.get(key);\r\n            getRequest.onsuccess = (event) => {\r\n                resolve(event?.target.result);\r\n            };\r\n            getRequest.onerror = (event) => {\r\n                console.error(`[Storage] Can't retrieve ${key} from cache`, event);\r\n                resolve(null);\r\n            };\r\n        });\r\n    }\r\n    async delete(key) {\r\n        if (this._db == null) {\r\n            return;\r\n        }\r\n        await new Promise((resolve) => {\r\n            let tx = this._db.transaction(['dss-cache'], 'readwrite');\r\n            let store = tx.objectStore('dss-cache');\r\n            let deleteRequest = store.delete(key);\r\n            deleteRequest.onsuccess = () => {\r\n                console.log(`[Storage] Deleted key ${key}`);\r\n                resolve();\r\n            };\r\n            deleteRequest.onerror = (event) => {\r\n                console.error(`[Storage] Can't delete ${key} from cache`, event);\r\n                resolve();\r\n            };\r\n        });\r\n    }\r\n    async clear() {\r\n        if (this._db == null) {\r\n            return;\r\n        }\r\n        await new Promise((resolve) => {\r\n            let tx = this._db.transaction(['dss-cache'], 'readwrite');\r\n            let store = tx.objectStore('dss-cache');\r\n            const clearRequest = store.clear();\r\n            clearRequest.onsuccess = () => {\r\n                console.log(`[Storage] Cleared IndexedDB table`);\r\n                resolve();\r\n            };\r\n            clearRequest.onerror = (event) => {\r\n                console.error(`[Storage] Can't clear storage`, event);\r\n                resolve();\r\n            };\r\n        });\r\n    }\r\n}\n\nclass DefaultCache {\r\n    storage;\r\n    pendingOdataRequest;\r\n    constructor() {\r\n        this.storage = new Storage();\r\n        this.pendingOdataRequest = new Map();\r\n    }\r\n    /**\r\n     * Checks whether a pending response is registered for the given request\r\n     *\r\n     * @param item The request identifier\r\n     * @returns True if a pending response is registered\r\n     */\r\n    hasPendingResponse(item) {\r\n        return this.pendingOdataRequest.has(item.hash);\r\n    }\r\n    /**\r\n     * Returns the pending response for the given request\r\n     *\r\n     * @param item The item for which the promise response should be returned\r\n     * @returns The pending response promise\r\n     */\r\n    getPendingResponse(item) {\r\n        return this.pendingOdataRequest.get(item.hash);\r\n    }\r\n    /**\r\n     * Adds the response promise to the pending response dictionary\r\n     *\r\n     * @param item The unique identifier\r\n     * @param promise Associated promise of the unique identifier\r\n     */\r\n    registerPendingRequest(item, promise) {\r\n        promise.then(() => {\r\n            console.log(`[FrontendCache] Deleting pending response: \"${item.identifier}\"`);\r\n            this.pendingOdataRequest.delete(item.hash);\r\n        });\r\n        this.pendingOdataRequest.set(item.hash, promise);\r\n    }\r\n    /**\r\n     * Adds a given @see CacheItem to the @see SessionStorage\r\n     *\r\n     * @param item The item that shall be cached\r\n     */\r\n    async addToCache(item) {\r\n        await this._setItem(item.hash, item);\r\n    }\r\n    /**\r\n     * Checks if a given @see CacheItem is present in the session storage and is not expired\r\n     *\r\n     * @param item The cache item\r\n     * @returns true if the cache item exists and is not expired yet. Otherwise false.\r\n     */\r\n    async getCached(item) {\r\n        const currentTimestamp = new Date().getTime();\r\n        try {\r\n            const value = await this.getItemByKey(item.hash);\r\n            if (value !== null && value !== undefined && value.expireOn !== null) {\r\n                if (value.expireOn > currentTimestamp)\r\n                    return value;\r\n                console.log(`[FrontendCache] Item Expired: \"${item.identifier}\"`);\r\n                await this.storage.delete(item.hash);\r\n                return null;\r\n            }\r\n            return null;\r\n        }\r\n        catch (e) {\r\n            return null;\r\n        }\r\n    }\r\n    async clear() {\r\n        await this.storage.clear();\r\n    }\r\n    /**\r\n     * Gets a value from the session storage with the given @see key\r\n     *\r\n     * @param key The cache key\r\n     * @returns The cached item\r\n     */\r\n    async getItemByKey(key) {\r\n        try {\r\n            const value = await this.storage.get(key);\r\n            return JSON.parse(value);\r\n        }\r\n        catch (e) {\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Adds an item to the session storage\r\n     *\r\n     * @param key The cache item key\r\n     * @param value The item to cache\r\n     */\r\n    async _setItem(key, value) {\r\n        await this.storage.add(key, value);\r\n        console.log(`[FrontendCache] Saved to Cache: \"${value.identifier}\"`);\r\n    }\r\n}\r\nvar cacheWindow = window;\r\ntry {\r\n    // @ts-ignore\r\n    cacheWindow.top.defaultDSSCacheInstance = cacheWindow.top.defaultDSSCacheInstance;\r\n    // @ts-ignore\r\n    cacheWindow = window.top;\r\n}\r\ncatch (error) {\r\n    // swallow\r\n}\r\n// We need an object that is singleton for Ribbon and Form code. That's why we are attaching it to the window object.\r\nif (cacheWindow.defaultDSSCacheInstance === undefined) {\r\n    cacheWindow.defaultDSSCacheInstance = new DefaultCache();\r\n}\r\nconst CacheInstance = cacheWindow.defaultDSSCacheInstance;\n\n/**\r\n * Enum for ODataResponse type\r\n *\r\n */\r\nvar ODataResponseTypes;\r\n(function (ODataResponseTypes) {\r\n    ODataResponseTypes[ODataResponseTypes[\"CreatedEntity\"] = 0] = \"CreatedEntity\";\r\n    ODataResponseTypes[ODataResponseTypes[\"RetrieveEntities\"] = 1] = \"RetrieveEntities\";\r\n    ODataResponseTypes[ODataResponseTypes[\"DeletedEntity\"] = 2] = \"DeletedEntity\";\r\n    ODataResponseTypes[ODataResponseTypes[\"UpdatedEntity\"] = 3] = \"UpdatedEntity\";\r\n    ODataResponseTypes[ODataResponseTypes[\"AssociatedEntity\"] = 4] = \"AssociatedEntity\";\r\n    ODataResponseTypes[ODataResponseTypes[\"DisassociatedEntity\"] = 5] = \"DisassociatedEntity\";\r\n})(ODataResponseTypes || (ODataResponseTypes = {}));\n\nclass ODataQueryResponseMapper {\r\n    _rawResponse;\r\n    _selectAttributes;\r\n    _selectionMode;\r\n    /**\r\n     * Creates a new instance\r\n     *\r\n     * @param rawResponse The raw odata response\r\n     * @param selectAttributes The attributes requested in the query\r\n     * @param selectionMode The selection mode used (SelectSingle|SelectMultiple)\r\n     */\r\n    constructor(rawResponse, selectAttributes, selectionMode) {\r\n        this._rawResponse = rawResponse;\r\n        this._selectAttributes = selectAttributes;\r\n        this._selectionMode = selectionMode;\r\n    }\r\n    /**\r\n     * Maps the response. Works for [SelectSingle|SelectMultiple]\r\n     */\r\n    async getMappedEntity() {\r\n        if (this._selectionMode === ODataQueryBuilderMode.SelectMultiple)\r\n            return this._rawResponse.value.map((args) => this._mapEntity(args));\r\n        return this._mapEntity(this._rawResponse);\r\n    }\r\n    /**\r\n     * Maps a given entity\r\n     *\r\n     * @param entity The odata json response\r\n     */\r\n    _mapEntity(entity) {\r\n        const result = {};\r\n        const localAttributes = this._selectAttributes.filter(a => !a.relation);\r\n        const relationAttributes = this._selectAttributes.filter(a => a.relation);\r\n        const groupedRelations = this._groupRelations(relationAttributes);\r\n        this._mapAttributes(localAttributes, entity, result);\r\n        this._mapRelations(groupedRelations, entity, result);\r\n        return result;\r\n    }\r\n    /**\r\n     * Groups the given relation attributes by the relation name.\r\n     *\r\n     * @param relationAttributes\r\n     */\r\n    _groupRelations(relationAttributes) {\r\n        const groupedRelations = {};\r\n        for (const attr of relationAttributes) {\r\n            if (attr.relation != null) {\r\n                if (!groupedRelations[attr.relation])\r\n                    groupedRelations[attr.relation] = [];\r\n                groupedRelations[attr.relation].push(attr);\r\n            }\r\n        }\r\n        return groupedRelations;\r\n    }\r\n    /**\r\n     * Iterates over the relations and map the using  @see {_mapRelation}\r\n     *\r\n     * @param {Object.<>} groupedRelations The grouped relations returned by @see {_groupRelations}\r\n     * @param {*} entity The json odata response\r\n     * @param {*} result The mapped result object\r\n     */\r\n    _mapRelations(groupedRelations, entity, result) {\r\n        for (const relName in groupedRelations.keys) {\r\n            const attributeList = groupedRelations[relName];\r\n            if (attributeList == null)\r\n                throw `[ODataQueryBuilder._mapRelations] No attributes found for relation ${relName}`;\r\n            this._mapRelation(attributeList, relName, entity, result);\r\n        }\r\n    }\r\n    /**\r\n     * Maps a single relation. Works with [OneToMany|ManyToOne|ManyToMany] relations.\r\n     *\r\n     * @param {} attributeList The attributes to map\r\n     * @param {string} relName The relation name\r\n     * @param {*} entity The odata json response\r\n     * @param {*} result The mapped result object\r\n     */\r\n    _mapRelation(attributeList, relName, entity, result) {\r\n        const sourceValues = entity[relName];\r\n        if (sourceValues instanceof Array)\r\n            this._mapManyToManyRelationship(result, relName, attributeList, sourceValues);\r\n        else\r\n            this._mapOneToManyRelationship(result, relName, attributeList, sourceValues);\r\n    }\r\n    /**\r\n     * Maps a OneToMany relationship\r\n     *\r\n     * @param {*} result The mapped result object\r\n     * @param {string} relName The relation name\r\n     * @param {Array<ODataAttributeBase>} attributeList The attributes to map\r\n     * @param {*} sourceValues The odata values for this relation\r\n     */\r\n    _mapOneToManyRelationship(result, relName, attributeList, sourceValues) {\r\n        result[relName] = {};\r\n        this._mapAttributes(attributeList, sourceValues, result.get(relName));\r\n    }\r\n    /**\r\n     * Maps a ManyToMany relationship\r\n     *\r\n     * @param {*} result The mapped result object\r\n     * @param {string} relName The relation name\r\n     * @param {Array<ODataAttributeBase>} attributeList The attributes to map\r\n     * @param {*} sourceValues The odata values for this relation\r\n     */\r\n    _mapManyToManyRelationship(result, relName, attributeList, sourceValues) {\r\n        const relations = new Array();\r\n        for (const sourceValue of sourceValues) {\r\n            const relation = new Map();\r\n            this._mapAttributes(attributeList, sourceValue, relation);\r\n            relations.push(relation);\r\n        }\r\n        result[relName] = relations;\r\n    }\r\n    /**\r\n     * Maps the given attributes onto the result object\r\n     *\r\n     * @param localAttributes The attributes to map\r\n     * @param entity The odata json response\r\n     * @param result The result object to which the properties will be mapped\r\n     */\r\n    _mapAttributes(localAttributes, entity, result) {\r\n        for (const attribute of localAttributes) {\r\n            const converted = this._convert(attribute, entity);\r\n            if (attribute instanceof PicklistODataAttribute) {\r\n                // We need this block to be backwards compatible!\r\n                // TODO: Remove with next major release\r\n                result[`${attribute.attributeName}_FormattedValue`] = converted.name;\r\n                result[attribute.attributeName] = converted.value;\r\n            }\r\n            else {\r\n                result[attribute.attributeName] = converted;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Converts the given attribute of the odata entity into the target format\r\n     *\r\n     * @param attribute The odata attribute\r\n     * @param entity The odata json entity\r\n     */\r\n    _convert(attribute, entity) {\r\n        const mainAnnotation = attribute.selector;\r\n        if (attribute instanceof LookupODataAttribute ||\r\n            attribute instanceof OwnerODataAttribute ||\r\n            attribute instanceof CustomerODataAttribute)\r\n            return LookupConverter.createAttributeLookupFromODataResponse(entity, mainAnnotation);\r\n        if (attribute instanceof PicklistODataAttribute)\r\n            return PicklistConverter.createAttributeLookupFromODataResponse(entity, mainAnnotation);\r\n        if (attribute instanceof DateTimeODataAttribute)\r\n            return new Date(entity[mainAnnotation]);\r\n        if (entity[mainAnnotation] != null)\r\n            return entity[mainAnnotation];\r\n        return null;\r\n    }\r\n}\n\nclass ODataResponse {\r\n    type;\r\n    headers;\r\n    json;\r\n    /**\r\n     * Creates a new ODataResponse class\r\n     *\r\n     * @param type The odata response type\r\n     * @param headers The odata response headers\r\n     * @param json The json value of the response\r\n     */\r\n    constructor(type, headers, json) {\r\n        this.type = type;\r\n        this.headers = headers;\r\n        this.json = json;\r\n    }\r\n    static async create(type, response) {\r\n        const json = await response.json();\r\n        const headers = response.headers;\r\n        return new ODataResponse(type, headers, json);\r\n    }\r\n    /**\r\n     * Get the fetch response result as json\r\n     *\r\n     * @returns {Promise<Object>} The response json object\r\n     */\r\n    async getJson() {\r\n        return Promise.resolve(this.json);\r\n    }\r\n    /**\r\n     * Get the mapped response entity\r\n     *\r\n     * @param selectAttributes The attributes requested in the query\r\n     * @param selectionMode The selection mode used (SelectSingle|SelectMultiple)\r\n     * @returns The mapped response\r\n     */\r\n    async getMapped(selectAttributes, selectionMode) {\r\n        const json = await this.getJson();\r\n        const mapper = new ODataQueryResponseMapper(json, selectAttributes, selectionMode);\r\n        return await mapper.getMappedEntity();\r\n    }\r\n    /**\r\n     * In case of a CreatedEntity response this will return the id of the entity\r\n     *\r\n     * @returns {string} The guid without \"{\" and \"}\"\r\n     */\r\n    get id() {\r\n        if (this.type !== ODataResponseTypes.CreatedEntity)\r\n            throw new Error(\"The id can only be retrieved for CreatedEntity response!\");\r\n        return this._getEntityIdFromResponseHeader();\r\n    }\r\n    /**\r\n     * Gets the entity id from the response header\r\n     *\r\n     * @param response Odata response\r\n     */\r\n    _getEntityIdFromResponseHeader() {\r\n        const header = this.headers.get(\"OData-EntityId\");\r\n        if (header == null)\r\n            return \"\";\r\n        const regExp = /\\(([^)]+)\\)/;\r\n        const matches = regExp.exec(header);\r\n        if (matches == null)\r\n            return \"\";\r\n        Logger.log(`Created Entity Id: ${matches[1]}`, LogLevel.Information);\r\n        return matches[1];\r\n    }\r\n}\n\nclass ODataError {\r\n    error;\r\n    /**\r\n     * Creates a new ODataError class\r\n     *\r\n     * @param error The error thrown from fetch\r\n     */\r\n    constructor(error) {\r\n        if (error instanceof String)\r\n            this.error = error;\r\n        else {\r\n            this.error = error.message;\r\n        }\r\n    }\r\n}\n\nclass ODataFailure {\r\n    type;\r\n    response;\r\n    /**\r\n     * Creates a new ODataResponse class\r\n     *\r\n     * @param type The odata response type\r\n     * @param response The response from fetch\r\n     */\r\n    constructor(type, response) {\r\n        this.type = type;\r\n        this.response = response;\r\n    }\r\n}\n\nclass CacheItem {\r\n    expireOn;\r\n    result;\r\n    hash;\r\n    identifier;\r\n    /**\r\n     * Creates a CacheItem with the given parameters\r\n     *\r\n     * @param request The fetch request\r\n     * @param expireOn The cache expire time in ms since epoche\r\n     * @param result Tje\r\n     */\r\n    constructor(request, expireOn, result) {\r\n        this.expireOn = expireOn;\r\n        this.result = result;\r\n        this.hash = this._calculateRequestHash(request);\r\n        this.identifier = this._buildIdentifier(request);\r\n    }\r\n    _buildIdentifier(request) {\r\n        if (request.body === null)\r\n            return `HASH: ${this.hash}, URL: ${request.url}`;\r\n        return `HASH: ${this.hash}, URL: \"${request.url}\", Data: \"${request.body}\"`;\r\n    }\r\n    _calculateRequestHash(request) {\r\n        let str = request.url;\r\n        if (request.body !== null)\r\n            str = `${str}||${request.body}`;\r\n        return this._hash(str);\r\n    }\r\n    _hash(value) {\r\n        let hash = 0;\r\n        let i = value.length;\r\n        while (i > 0) {\r\n            hash = (hash << 5) - hash + value.charCodeAt(--i) | 0;\r\n        }\r\n        return hash.toString();\r\n    }\r\n}\n\n// global Request, fetch\r\nclass ODataRequest {\r\n    webApiUrl;\r\n    static ODataApiVersion = \"v9.1\";\r\n    /**\r\n     * Creates a new ODataRequest\r\n     *\r\n     * @param globalContext The Xrm context\r\n     */\r\n    constructor(globalContext) {\r\n        this.webApiUrl = `${globalContext.getClientUrl()}/api/data/${ODataRequest.ODataApiVersion}/`;\r\n    }\r\n    /**\r\n     * Builds a new ODataRequest\r\n     *\r\n     * @param globalContext The Xrm context\r\n     */\r\n    static build(globalContext) {\r\n        return new ODataRequest(globalContext);\r\n    }\r\n    /**\r\n     * Creates an entity\r\n     *\r\n     * @param entity The entity object\r\n     * @param pluralEntitySchemaName The plural entity schema name\r\n     * @param expireOn The cache expire time in ms from epoche\r\n     * @param returnRepresentation If true the created entity will be returned\r\n     * @param returnQuery The query to determine which items to return (starting with \"?\")\r\n     * @returns Returns a promise which resolves to a ODataResponse\r\n     */\r\n    async create(entity, pluralEntitySchemaName, expireOn, returnRepresentation, returnQuery) {\r\n        const jsonEntity = JSON.stringify(entity);\r\n        const command = this.webApiUrl + pluralEntitySchemaName + returnQuery;\r\n        let prefer = \"\";\r\n        if (returnRepresentation)\r\n            prefer = \"return=representation\";\r\n        const headers = new Headers();\r\n        headers.append(\"Content-Type\", \"application/json\");\r\n        headers.append(\"Accept\", \"application/json\");\r\n        headers.append(\"Prefer\", prefer);\r\n        const request = new Request(command, {\r\n            credentials: \"same-origin\",\r\n            method: \"POST\",\r\n            body: jsonEntity,\r\n            headers: headers\r\n        });\r\n        return await this._getCachedResultOrExecuteRequest(request, ODataResponseTypes.CreatedEntity, pluralEntitySchemaName, expireOn);\r\n    }\r\n    /**\r\n     * Retrieves entities\r\n     *\r\n     * @param query The odata query\r\n     * @param expireOn The cache expire time in ms from epoche\r\n     * @returns Returns a promise which resolves to a ODataResponse\r\n     */\r\n    async retrieve(query, expireOn) {\r\n        const command = this.webApiUrl + query;\r\n        const request = new Request(command, {\r\n            method: \"GET\",\r\n            credentials: \"same-origin\",\r\n            headers: new Headers({\r\n                \"Content-Type\": \"application/json\",\r\n                Accept: \"application/json\",\r\n                Prefer: \"odata.include-annotations=\\\"*\\\"\",\r\n            }),\r\n        });\r\n        return await this._getCachedResultOrExecuteRequest(request, ODataResponseTypes.RetrieveEntities, query, expireOn);\r\n    }\r\n    /**\r\n     * Deletes an entity by id\r\n     *\r\n     * @param id The id of the entitiy to delete\r\n     * @param pluralEntitySchemaName The plural entitiy schema name\r\n     * @returns Returns a promise which resolves to a ODataResponse\r\n     */\r\n    async deleteEntity(id, pluralEntitySchemaName) {\r\n        const command = `${this.webApiUrl + pluralEntitySchemaName}(${id})`;\r\n        try {\r\n            const response = await fetch(command, {\r\n                method: \"DELETE\",\r\n                credentials: \"same-origin\",\r\n                headers: new Headers({\r\n                    \"Content-Type\": \"application/json\",\r\n                    Accept: \"application/json\",\r\n                    \"X-HTTP-Method\": \"DELETE\",\r\n                }),\r\n            });\r\n            return await this._processResult(response, ODataResponseTypes.DeletedEntity);\r\n        }\r\n        catch (e) {\r\n            throw new ODataError(e);\r\n        }\r\n    }\r\n    /**\r\n     * Updates an entity\r\n     *\r\n     * @param entity The entity object\r\n     * @param id The id of the entitiy to update\r\n     * @param pluralEntitySchemaName The plural entitiy schema name\r\n     * @returns Returns a promise which resolves to a ODataResponse\r\n     */\r\n    async update(entity, id, pluralEntitySchemaName) {\r\n        const jsonEntity = JSON.stringify(entity);\r\n        const command = `${this.webApiUrl + pluralEntitySchemaName}(${id})`;\r\n        try {\r\n            const response = await fetch(command, {\r\n                method: \"PATCH\",\r\n                credentials: \"same-origin\",\r\n                body: jsonEntity,\r\n                headers: new Headers({\r\n                    \"Content-Type\": \"application/json\",\r\n                    Accept: \"application/json\",\r\n                }),\r\n            });\r\n            return await this._processResult(response, ODataResponseTypes.UpdatedEntity);\r\n        }\r\n        catch (e) {\r\n            throw new ODataError(e);\r\n        }\r\n    }\r\n    /**\r\n     * Associate two entities\r\n     *\r\n     * @param parentId The id of the parent entity\r\n     * @param pluralParentType The plural name of the parent entity\r\n     * @param relationshipName The relationship name\r\n     * @param childId The id of the child entity\r\n     * @param pluralChildType The plural name of the child entity\r\n     * @returns Returns a promise which resolves to a ODataResponse\r\n     */\r\n    async associate(parentId, pluralParentType, relationshipName, childId, pluralChildType) {\r\n        const jsonEntity = JSON.stringify({ \"@odata.id\": `${this.webApiUrl + pluralChildType}(${childId})` });\r\n        const command = `${this.webApiUrl + pluralParentType}(${parentId})/${relationshipName}/$ref`;\r\n        try {\r\n            const response = await fetch(command, {\r\n                method: \"POST\",\r\n                credentials: \"same-origin\",\r\n                body: jsonEntity,\r\n                headers: new Headers({\r\n                    \"Content-Type\": \"application/json\",\r\n                    Accept: \"application/json\",\r\n                }),\r\n            });\r\n            return await this._processResult(response, ODataResponseTypes.AssociatedEntity);\r\n        }\r\n        catch (e) {\r\n            throw new ODataError(e);\r\n        }\r\n    }\r\n    /**\r\n     * Disassociates two entities\r\n     *\r\n     * @param parentId The id of the parent entity\r\n     * @param pluralParentType The plural name of the parent entity\r\n     * @param relationshipName The relationship name\r\n     * @param childId The id of the child entity\r\n     * @returns Returns a promise which resolves to a ODataResponse\r\n     */\r\n    async disassociate(parentId, pluralParentType, relationshipName, childId) {\r\n        const command = `${this.webApiUrl + pluralParentType}(${parentId})/${relationshipName}(${childId})/$ref`;\r\n        try {\r\n            const response = await fetch(command, {\r\n                method: \"DELETE\",\r\n                credentials: \"same-origin\",\r\n                headers: new Headers({\r\n                    \"Content-Type\": \"application/json\",\r\n                    Accept: \"application/json\",\r\n                }),\r\n            });\r\n            return await this._processResult(response, ODataResponseTypes.DisassociatedEntity);\r\n        }\r\n        catch (e) {\r\n            throw new ODataError(e);\r\n        }\r\n    }\r\n    /**\r\n     * Handles a fetch response\r\n     *\r\n     * @param response The fetch response\r\n     * @param type The odata response type\r\n     * @returns The correct odata result\r\n     */\r\n    async _processResult(response, type) {\r\n        if (response.ok)\r\n            return await ODataResponse.create(type, response);\r\n        throw new ODataFailure(type, response);\r\n    }\r\n    /**\r\n     * Executes the given fetch requests and adds the result to the cache if a expireOn value is set\r\n     *\r\n     * @param request The fetch request to execute\r\n     * @param requestType The response type\r\n     * @param identifier An identifier of the request\r\n     * @param expireOn The cache expire time in ms since epoche\r\n     * @returns The OData result\r\n     */\r\n    async _executeRequest(request, requestType, identifier, expireOn) {\r\n        try {\r\n            const result = await fetch(request.url, request);\r\n            const processedResult = await this._processResult(result, requestType);\r\n            if (expireOn != null) {\r\n                const cacheItem = new CacheItem(request, expireOn, processedResult);\r\n                await CacheInstance.addToCache(cacheItem);\r\n                console.log(`[FrontendCache] Saved \"${identifier}\" to cache`);\r\n            }\r\n            return processedResult;\r\n        }\r\n        catch (e) {\r\n            throw new ODataError(e);\r\n        }\r\n    }\r\n    /**\r\n     * Checks if the given request is already cached. If it it the cached result will be returned. Otherwise the request will be executed.\r\n     *\r\n     * @param request The fetch request_executeRequest\r\n     * @param requestType The response type\r\n     * @param identifier An identifier of the request\r\n     * @param expireOn The cache expire time in ms since epoche\r\n     * @returns The OData response\r\n     */\r\n    async _getCachedResultOrExecuteRequest(request, requestType, identifier, expireOn) {\r\n        if (expireOn === undefined)\r\n            return await this._executeRequest(request, requestType, identifier);\r\n        const cacheItem = new CacheItem(request, expireOn);\r\n        if (CacheInstance.hasPendingResponse(cacheItem)) {\r\n            Logger.log(`[FrontendCache] \"${identifier}\" has a pending response. Returning Promise!`, LogLevel.Verbose);\r\n            return await CacheInstance.getPendingResponse(cacheItem);\r\n        }\r\n        const cachedItem = await CacheInstance.getCached(cacheItem);\r\n        if (cachedItem?.result) {\r\n            Logger.log(`[FrontendCache] Serving \"${identifier}\" from cache`, LogLevel.Information);\r\n            return new ODataResponse(cachedItem.result.type, cachedItem.result.headers, cachedItem.result.json);\r\n        }\r\n        return await this._executeRequest(request, requestType, identifier, expireOn);\r\n    }\r\n}\n\nclass ODataQueryParameters {\r\n    selectionMode;\r\n    entityId;\r\n    entity;\r\n    expanders;\r\n    limit;\r\n    primaryAttributes;\r\n    orderByAttributes;\r\n    filters;\r\n    constructor(entity) {\r\n        this.entity = entity;\r\n        this.expanders = new Map();\r\n        this.selectionMode = ODataQueryBuilderMode.Undefined;\r\n        this.limit = 0;\r\n        this.primaryAttributes = [];\r\n        this.orderByAttributes = [];\r\n        this.filters = [];\r\n    }\r\n    isSelectSingle() { return this.selectionMode === ODataQueryBuilderMode.SelectSingle; }\r\n    isSelectMultiple() { return this.selectionMode === ODataQueryBuilderMode.SelectMultiple; }\r\n    hasPrimaryAttributes() { return this.primaryAttributes instanceof Array && this.primaryAttributes.length > 0; }\r\n    hasOrderByAttributes() { return this.orderByAttributes instanceof Array && this.orderByAttributes.length > 0; }\r\n    hasExpanders() { return this.expanders.keys.length > 0; }\r\n    hasFilters() { return this.filters instanceof Array && this.filters.length > 0; }\r\n    hasLimit() { return this.limit !== null && this.limit !== undefined && this.limit !== 0; }\r\n}\n\nclass ODataQueryBuilder {\r\n    _queryParameters;\r\n    _entityInstance;\r\n    /**\r\n     * PRIVATE CONSTRUCTOR! Use \"ODataQueryBuilder.for(entity)\" instead!\r\n     *\r\n     * @private\r\n     * @param entity The primary entity type for the query\r\n     */\r\n    constructor(entity) {\r\n        this._queryParameters = new ODataQueryParameters(entity);\r\n        this._entityInstance = entity;\r\n    }\r\n    /**\r\n     * Executes a RetrieveAll odata call\r\n     *\r\n     * @param globalContext The xrm context\r\n     * @param expireOn \t\tThe cache expire time in ms from epoche\r\n     * @returns The odata result\r\n     */\r\n    async execute(globalContext, expireOn) {\r\n        if (this._queryParameters.selectionMode === ODataQueryBuilderMode.Undefined) {\r\n            this._queryParameters.selectionMode = ODataQueryBuilderMode.SelectMultiple;\r\n        }\r\n        const odataRequest = ODataRequest.build(globalContext);\r\n        const query = this.build();\r\n        const response = await odataRequest.retrieve(query, expireOn);\r\n        return response.getMapped(this._queryParameters.primaryAttributes, this._queryParameters.selectionMode);\r\n    }\r\n    /**\r\n     * Builds and returns the query string\r\n     */\r\n    build() {\r\n        const logic = new ODataQueryBuilderLogic(this._queryParameters);\r\n        return logic.buildQueryString();\r\n    }\r\n    /**\r\n     * Set SelectSingle mode and the entity guid\r\n     *\r\n     * @param guid The id of the entity to retrieve\r\n     */\r\n    selectSingle(guid) {\r\n        this._validateUsage(ODataQueryBuilderMode.SelectSingle);\r\n        this._queryParameters.limit = 0;\r\n        this._queryParameters.entityId = guid;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets the filters for the query\r\n     *\r\n     * @param whereFunction The filters to apply to the query\r\n     * @returns Current query builder instance\r\n     */\r\n    where(whereFunction) {\r\n        const filters = whereFunction(this._entityInstance);\r\n        this._validateUsage(ODataQueryBuilderMode.SelectMultiple);\r\n        this._validateAttributesInput(filters, \"where\");\r\n        this._queryParameters.filters = filters;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets the maximum amount of entities to retrieve\r\n     *\r\n     * @param limit The maximum amount of entities to retrieve\r\n     * @returns Current query builder instance\r\n     */\r\n    take(limit) {\r\n        this._validateUsage(ODataQueryBuilderMode.SelectMultiple);\r\n        this._queryParameters.limit = limit;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets the orderby attributes\r\n     *\r\n     * @param orderFunction The attributes used for ordering\r\n     * @returns Current query builder instance\r\n     */\r\n    orderby(orderFunction) {\r\n        const attributes = orderFunction(this._entityInstance);\r\n        this._validateUsage(ODataQueryBuilderMode.SelectMultiple);\r\n        this._validateAttributesInput(attributes, \"orderby\");\r\n        this._queryParameters.orderByAttributes = attributes;\r\n        return this;\r\n    }\r\n    /**\r\n     * Sets the attributes to retrieve\r\n     *\r\n     * @param selectFunction The attributes to select\r\n     * @returns Current query builder instance\r\n     */\r\n    select(selectFunction) {\r\n        const attributes = selectFunction(this._entityInstance);\r\n        this._validateAttributesInput(attributes, \"select\");\r\n        this._queryParameters.primaryAttributes = attributes;\r\n        return this;\r\n    }\r\n    _validateUsage(selectionMode) {\r\n        if (this._queryParameters.selectionMode === selectionMode)\r\n            return;\r\n        if (this._queryParameters.selectionMode === ODataQueryBuilderMode.Undefined) {\r\n            this._queryParameters.selectionMode = selectionMode;\r\n            return;\r\n        }\r\n        throw \"It is not allowed to mix methods of different operation modes!\";\r\n    }\r\n    _validateAttributesInput(possibleArray, funcName) {\r\n        const arrLength = this._getArrayLength(possibleArray);\r\n        if (arrLength < 1)\r\n            throw `Error while using QueryBuilder: Method '${funcName}()' needs a not empty array as input!`;\r\n        for (const item of possibleArray) {\r\n            if (!this._isAttribute(item) && !this._isFilter(item) && !this._isOrder(item)) {\r\n                throw `Error while using QueryBuilder: The input array of '${funcName}()' does not contain the right type!`;\r\n            }\r\n        }\r\n    }\r\n    _isAttribute(attribute) {\r\n        return attribute instanceof ODataAttributeBase;\r\n    }\r\n    _isFilter(attribute) {\r\n        return attribute instanceof ODataAttributeFilterBase ||\r\n            attribute instanceof FilterValue ||\r\n            attribute instanceof FilterGroup;\r\n    }\r\n    _isOrder(attribute) {\r\n        return attribute instanceof ODataAttributeOrder;\r\n    }\r\n    _getArrayLength(obj) {\r\n        return obj?.length ? obj.length : -1;\r\n    }\r\n    /**\r\n     * Creates a new query builder for a given entity\r\n     *\r\n     * @returns The query builder\r\n     */\r\n    static for(type) {\r\n        return new ODataQueryBuilder(new type());\r\n    }\r\n}\n\nclass ODataCommandResponse {\r\n    commandName;\r\n    parmeter;\r\n    result;\r\n    constructor(commandName, commandParameter, commandResult) {\r\n        this.commandName = commandName;\r\n        this.parmeter = commandParameter;\r\n        this.result = commandResult;\r\n    }\r\n}\n\nclass ODataCommand {\r\n    request;\r\n    constructor(globalContext) {\r\n        this.request = new ODataRequest(globalContext);\r\n    }\r\n    /**\r\n     * Handles the result\r\n     */\r\n    async _handleResult(response) {\r\n        const data = await response.getJson();\r\n        const paramJson = JSON.parse(data.adssf_parameter);\r\n        const resultJson = JSON.parse(data.adssf_result);\r\n        return new ODataCommandResponse(data.adssf_commandname, paramJson, resultJson);\r\n    }\r\n    /**\r\n     * Executes the command and returns the result\r\n     */\r\n    async execute(commandName, parameter, expireOn) {\r\n        const jsonParameter = JSON.stringify(parameter);\r\n        const entity = {\r\n            adssf_commandname: commandName,\r\n            adssf_parameter: jsonParameter,\r\n        };\r\n        const response = await this.request.create(entity, \"adssf_commands\", expireOn, true, \"?$select=adssf_commandname,adssf_parameter,adssf_result\");\r\n        return await this._handleResult(response);\r\n    }\r\n}\n\nclass Expires {\r\n    static inDays(days) {\r\n        return this._getCurrentTimestamp() + days * 24 * 60 * 60 * 1000;\r\n    }\r\n    static inHours(hours) {\r\n        return this._getCurrentTimestamp() + hours * 60 * 60 * 1000;\r\n    }\r\n    static inMinutes(minutes) {\r\n        return this._getCurrentTimestamp() + minutes * 60 * 1000;\r\n    }\r\n    static inSeconds(seconds) {\r\n        return this._getCurrentTimestamp() + seconds * 1000;\r\n    }\r\n    static atMidnight() {\r\n        const cDate = new Date();\r\n        const cDay = cDate.getDate();\r\n        cDate.setHours(0, 0, 0, 0);\r\n        cDate.setDate(cDay + 1);\r\n        return cDate.getTime();\r\n    }\r\n    static _getCurrentTimestamp() {\r\n        return new Date().getTime();\r\n    }\r\n}\n\nclass CachedRibbonRuleEntry {\r\n    _finishedHandler;\r\n    _functionId;\r\n    _isExecuting;\r\n    _result;\r\n    constructor(functionId, resultPromise, finishedHandler) {\r\n        this._finishedHandler = finishedHandler;\r\n        this._functionId = functionId;\r\n        this._isExecuting = true;\r\n        this._result = null;\r\n        resultPromise\r\n            .then(result => this._setResult(result), error => this._setError(error));\r\n    }\r\n    get result() {\r\n        return this._result;\r\n    }\r\n    get isExecuting() {\r\n        return this._isExecuting;\r\n    }\r\n    get functionId() {\r\n        return this._functionId;\r\n    }\r\n    _setError(error) {\r\n        console.error(`[Ribbon] rule \"${this._functionId}\" threw an exception!`, error);\r\n        this._result = false;\r\n        this._isExecuting = false;\r\n        this._finishedHandler();\r\n    }\r\n    _setResult(result) {\r\n        this._result = result;\r\n        this._isExecuting = false;\r\n        this._finishedHandler();\r\n    }\r\n}\n\nclass CachedRibbonRuleExecutor {\r\n    _entries;\r\n    _refreshAllRibbons;\r\n    constructor() {\r\n        /** @type {CachedRibbonRuleEntry[]} */\r\n        this._entries = [];\r\n        this._refreshAllRibbons = false;\r\n    }\r\n    /**\r\n     * Clears all cached enable rules\r\n     */\r\n    clearCache() {\r\n        this._entries = [];\r\n    }\r\n    /**\r\n     * Executes an async Enable Rule and caches the result\r\n     *\r\n     * @param dynamicsContext The dynamics context\r\n     * @param ruleFunction The async enable rule function to execute\r\n     * @param functionId An unique name for the function\r\n     * @param A synchronous pre-condition that determines if the cache should be invalidated. Returning true invalidates the cache.\r\n     * @returns {boolean} the cached result\r\n     */\r\n    executeRule(dynamicsContext, ruleFunction, functionId, precondition = false) {\r\n        if (precondition === true) {\r\n            const entry = this._entries\r\n                .find(e => e.functionId === functionId);\r\n            if (entry) {\r\n                const index = this._entries.indexOf(entry);\r\n                this._entries.splice(index, 1);\r\n            }\r\n        }\r\n        const existingEntryOrNull = this._getExistingEntry(functionId);\r\n        if (existingEntryOrNull) {\r\n            if (existingEntryOrNull.result)\r\n                return existingEntryOrNull.result;\r\n            return false;\r\n        }\r\n        const resultPromise = ruleFunction();\r\n        if (resultPromise && typeof resultPromise.then !== \"function\")\r\n            throw new Error(`The enable rule \"${functionId}\" did not return a Promise!`);\r\n        if (!resultPromise)\r\n            throw new Error(`The enable rule \"${functionId}\" did return a null value!`);\r\n        const entry = this._addEntry(dynamicsContext, functionId, resultPromise);\r\n        if (entry.isExecuting === false)\r\n            return entry.result;\r\n        return false;\r\n    }\r\n    _getExistingEntry(functionId) {\r\n        const matching = this._entries\r\n            .filter(e => e.functionId === functionId);\r\n        if (matching.length > 0)\r\n            return matching[0];\r\n        return null;\r\n    }\r\n    _addEntry(dynamicsContext, functionId, resultPromise) {\r\n        const entry = new CachedRibbonRuleEntry(functionId, resultPromise, () => this._handlePromiseResult(dynamicsContext));\r\n        this._entries.push(entry);\r\n        return entry;\r\n    }\r\n    _handlePromiseResult(dynamicsContext) {\r\n        const pendingEntries = this._entries.filter(e => e.isExecuting);\r\n        if (pendingEntries.length === 0) {\r\n            if (dynamicsContext &&\r\n                dynamicsContext.formContext &&\r\n                dynamicsContext.formContext.ui &&\r\n                dynamicsContext.formContext.ui.refreshRibbon) {\r\n                dynamicsContext.formContext.ui.refreshRibbon(this._refreshAllRibbons);\r\n                // @ts-ignore\r\n            }\r\n            else if (window.top.refreshRibbon) {\r\n                // @ts-ignore\r\n                window.top.refreshRibbon();\r\n            }\r\n            else {\r\n                console.log(\"Unable to refresh ribbon as formContext.ui.refreshRibbon and window.top.refreshRibbon are null!\");\r\n            }\r\n        }\r\n    }\r\n}\n\nclass RibbonContext {\r\n    ribbonType;\r\n    commandId;\r\n    primaryEntityTypeCode;\r\n    primaryEntityTypeName;\r\n    firstPrimaryEntityId;\r\n    selectedEntityTypeCode;\r\n    selectedEntityTypeName;\r\n    selectedEntityIds;\r\n    commandProperties;\r\n    selectedControl;\r\n    primaryControl;\r\n    constructor(ribbonType, commandId, primaryEntityTypeCode, primaryEntityTypeName, firstPrimaryEntityId, selectedEntityTypeCode, selectedEntityTypeName, selectedEntityIds, commandProperties, selectedControl, primaryControl) {\r\n        this.ribbonType = ribbonType;\r\n        this.commandId = commandId;\r\n        this.primaryEntityTypeCode = primaryEntityTypeCode;\r\n        this.primaryEntityTypeName = primaryEntityTypeName;\r\n        this.firstPrimaryEntityId = firstPrimaryEntityId;\r\n        this.selectedEntityTypeCode = selectedEntityTypeCode;\r\n        this.selectedEntityTypeName = selectedEntityTypeName;\r\n        this.selectedEntityIds = selectedEntityIds;\r\n        this.commandProperties = commandProperties;\r\n        this.selectedControl = selectedControl;\r\n        this.primaryControl = primaryControl;\r\n    }\r\n}\n\nclass RibbonContractBase {\r\n    cachedRibbonRuleExecutor;\r\n    _registeredActions;\r\n    _registeredRules;\r\n    constructor() {\r\n        this.cachedRibbonRuleExecutor = new CachedRibbonRuleExecutor();\r\n        this._registeredActions = new Map();\r\n        this._registeredRules = new Map();\r\n    }\r\n    /**\r\n     * Executes a Ribbon Rule\r\n     *\r\n     * @param {RibbonContext} ribbonContext\r\n     * @param {DynamicsContext} dynamicsContext\r\n     * @returns {boolean}\r\n     */\r\n    executeRuleInternal(ribbonContext, dynamicsContext) {\r\n        try {\r\n            const registeredRuleNames = Object.keys(this._registeredRules);\r\n            const commandName = ribbonContext.commandId?.toLowerCase();\r\n            for (const key of registeredRuleNames) {\r\n                if (key.toLowerCase() === commandName) {\r\n                    return this._executeMatchingRule(ribbonContext, dynamicsContext, key);\r\n                }\r\n            }\r\n            Logger.log(`Ribbon: Rule ${ribbonContext.commandId} is not registered!`, LogLevel.Error);\r\n            return false;\r\n        }\r\n        catch (ex) {\r\n            Logger.log(ex, LogLevel.Error);\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Executes a single matching rule\r\n     */\r\n    _executeMatchingRule(ribbonContext, dynamicsContext, key) {\r\n        Logger.log(`[Ribbon] Executing rule \"${ribbonContext.commandId}\"`);\r\n        if (ribbonContext.commandId == null) {\r\n            Logger.log(`[Ribbon] Command id is null. Exiting.\"`);\r\n            return false;\r\n        }\r\n        const rule = this._registeredRules.get(key);\r\n        if (rule == null) {\r\n            Logger.log(`[Ribbon] No rule found for key \"${key}. Returning false.\"`);\r\n            return false;\r\n        }\r\n        const preconditions = rule.precondition !== undefined\r\n            ? rule.precondition(ribbonContext) : undefined;\r\n        if (rule.useCache) {\r\n            const promiseFunction = (() => rule.action(ribbonContext));\r\n            return this.cachedRibbonRuleExecutor\r\n                .executeRule(dynamicsContext, promiseFunction, ribbonContext.commandId, preconditions);\r\n        }\r\n        return /** @type {boolean} */ (rule.action(ribbonContext));\r\n    }\r\n    /**\r\n     * Executes a Ribbon Action\r\n     *\r\n     * @param ribbonContext The ribbon context\r\n     * @returns {*}\r\n     */\r\n    executeActionInternal(ribbonContext) {\r\n        try {\r\n            const registeredActionNames = Object.keys(this._registeredActions);\r\n            const commandName = ribbonContext.commandId?.toLowerCase();\r\n            for (const key of registeredActionNames) {\r\n                if (key.toLowerCase() === commandName) {\r\n                    Logger.log(`[Ribbon] Executing action\"${ribbonContext.commandId}\"`, LogLevel.Verbose);\r\n                    return this._registeredActions.get(key)(ribbonContext);\r\n                }\r\n            }\r\n            Logger.log(`[Ribbon] Action ${ribbonContext.commandId} is not registered!`, LogLevel.Error);\r\n        }\r\n        catch (ex) {\r\n            Logger.log(ex, LogLevel.Error);\r\n        }\r\n    }\r\n}\n\nclass RibbonControllerBase {\r\n    dynamicsContext;\r\n    cachedRibbonRuleExecutor;\r\n    /**\r\n     * Creates a new RibbonControllerBase instance\r\n     *\r\n     * @param dynamicsContext\r\n     * @param cachedRibbonRuleExecutor\r\n     */\r\n    constructor(dynamicsContext, cachedRibbonRuleExecutor) {\r\n        this.dynamicsContext = dynamicsContext;\r\n        this.cachedRibbonRuleExecutor = cachedRibbonRuleExecutor;\r\n    }\r\n}\n\nclass RuleDefinition {\r\n    _useCache = false;\r\n    _preCondition;\r\n    _action;\r\n    get useCache() {\r\n        return this._useCache;\r\n    }\r\n    set useCache(value) {\r\n        this._useCache = value;\r\n    }\r\n    get precondition() {\r\n        return this._preCondition;\r\n    }\r\n    set precondition(value) {\r\n        this._preCondition = value;\r\n    }\r\n    get action() {\r\n        return this._action;\r\n    }\r\n    set action(value) {\r\n        this._action = value;\r\n    }\r\n}\n\nclass ExecutionContextMock {\r\n    _globalContext;\r\n    _formContext;\r\n    constructor(globalContext, formContext) {\r\n        this._globalContext = globalContext;\r\n        this._formContext = formContext;\r\n    }\r\n    getContext() {\r\n        return this._globalContext;\r\n    }\r\n    getFormContext() {\r\n        return this._formContext;\r\n    }\r\n    getDepth() {\r\n        return 0;\r\n    }\r\n    getEventSource() {\r\n        throw new Error(\"Not implemented.\");\r\n    }\r\n    getSharedVariable(key) {\r\n        throw new Error(\"Not implemented.\");\r\n    }\r\n    setSharedVariable(key, value) {\r\n        throw new Error(\"Not implemented.\");\r\n    }\r\n}\n\nclass ItemCollection {\r\n    _array;\r\n    constructor(array) {\r\n        this._array = array;\r\n    }\r\n    get(input) {\r\n        if (input === undefined || input === null)\r\n            return this._array;\r\n        if (typeof input === \"number\")\r\n            return this._array[input];\r\n        if (typeof input === \"string\") {\r\n            let items = this._array.filter((a) => ((typeof a.getName === \"function\") && a.getName() === input)\r\n                || ((typeof a.getKey === \"function\") && a.getKey() === input));\r\n            return items.length > 0 ? items[0] : null;\r\n        }\r\n    }\r\n    forEach(delegate) {\r\n        this._array.forEach(delegate);\r\n    }\r\n    getLength() {\r\n        return this._array.length;\r\n    }\r\n}\n\n/**\r\n * @implements {Xrm.Controls.StandardControl}\r\n * @implements {Xrm.Controls.Control}\r\n * @implements {Xrm.Controls.UiLabelElement}\r\n * @implements {Xrm.Controls.UiCanGetVisibleElement}\r\n * @implements {Xrm.Controls.UiCanSetVisibleElement}\r\n */\r\nclass ControlMock {\r\n    _controlType;\r\n    _name;\r\n    _label;\r\n    _visible;\r\n    _disabled;\r\n    _controlNotifications;\r\n    _notifications;\r\n    attribute;\r\n    parent;\r\n    constructor(attribute) {\r\n        this._controlType = \"standard\";\r\n        this._name = \"test_control\";\r\n        this._label = \"test_control\";\r\n        this._visible = false;\r\n        this._disabled = false;\r\n        this.parent = null;\r\n        this.attribute = attribute;\r\n        this._controlNotifications = [];\r\n        this._notifications = new Map();\r\n    }\r\n    getVisible() {\r\n        return this._visible;\r\n    }\r\n    setVisible(value) {\r\n        this._visible = value;\r\n    }\r\n    setDisabled(value) {\r\n        this._disabled = value;\r\n    }\r\n    getDisabled() {\r\n        return this._disabled;\r\n    }\r\n    getControlType() {\r\n        return this._controlType;\r\n    }\r\n    getName() {\r\n        return this._name;\r\n    }\r\n    getParent() {\r\n        return this.parent;\r\n    }\r\n    getLabel() {\r\n        return this._label;\r\n    }\r\n    setLabel(label) {\r\n        this._label = label;\r\n    }\r\n    addNotification(notification) {\r\n        if (!this._controlNotifications.includes(notification))\r\n            this._controlNotifications.push(notification);\r\n    }\r\n    clearNotification(uniqueId) {\r\n        this._notifications.clear();\r\n        return true;\r\n    }\r\n    setNotification(message, uniqueId) {\r\n        this._notifications.set(uniqueId, message);\r\n        return true;\r\n    }\r\n    setFocus() {\r\n        return;\r\n    }\r\n    getAttribute() {\r\n        return this.attribute;\r\n    }\r\n}\n\nclass AttributeMock {\r\n    _name;\r\n    _attributeFormat;\r\n    _attributeType;\r\n    _isDirty;\r\n    _requiredLevel;\r\n    _submitMode;\r\n    _value;\r\n    _privilege;\r\n    _addPreSearch;\r\n    _isValid;\r\n    _eventHandlers;\r\n    controls;\r\n    constructor(attributeData) {\r\n        const { name = \"no_name\", format = \"text\", initialValue = null, isDirty = false, requiredLevel = \"none\", submitMode = \"dirty\", type = \"string\", isValid = false, controls = [], privilege = {\r\n            canCreate: true,\r\n            canRead: true,\r\n            canUpdate: true,\r\n        }, } = attributeData;\r\n        this._name = name;\r\n        this._attributeFormat = format;\r\n        this._attributeType = type;\r\n        this._isDirty = isDirty;\r\n        this._requiredLevel = requiredLevel;\r\n        this._submitMode = submitMode;\r\n        this._value = initialValue;\r\n        this._privilege = privilege;\r\n        this._isValid = isValid;\r\n        this._eventHandlers = [];\r\n        controls.forEach(c => c.attribute = this);\r\n        this.controls = new ItemCollection(controls);\r\n    }\r\n    addOnChange(handler) {\r\n        if (!this._eventHandlers.includes(handler))\r\n            this._eventHandlers.push(handler);\r\n    }\r\n    removeOnChange(handler) {\r\n        const index = this._eventHandlers.indexOf(handler);\r\n        if (index >= 0)\r\n            this._eventHandlers.slice(index, 1);\r\n    }\r\n    fireOnChange() {\r\n        for (const handler of this._eventHandlers)\r\n            handler(null);\r\n    }\r\n    getAttributeType() {\r\n        return this._attributeType;\r\n    }\r\n    getFormat() {\r\n        return this._attributeFormat;\r\n    }\r\n    getIsDirty() {\r\n        return this._isDirty;\r\n    }\r\n    getName() {\r\n        return this._name;\r\n    }\r\n    getParent() {\r\n        return null;\r\n    }\r\n    getRequiredLevel() {\r\n        return this._requiredLevel;\r\n    }\r\n    getSubmitMode() {\r\n        return this._submitMode;\r\n    }\r\n    getUserPrivilege() {\r\n        return this._privilege;\r\n    }\r\n    setRequiredLevel(requirementLevel) {\r\n        this._requiredLevel = requirementLevel;\r\n    }\r\n    setSubmitMode(submitMode) {\r\n        this._submitMode = submitMode;\r\n    }\r\n    getValue() {\r\n        return this._value;\r\n    }\r\n    setValue(value) {\r\n        if (value !== this._value) {\r\n            this._value = value;\r\n            this._isDirty = true;\r\n            this.fireOnChange();\r\n        }\r\n    }\r\n    addPreSearch() {\r\n        return this._addPreSearch;\r\n    }\r\n    createNewControl() {\r\n        const contr = new ControlMock(this);\r\n        contr.setLabel(`${this._name}_control`);\r\n        this.controls._array.push(contr);\r\n        return contr;\r\n    }\r\n    setIsValid(isValid, message) {\r\n        this._isValid = isValid;\r\n    }\r\n}\n\nclass LookupControlMock extends ControlMock {\r\n    addOnLookupTagClick(handler) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    removeOnLookupTagClick(handler) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    addPreSearch(handler) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    addCustomFilter(filter, entityLogicalName) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    addCustomView(viewId, entityName, viewDisplayName, fetchXml, layoutXml, isDefault) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getDefaultView() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    removePreSearch(handler) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    setDefaultView(viewGuid) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getEntityTypes() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    setEntityTypes(entityLogicalNames) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getAttribute() {\r\n        return this.attribute;\r\n    }\r\n}\n\nclass LookupAttributeMock extends AttributeMock {\r\n    controls;\r\n    constructor(attributeData) {\r\n        super(attributeData);\r\n        this.controls = new ItemCollection([]);\r\n    }\r\n    createNewControl() {\r\n        const contr = new LookupControlMock(this);\r\n        contr.setLabel(`${this.getName()}_control`);\r\n        this.controls._array.push(contr);\r\n        return contr;\r\n    }\r\n    getIsPartyList() {\r\n        return false;\r\n    }\r\n}\n\nclass OptionSetControlMock extends ControlMock {\r\n    addOption(option, index) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    clearOptions() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    removeOption(value) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getAttribute() {\r\n        return this.attribute;\r\n    }\r\n}\n\nclass OptionSetAttributeMock extends AttributeMock {\r\n    _format;\r\n    _initialValue;\r\n    controls;\r\n    options;\r\n    constructor(data) {\r\n        super(data);\r\n        const { initialValue = 0, format = \"language\", } = data;\r\n        this.controls = new ItemCollection([]);\r\n        this.options = [];\r\n        this._initialValue = initialValue;\r\n        this._format = format;\r\n    }\r\n    getInitialValue() {\r\n        return this._initialValue;\r\n    }\r\n    getOption(input) {\r\n        let values;\r\n        if (typeof input === \"number\") {\r\n            values = this.options.filter(o => o.value === input);\r\n        }\r\n        else if (typeof input === \"string\") {\r\n            values = this.options.filter(o => o.text === input);\r\n        }\r\n        return values && values.length && values.length > 0\r\n            ? values[0]\r\n            : null;\r\n    }\r\n    getOptions() {\r\n        return this.options;\r\n    }\r\n    getSelectedOption() {\r\n        return this.getOption(this.getValue());\r\n    }\r\n    getText() {\r\n        const cOption = this.getSelectedOption();\r\n        if (cOption === null)\r\n            return \"\";\r\n        return cOption.text;\r\n    }\r\n    addOnChange(handler) {\r\n        super.addOnChange(handler);\r\n    }\r\n    removeOnChange(handler) {\r\n        super.removeOnChange(handler);\r\n    }\r\n    getFormat() {\r\n        return this._format;\r\n    }\r\n    createNewControl() {\r\n        const contr = new OptionSetControlMock(this);\r\n        contr.setLabel(`${this.getName()}_control`);\r\n        this.controls._array.push(contr);\r\n        return contr;\r\n    }\r\n}\n\nclass FormContextEntityMock {\r\n    _mockData;\r\n    _primaryAttributeName;\r\n    _isDirty;\r\n    _id;\r\n    _logicalName;\r\n    _changeHandlers;\r\n    _postSaveEvents;\r\n    attributes;\r\n    constructor(mockData) {\r\n        this._mockData = mockData;\r\n        this._primaryAttributeName = \"id\";\r\n        this._isDirty = false;\r\n        this._id = Guid.generate();\r\n        this._logicalName = \"account\";\r\n        this._changeHandlers = [];\r\n        this._postSaveEvents = [];\r\n        this.attributes = (new ItemCollection(this._mockData.attributes));\r\n    }\r\n    addOnSave(handler) {\r\n        if (!this._changeHandlers.includes(handler))\r\n            this._changeHandlers.push(handler);\r\n    }\r\n    removeOnSave(handler) {\r\n        const index = this._changeHandlers.indexOf(handler);\r\n        if (index >= 0)\r\n            this._changeHandlers.slice(index, 1);\r\n    }\r\n    addOnPostSave(handler) {\r\n        if (!this._postSaveEvents.includes(handler))\r\n            this._postSaveEvents.push(handler);\r\n    }\r\n    fireOnChange(event) {\r\n        for (const handler of this._changeHandlers) {\r\n            handler(event);\r\n        }\r\n    }\r\n    getDataXml() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getEntityName() {\r\n        return this._logicalName;\r\n    }\r\n    getEntityReference() {\r\n        return {\r\n            id: this._id,\r\n            entityType: this._logicalName,\r\n            name: \"\",\r\n        };\r\n    }\r\n    getId() {\r\n        return this._id;\r\n    }\r\n    getIsDirty() {\r\n        return this._isDirty;\r\n    }\r\n    getPrimaryAttributeValue() {\r\n        return this._primaryAttributeName;\r\n    }\r\n    isValid() {\r\n        return true;\r\n    }\r\n    save(saveMode) {\r\n        this.fireOnChange(null);\r\n    }\r\n}\n\nclass FormContextDataProcessMock {\r\n    _mockData;\r\n    _activeProcess;\r\n    _processInstanceId;\r\n    _activeStage;\r\n    _activePath;\r\n    _selectedStage;\r\n    _onProcessStatusChangeHandlers;\r\n    _onStageChangeHandlers;\r\n    _onStageSelectedHandlers;\r\n    _onPreProcessStatusChangeHandlers;\r\n    _instanceId;\r\n    _status;\r\n    _onPreStageChangeHandlers;\r\n    constructor(mockData) {\r\n        this._mockData = mockData;\r\n        this._onPreStageChangeHandlers = [];\r\n        this._onPreProcessStatusChangeHandlers = [];\r\n        this._onProcessStatusChangeHandlers = [];\r\n        this._onStageChangeHandlers = [];\r\n        this._onStageSelectedHandlers = [];\r\n        this._instanceId = Guid.generate();\r\n    }\r\n    getActiveProcess() {\r\n        return this._activeProcess;\r\n    }\r\n    setActiveProcess(processId, callbackFunction) {\r\n        this._activeProcess = {\r\n            getId() { return processId; },\r\n        };\r\n        if (callbackFunction)\r\n            callbackFunction(\"success\");\r\n    }\r\n    getProcessInstances(callbackFunction) {\r\n        if (callbackFunction)\r\n            callbackFunction(null);\r\n    }\r\n    setActiveProcessInstance(processInstanceId, callbackFunction) {\r\n        this._processInstanceId = processInstanceId;\r\n        if (callbackFunction)\r\n            callbackFunction(\"success\");\r\n    }\r\n    getActiveStage() {\r\n        return this._activeStage;\r\n    }\r\n    setActiveStage(stageId, callbackFunction) {\r\n        this._activeStage = {\r\n            getId() { return stageId; }\r\n        };\r\n        if (callbackFunction)\r\n            callbackFunction(\"success\");\r\n    }\r\n    getActivePath() {\r\n        return this._activePath;\r\n    }\r\n    setActivePath(stages) {\r\n        this._activePath = new ItemCollection(stages);\r\n    }\r\n    getEnabledProcesses(callbackFunction) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getSelectedStage() {\r\n        return this._selectedStage;\r\n    }\r\n    setSelectedStage(stageId, event) {\r\n        this._selectedStage = {\r\n            getId() { return stageId; }\r\n        };\r\n        this.fireOnChangeContextHandlers(this._onStageSelectedHandlers, event);\r\n    }\r\n    addOnPreProcessStatusChange(handler) {\r\n        const index = this._onPreProcessStatusChangeHandlers.indexOf(handler);\r\n        if (index < 0)\r\n            this._onPreProcessStatusChangeHandlers.push(handler);\r\n    }\r\n    addOnPreStageChange(handler) {\r\n        if (!this._onPreStageChangeHandlers.includes(handler))\r\n            this._onPreStageChangeHandlers.push(handler);\r\n    }\r\n    addOnProcessStatusChange(handler) {\r\n        const index = this._onProcessStatusChangeHandlers.indexOf(handler);\r\n        if (index < 0)\r\n            this._onProcessStatusChangeHandlers.push(handler);\r\n    }\r\n    addOnStageChange(handler) {\r\n        const index = this._onStageChangeHandlers.indexOf(handler);\r\n        if (index < 0)\r\n            this._onStageChangeHandlers.push(handler);\r\n    }\r\n    addOnStageSelected(handler) {\r\n        const index = this._onStageSelectedHandlers.indexOf(handler);\r\n        if (index < 0)\r\n            this._onStageSelectedHandlers.push(handler);\r\n    }\r\n    removeOnPreProcessStatusChange(handler) {\r\n        throw new Error(\"Handlers can't be removed here.\");\r\n    }\r\n    removeOnPreStageChange(handler) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    removeOnProcessStatusChange(handler) {\r\n        throw new Error(\"Handlers can't be removed here.\");\r\n    }\r\n    removeOnStageChange(handler) {\r\n        const index = this._onStageChangeHandlers.indexOf(handler);\r\n        if (index >= 0)\r\n            this._onStageChangeHandlers.slice(index, 1);\r\n    }\r\n    removeOnStageSelected(handler) {\r\n        const index = this._onStageSelectedHandlers.indexOf(handler);\r\n        if (index >= 0)\r\n            this._onStageSelectedHandlers.slice(index, 1);\r\n    }\r\n    moveNext(callbackFunction) {\r\n        if (callbackFunction)\r\n            callbackFunction(\"success\");\r\n    }\r\n    movePrevious(callbackFunction) {\r\n        if (callbackFunction)\r\n            callbackFunction(\"success\");\r\n    }\r\n    getInstanceId() {\r\n        return this._instanceId;\r\n    }\r\n    getInstanceName() {\r\n        return \"Test Instance Name\";\r\n    }\r\n    getStatus() {\r\n        return this._status;\r\n    }\r\n    setStatus(status, callbackFunction) {\r\n        this._status = status;\r\n        if (callbackFunction)\r\n            callbackFunction(\"finished\" /* Finished */);\r\n    }\r\n    fireOnChangeContextHandlers(handlers, e) {\r\n        for (const handler of handlers) {\r\n            handler(e);\r\n        }\r\n    }\r\n    fireOnChangeProcessHandlers(handlers, e) {\r\n        for (const handler of handlers) {\r\n            handler(e);\r\n        }\r\n    }\r\n}\n\nclass FormContextDataMock {\r\n    _mockData;\r\n    attributes;\r\n    entity;\r\n    process;\r\n    constructor(mockData) {\r\n        this._mockData = mockData;\r\n        this.attributes = new ItemCollection(this._mockData.attributes);\r\n        this.entity = new FormContextEntityMock(this._mockData);\r\n        this.process = new FormContextDataProcessMock(this._mockData);\r\n    }\r\n    addOnLoad(handler) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getIsDirty() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    isValid() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    removeOnLoad(handler) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    refresh(save) {\r\n        return new Promise(resolve => resolve(undefined));\r\n    }\r\n    save(saveOptions) {\r\n        return new Promise(resolve => resolve(undefined));\r\n    }\r\n}\n\nclass FooterSectionMock {\r\n    isVisible;\r\n    constructor() {\r\n        this.isVisible = true;\r\n    }\r\n    getVisible() {\r\n        return this.isVisible;\r\n    }\r\n    setVisible(bool) {\r\n        this.isVisible = bool;\r\n    }\r\n}\n\nclass HeaderSectionMock {\r\n    isBodyVisible;\r\n    isCommandBarVisible;\r\n    isTabNavigatorVisible;\r\n    constructor() {\r\n        this.isBodyVisible = true;\r\n        this.isCommandBarVisible = true;\r\n        this.isTabNavigatorVisible = true;\r\n    }\r\n    getBodyVisible() {\r\n        return this.isBodyVisible;\r\n    }\r\n    setBodyVisible(bool) {\r\n        this.isBodyVisible = bool;\r\n    }\r\n    getCommandBarVisible() {\r\n        return this.isCommandBarVisible;\r\n    }\r\n    setCommandBarVisible(bool) {\r\n        this.isCommandBarVisible = bool;\r\n    }\r\n    getTabNavigatorVisible() {\r\n        return this.isTabNavigatorVisible;\r\n    }\r\n    setTabNavigatorVisible(bool) {\r\n        this.isTabNavigatorVisible = bool;\r\n    }\r\n}\n\nclass FormContextUIMock {\r\n    _mockData;\r\n    process;\r\n    formSelector;\r\n    navigation;\r\n    quickForms;\r\n    controls;\r\n    tabs;\r\n    formType;\r\n    footerSection;\r\n    headerSection;\r\n    constructor(mockData) {\r\n        this._mockData = mockData;\r\n        this.formType = this._mockData.formType;\r\n        this.formSelector = new FormSelectorMock();\r\n        this.tabs = new ItemCollection(this._mockData.tabs);\r\n        this.controls = new ItemCollection(this._mockData.controls);\r\n        this.footerSection = new FooterSectionMock();\r\n        this.headerSection = new HeaderSectionMock();\r\n    }\r\n    clearFormNotification() {\r\n        return false;\r\n    }\r\n    close() {\r\n    }\r\n    getFormType() {\r\n        return this.formType;\r\n    }\r\n    setFormType(value) {\r\n        this.formType = value;\r\n    }\r\n    getViewPortHeight() {\r\n        return 500;\r\n    }\r\n    getViewPortWidth() {\r\n        return 500;\r\n    }\r\n    refreshRibbon() {\r\n    }\r\n    setFormNotification(message, level, uniqueId) {\r\n        return false;\r\n    }\r\n}\r\nclass FormSelectorMock {\r\n    _currentFormItem;\r\n    constructor() {\r\n        this._currentFormItem = new FormItemMock();\r\n        this.items = new ItemCollection([]);\r\n    }\r\n    getCurrentItem() {\r\n        return this._currentFormItem;\r\n    }\r\n    setCurrentItem(formItem) {\r\n        this._currentFormItem = formItem;\r\n    }\r\n    items;\r\n}\r\nclass FormItemMock {\r\n    setVisible(isVisible) {\r\n    }\r\n    getId() {\r\n        return \"\";\r\n    }\r\n    getLabel() {\r\n        return \"\";\r\n    }\r\n    navigate() {\r\n    }\r\n}\n\nclass FormContextMock {\r\n    _mockData;\r\n    data;\r\n    ui;\r\n    constructor(mockData) {\r\n        this._mockData = mockData;\r\n        this.data = new FormContextDataMock(this._mockData);\r\n        this.ui = new FormContextUIMock(this._mockData);\r\n    }\r\n    getAttribute(input) {\r\n        return this.data.attributes.get(input);\r\n    }\r\n    getControl(input) {\r\n        if (input === undefined || input === null)\r\n            return this._mockData.controls;\r\n        if (typeof input !== \"string\")\r\n            throw new Error(\"Only attribute name allowed\");\r\n        const { controls } = this._mockData;\r\n        for (const cont of controls) {\r\n            if (cont.attribute.controls.get(input)) {\r\n                return cont;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\n\nclass SectionMock {\r\n    controls;\r\n    _name;\r\n    _visible;\r\n    _label;\r\n    parent;\r\n    constructor(sectionData) {\r\n        const { name = \"no_name\", parent = null, controls = [], } = sectionData;\r\n        this.controls = new ItemCollection(controls);\r\n        this._name = name;\r\n        this.parent = parent;\r\n        this.controls.forEach(c => c.parent = this);\r\n    }\r\n    setVisible(visible) {\r\n        this._visible = visible;\r\n    }\r\n    getVisible() {\r\n        return this._visible || false;\r\n    }\r\n    getLabel() {\r\n        return this._label || \"\";\r\n    }\r\n    setLabel(label) {\r\n        this._label = label;\r\n    }\r\n    getName() {\r\n        return this._name;\r\n    }\r\n    getParent() {\r\n        return this.parent;\r\n    }\r\n}\n\nclass TabMock {\r\n    sections;\r\n    _displayState;\r\n    _name;\r\n    _parent;\r\n    _changeHandlers;\r\n    _visible;\r\n    _label;\r\n    constructor(tabData) {\r\n        const { name = \"no_name\", displayState = \"expanded\", parent = null, sections = [], } = tabData;\r\n        this.sections = new ItemCollection(sections);\r\n        this._changeHandlers = new Array();\r\n        this._visible = false;\r\n        this._label = \"\";\r\n        this._displayState = displayState;\r\n        this._name = name;\r\n        this._parent = parent;\r\n        this.sections.forEach(c => c.parent = this);\r\n    }\r\n    addTabStateChange(handler) {\r\n        if (this._changeHandlers.includes(handler))\r\n            this._changeHandlers.push(handler);\r\n    }\r\n    getDisplayState() {\r\n        return this._displayState;\r\n    }\r\n    getName() {\r\n        return this._name;\r\n    }\r\n    getParent() {\r\n        return this._parent;\r\n    }\r\n    removeTabStateChange(handler) {\r\n        const index = this._changeHandlers.indexOf(handler);\r\n        if (index >= 0)\r\n            this._changeHandlers.slice(index, 1);\r\n    }\r\n    setDisplayState(displayState) {\r\n        this._displayState = displayState;\r\n        for (const handler of this._changeHandlers) {\r\n            handler(null);\r\n        }\r\n    }\r\n    setVisible(visible) {\r\n        this._visible = visible;\r\n    }\r\n    getVisible() {\r\n        return this._visible;\r\n    }\r\n    getLabel() {\r\n        return this._label;\r\n    }\r\n    setLabel(label) {\r\n        this._label = label;\r\n    }\r\n    setFocus() {\r\n        return;\r\n    }\r\n}\n\nclass ClientContextMock {\r\n    getClient() {\r\n        return \"Web\";\r\n    }\r\n    getClientState() {\r\n        return \"Online\";\r\n    }\r\n    getFormFactor() {\r\n        return 1 /* Desktop */;\r\n    }\r\n    isOffline() {\r\n        return false;\r\n    }\r\n}\n\nconst Guids = {\r\n    GuidA: FormUtils.normalizeId(Guid.generate()),\r\n    GuidB: FormUtils.normalizeId(Guid.generate()),\r\n    GuidC: FormUtils.normalizeId(Guid.generate()),\r\n    GuidD: FormUtils.normalizeId(Guid.generate()),\r\n    GuidE: FormUtils.normalizeId(Guid.generate()),\r\n    GuidF: FormUtils.normalizeId(Guid.generate()),\r\n};\n\nclass OrganizationSettingsMock {\r\n    baseCurrency;\r\n    baseCurrencyId;\r\n    defaultCountryCode;\r\n    isAutoSaveEnabled;\r\n    languageId;\r\n    organizationId;\r\n    uniqueName;\r\n    useSkypeProtocol;\r\n    organizationGeo;\r\n    constructor() {\r\n        this.baseCurrency = {\r\n            id: Guids.GuidA,\r\n            name: \"\",\r\n            entityType: \"\"\r\n        };\r\n        this.baseCurrencyId = Guid.generate();\r\n        this.defaultCountryCode = \"en\";\r\n        this.isAutoSaveEnabled = true;\r\n        this.languageId = 1033;\r\n        this.organizationId = Guid.generate();\r\n        this.uniqueName = \"UNIQUE NAME\";\r\n        this.useSkypeProtocol = false;\r\n        this.organizationGeo = \"\";\r\n    }\r\n}\n\nclass UserSettingsMock {\r\n    defaultDashboardId;\r\n    isGuidedHelpEnabled;\r\n    isHighContrastEnabled;\r\n    isRTL;\r\n    languageId;\r\n    roles;\r\n    securityRolePrivileges;\r\n    securityRoles;\r\n    transactionCurrency;\r\n    transactionCurrencyId;\r\n    userId;\r\n    userName;\r\n    constructor() {\r\n        this.defaultDashboardId = Guid.generate();\r\n        this.isGuidedHelpEnabled = false;\r\n        this.isHighContrastEnabled = false;\r\n        this.isRTL = false;\r\n        this.languageId = 1033;\r\n        this.roles = new ItemCollection([]);\r\n        this.securityRolePrivileges = [Guid.generate(), Guid.generate()];\r\n        this.securityRoles = [Guid.generate(), Guid.generate()];\r\n        this.transactionCurrency = { id: \"\", name: \"\", entityType: \"\" };\r\n        this.transactionCurrencyId = Guid.generate();\r\n        this.userId = Guid.generate();\r\n        this.userName = \"TEST_USER\";\r\n        this.dateFormattingInfo = {};\r\n    }\r\n    dateFormattingInfo;\r\n    getTimeZoneOffsetMinutes() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\n\n// noinspection JSClosureCompilerSyntax\r\nclass GlobalContextMock {\r\n    client;\r\n    organizationSettings;\r\n    userSettings;\r\n    constructor() {\r\n        this.client = new ClientContextMock();\r\n        this.organizationSettings = new OrganizationSettingsMock();\r\n        this.userSettings = new UserSettingsMock();\r\n    }\r\n    getCurrentAppSetting(settingName) {\r\n        return \"\";\r\n    }\r\n    getAdvancedConfigSetting(setting) {\r\n        return 0;\r\n    }\r\n    getClientUrl() {\r\n        return \"https://unit-test-org.dynamics.com/\";\r\n    }\r\n    getCurrentAppName() {\r\n        return Promise.resolve(\"Test App\");\r\n    }\r\n    getCurrentAppProperties() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getCurrentAppUrl() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getCurrentTheme() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getIsAutoSaveEnabled() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getOrgLcid() {\r\n        return 1033;\r\n    }\r\n    getOrgUniqueName() {\r\n        return \"TestOrgName\";\r\n    }\r\n    getQueryStringParameters() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getTimeZoneOffsetMinutes() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    getUserId() {\r\n        return this.userSettings.userId;\r\n    }\r\n    getUserLcid() {\r\n        return this.userSettings.languageId;\r\n    }\r\n    getUserName() {\r\n        return this.userSettings.userName;\r\n    }\r\n    getUserRoles() {\r\n        return this.userSettings.securityRolePrivileges;\r\n    }\r\n    getVersion() {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n    isOnPremise() {\r\n        return false;\r\n    }\r\n    prependOrgName(sPath) {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n}\n\nclass DynamicsContextMockData {\r\n    attributes;\r\n    controls;\r\n    tabs;\r\n    formType;\r\n    constructor(data) {\r\n        const { attributes = [], controls = [], tabs = [], formType = 2, } = data;\r\n        this.attributes = attributes;\r\n        this.controls = controls;\r\n        this.tabs = tabs;\r\n        this.formType = formType;\r\n    }\r\n    static createFromForm(form) {\r\n        const formInst = new form();\r\n        const keys = Object.keys(formInst);\r\n        const attributes = [];\r\n        const tabs = [];\r\n        const controls = [];\r\n        for (const key of keys) {\r\n            const prop = formInst[key];\r\n            if (prop instanceof FormAttributeBase) {\r\n                const { attr, contr } = createAttributeAndControlMock(prop);\r\n                attributes.push(attr);\r\n                controls.push(contr);\r\n            }\r\n            else if (prop instanceof Tab) {\r\n                tabs.push(createTabMock(prop));\r\n            }\r\n        }\r\n        return new DynamicsContextMockData({\r\n            attributes, tabs, controls,\r\n        });\r\n    }\r\n}\r\nfunction createTabMock(prop) {\r\n    const localSections = [];\r\n    const sectionKeys = Object.keys(prop);\r\n    for (const key of sectionKeys) {\r\n        const section = prop[key];\r\n        if (section instanceof Section) {\r\n            localSections.push(new SectionMock({\r\n                name: section._sectionName,\r\n            }));\r\n        }\r\n    }\r\n    return new TabMock({\r\n        name: prop._tabName,\r\n        sections: localSections,\r\n    });\r\n}\r\nfunction createAttributeAndControlMock(prop) {\r\n    let initialValue = null;\r\n    let attr = null;\r\n    if (prop instanceof BooleanFormAttribute) {\r\n        initialValue = false;\r\n    }\r\n    else if (prop instanceof DecimalFormAttribute\r\n        || prop instanceof DoubleFormAttribute\r\n        || prop instanceof MoneyFormAttribute) {\r\n        initialValue = 0.0;\r\n    }\r\n    else if (prop instanceof StringFormAttribute\r\n        || prop instanceof EntityNameFormAttribute) {\r\n        initialValue = \"\";\r\n    }\r\n    else if (prop instanceof DateTimeFormAttribute) {\r\n        initialValue = new Date();\r\n    }\r\n    else if (prop instanceof IntegerFormAttribute\r\n        || prop instanceof NumberFormAttribute) {\r\n        initialValue = 0;\r\n    }\r\n    else if (prop instanceof LookupAttributeMock\r\n        || prop instanceof UniqueidentifierFormAttribute\r\n        || prop instanceof CustomerFormAttribute\r\n        || prop instanceof OwnerFormAttribute\r\n        || prop instanceof PartyListFormAttribute\r\n        || prop instanceof StateFormAttribute\r\n        || prop instanceof StatusFormAttribute) {\r\n        initialValue = [];\r\n        attr = new LookupAttributeMock({\r\n            name: prop.attributeName,\r\n            value: initialValue\r\n        });\r\n    }\r\n    else if (prop instanceof MemoFormAttribute) {\r\n        initialValue = null;\r\n    }\r\n    else if (prop instanceof PicklistFormAttribute\r\n        || prop instanceof MultiSelectPicklistFormAttribute) {\r\n        initialValue = [];\r\n        attr = new OptionSetAttributeMock({\r\n            name: prop.attributeName,\r\n            value: initialValue\r\n        });\r\n    }\r\n    if (attr === null) {\r\n        attr = new AttributeMock({\r\n            name: prop.attributeName,\r\n            value: initialValue,\r\n        });\r\n    }\r\n    const contr = attr.createNewControl();\r\n    return { attr, contr };\r\n}\n\nclass DynamicsContextMock extends DynamicsContext {\r\n    _mockData;\r\n    constructor(mockData) {\r\n        super();\r\n        this._mockData = mockData || new DynamicsContextMockData({});\r\n        this._globalContext = new GlobalContextMock();\r\n        this._formContext = new FormContextMock(this._mockData);\r\n        this._executionContext = new ExecutionContextMock(this._globalContext, this._formContext);\r\n    }\r\n    static createFromForm(form) {\r\n        const mockData = DynamicsContextMockData.createFromForm(form);\r\n        return new DynamicsContextMock(mockData);\r\n    }\r\n    ;\r\n    get mockData() {\r\n        return this._mockData;\r\n    }\r\n    get executionContext() {\r\n        return this._executionContext;\r\n    }\r\n    get formContext() {\r\n        return this._formContext;\r\n    }\r\n    get globalContext() {\r\n        if (!this._globalContext)\r\n            throw new Error(\"Global Context not available\");\r\n        return this._globalContext;\r\n    }\r\n}\n\nclass FormVerifier {\r\n    _action;\r\n    _assertion;\r\n    constructor(action, assertion) {\r\n        this._action = action;\r\n        this._assertion = assertion;\r\n    }\r\n    execute() {\r\n        return new Promise((resolve, reject) => {\r\n            this._action();\r\n            // setTimeout to defer execution of the _assertion function\r\n            // till the call stack is empty.\r\n            setTimeout(() => {\r\n                try {\r\n                    this._assertion();\r\n                    resolve();\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }, 0);\r\n        });\r\n    }\r\n    /**\r\n     * Executes all the FormVerifiers\r\n     */\r\n    static async executeVerifiers(verifiers) {\r\n        return new Promise((resolve, reject) => {\r\n            // setTimeout to defer execution of the _assertion function\r\n            // till the call stack is empty.\r\n            setTimeout(async () => {\r\n                try {\r\n                    for (const verifier of verifiers) {\r\n                        await verifier.execute();\r\n                    }\r\n                    resolve();\r\n                }\r\n                catch (e) {\r\n                    reject(e);\r\n                }\r\n            }, 0);\r\n        });\r\n    }\r\n}\n\nclass FakeResponse {\r\n    text;\r\n    constructor(text) {\r\n        this.text = text;\r\n    }\r\n}\n\nclass FakeCommandResponse extends FakeResponse {\r\n    _called;\r\n    matcher;\r\n    constructor(commandName, commandResult, commandParameter = {}) {\r\n        const data = {\r\n            adssf_commandname: commandName,\r\n            adssf_parameter: JSON.stringify(commandParameter),\r\n            adssf_result: JSON.stringify(commandResult),\r\n        };\r\n        super(JSON.stringify(data));\r\n        this._called = false;\r\n        this.matcher = (url, opts) => {\r\n            if (!opts.body)\r\n                return false;\r\n            const obj = JSON.parse(opts.body?.toString());\r\n            const matches = obj.adssf_commandname === commandName;\r\n            this._called = this._called || matches;\r\n            return matches;\r\n        };\r\n    }\r\n    gotCalled() {\r\n        return this._called;\r\n    }\r\n}\n\nclass FakeODataResponse extends FakeResponse {\r\n    constructor(data) {\r\n        if (data instanceof Array)\r\n            data = { value: data };\r\n        super(JSON.stringify(data));\r\n    }\r\n}\n\nclass FakeServer {\r\n    fetchMock;\r\n    constructor() {\r\n        this.fetchMock = fetch;\r\n    }\r\n    restore() {\r\n        this.fetchMock.restore();\r\n    }\r\n    registerResponse(matcher, response, options) {\r\n        if (response instanceof FakeResponse)\r\n            response = response.text;\r\n        this.fetchMock.mock(matcher, response, options);\r\n    }\r\n}\n\nfunction resolvePluralNameOrThrow(pluralName) {\r\n    if (typeof pluralName === \"string\") {\r\n        return pluralName;\r\n    }\r\n    throw Error(\"Invalid argument \\\"pluralName\\\". Parameter should be of type string.\");\r\n}\r\nfunction resolvePluralNameOfODataEntityOrThrow(entity) {\r\n    if (!!entity) {\r\n        var entityInstance = new entity();\r\n        if (!!entityInstance.EntitySetName && typeof entityInstance.EntitySetName === \"string\") {\r\n            return entityInstance.EntitySetName;\r\n        }\r\n    }\r\n    throw Error(\"Invalid argument \\\"entity\\\". Parameter should be of type ODataEntity.\");\r\n}\r\nclass OdataRegExBuilder {\r\n    /**\r\n     * Creates an Regex expression that matches a retrieve statement of a single entity\r\n     *\r\n     * @param {ODataEntity} entity The entity object (e.g. Account)\r\n     * @param {string} guid The entity id\r\n     * @returns {RegExp}\r\n     */\r\n    static retrieveSingle(entity, guid) {\r\n        let pluralName = resolvePluralNameOfODataEntityOrThrow(entity);\r\n        if (typeof guid !== \"string\") {\r\n            throw Error(\"Invalid argument \\\"guid\\\"\");\r\n        }\r\n        return new RegExp(`${pluralName}\\\\(${guid}\\\\)`);\r\n    }\r\n    /**\r\n     * Creates an Regex expression that matches a retrieve statement of a single entity\r\n     *\r\n     * @param {string} entity The entity's plural name (e.g. \"accounts\")\r\n     * @param {string} guid The entity id\r\n     * @returns {RegExp}\r\n     */\r\n    static retrieveSingleByResourceName(pluralName, guid) {\r\n        let entityName = resolvePluralNameOrThrow(pluralName);\r\n        if (typeof guid !== \"string\") {\r\n            throw Error(\"Invalid argument \\\"guid\\\"\");\r\n        }\r\n        return new RegExp(`${entityName}\\\\(${guid}\\\\)`);\r\n    }\r\n    /**\r\n    * Creates an Regex expression that matches a retrieve statement of a all records of a specific entity type\r\n    *\r\n    * @param {string|object} entityOrPluralName The entity object (e.g. Account) or plural name (e.g. \"accounts\")\r\n    * @returns {RegExp}\r\n    */\r\n    static retrieveAll(entity) {\r\n        const pluralName = resolvePluralNameOfODataEntityOrThrow(entity);\r\n        return new RegExp(pluralName);\r\n    }\r\n    /**\r\n    * Creates an Regex expression that matches a retrieve statement of a all records of a specific entity type\r\n    *\r\n    * @param {string} resourceName The entity's plural name (e.g. \"accounts\")\r\n    * @returns {RegExp}\r\n    */\r\n    static retrieveAllByResourceName(resourceName) {\r\n        const pluralName = resolvePluralNameOrThrow(resourceName);\r\n        return new RegExp(pluralName);\r\n    }\r\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvQGF2YW5hZGUvYml6YXBwcy1zZGsvZGlzdC9iaXphcHBzLXNkay5lc20uanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsMkNBQTJDLGtCQUFrQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDLHNCQUFzQixFQUFFLE1BQU07QUFDOUIsOEJBQThCO0FBQzlCLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxvREFBb0Qsa0JBQWtCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUJBQWlCO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0QkFBNEI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4QkFBOEI7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsZ0JBQWdCLFFBQVEsUUFBUSxVQUFVLFVBQVU7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdDQUFnQyxpQkFBaUI7QUFDakQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCxVQUFVLElBQUksRUFBRTtBQUNuRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRCQUE0Qjs7QUFFN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsNENBQTRDO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLDBCQUEwQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVEseUJBQXlCLFFBQVEseUJBQXlCLEdBQUc7QUFDcEYsaUJBQWlCLE9BQU8sV0FBVyxRQUFRO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDhCQUE4QjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFlBQVkseUJBQXlCLFlBQVk7QUFDckY7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhDQUE4QztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtRkFBbUYsRUFBRTtBQUNyRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLG9GQUFvRixNQUFNO0FBQzFGO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsdUJBQXVCO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDBCQUEwQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMEJBQTBCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMEJBQTBCLEVBQUUsVUFBVSxFQUFFLCtCQUErQjtBQUN0RztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx3Q0FBd0M7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwwQkFBMEIsRUFBRSxVQUFVO0FBQ3hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBDQUEwQyx5QkFBeUIsR0FBRywrQkFBK0I7QUFDckc7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHlCQUF5QixHQUFHLCtCQUErQjtBQUNuRztBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MseUJBQXlCLEdBQUcsK0JBQStCO0FBQ25HO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CLE1BQU07QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUJBQW1CLGVBQWU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUJBQWlCO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsZUFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixpQkFBaUI7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsTUFBTTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUIsZUFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixpQkFBaUI7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUJBQWlCO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsaUJBQWlCO0FBQ2hEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQixNQUFNO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLGtCQUFrQjtBQUMzRCxtQ0FBbUMsa0JBQWtCO0FBQ3JEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxrQkFBa0I7QUFDckQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0JBQW9CO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNEQUFzRDs7QUFFdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5RUFBeUUsaUJBQWlCO0FBQzFGLDJCQUEyQixnQkFBZ0I7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDJCQUEyQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDJCQUEyQjtBQUNyRCx3QkFBd0IsNEJBQTRCO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMkJBQTJCO0FBQ3JELHdCQUF3QixvREFBb0Q7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyQkFBMkI7QUFDckQsd0JBQXdCLHlEQUF5RDtBQUNqRjtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsU0FBUyxXQUFXLHFCQUFxQjtBQUMzRTtBQUNBLHlEQUF5RCxVQUFVO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwyQkFBMkI7QUFDckQsd0JBQXdCLDBDQUEwQztBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsMkJBQTJCLE9BQU8sNEJBQTRCO0FBQzVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsSUFBSTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsS0FBSztBQUMvRDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELElBQUk7QUFDekQ7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELEtBQUs7QUFDN0Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLGdCQUFnQjtBQUN2RjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQThELGdCQUFnQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELGlCQUFpQjtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdEOztBQUVqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RDtBQUM1RDtBQUNBLGVBQWUsV0FBVyx5REFBeUQ7QUFDbkYsZUFBZSxHQUFHO0FBQ2xCLGVBQWUsR0FBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEZBQTRGLFFBQVE7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGVBQWUsUUFBUTtBQUN2QixlQUFlLEdBQUc7QUFDbEIsZUFBZSxHQUFHO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLEdBQUc7QUFDbEIsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsMkJBQTJCO0FBQzFDLGVBQWUsR0FBRztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxHQUFHO0FBQ2xCLGVBQWUsUUFBUTtBQUN2QixlQUFlLDJCQUEyQjtBQUMxQyxlQUFlLEdBQUc7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix3QkFBd0I7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlCQUFpQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixRQUFRLG1CQUFtQixRQUFRO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDLFdBQVc7QUFDcEQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsVUFBVSxTQUFTLFlBQVk7QUFDM0Qsd0JBQXdCLFVBQVUsVUFBVSxZQUFZLFlBQVksYUFBYTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixJQUFJLElBQUksYUFBYTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDZCQUE2QixZQUFZLDZCQUE2QjtBQUNsRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLHdDQUF3QyxHQUFHLEdBQUc7QUFDekU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsd0NBQXdDLEdBQUcsR0FBRztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGdCQUFnQixpQ0FBaUMsR0FBRyxRQUFRLElBQUk7QUFDNUcsMkJBQTJCLGtDQUFrQyxHQUFHLFNBQVMsSUFBSSxpQkFBaUI7QUFDOUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0NBQWtDLEdBQUcsU0FBUyxJQUFJLGlCQUFpQixHQUFHLFFBQVE7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELFdBQVc7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFdBQVc7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQsV0FBVztBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2Qix5QkFBeUI7QUFDekIsNkJBQTZCO0FBQzdCLDZCQUE2QjtBQUM3QixxQkFBcUI7QUFDckIsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsU0FBUztBQUN0RTtBQUNBO0FBQ0EsNkVBQTZFLFNBQVM7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsaUJBQWlCO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLHlCQUF5QjtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixTQUFTO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdEQUFnRCxXQUFXO0FBQzNEO0FBQ0EsZ0RBQWdELFdBQVc7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGVBQWU7QUFDOUIsZUFBZSxpQkFBaUI7QUFDaEMsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLHlCQUF5QjtBQUNoRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLHdCQUF3QjtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwREFBMEQsSUFBSTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsU0FBUztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNERBQTRELHdCQUF3QjtBQUNwRjtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMseUJBQXlCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCLGdCQUFnQjtBQUNoQixnQkFBZ0I7QUFDaEIsZ0JBQWdCO0FBQ2hCLGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixXQUFXO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixlQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUNBQXlDO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGVBQWU7QUFDekM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLG1CQUFtQjtBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsV0FBVztBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGtEQUFrRDtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLDZFQUE2RTtBQUM3RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQiwyREFBMkQ7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixjQUFjO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUU7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGFBQWE7QUFDNUIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsV0FBVyxLQUFLLEtBQUs7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxRQUFRO0FBQ3ZCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsV0FBVyxLQUFLLEtBQUs7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGVBQWU7QUFDN0IsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLFFBQVE7QUFDdEIsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFbzJFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGF2YW5hZGUvdGVtcGxhdGUvLi9ub2RlX21vZHVsZXMvQGF2YW5hZGUvYml6YXBwcy1zZGsvZGlzdC9iaXphcHBzLXNkay5lc20uanM/N2Y1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBEeW5hbWljc0NvbnRleHQge1xyXG4gICAgX2Zvcm1Db250ZXh0O1xyXG4gICAgX2V4ZWN1dGlvbkNvbnRleHQ7XHJcbiAgICBfZ2xvYmFsQ29udGV4dDtcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1Db250ZXh0LCBleGVjdXRpb25Db250ZXh0LCBnbG9iYWxDb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUNvbnRleHQgPSBmb3JtQ29udGV4dDtcclxuICAgICAgICB0aGlzLl9leGVjdXRpb25Db250ZXh0ID0gZXhlY3V0aW9uQ29udGV4dDtcclxuICAgICAgICB0aGlzLl9nbG9iYWxDb250ZXh0ID0gZ2xvYmFsQ29udGV4dDtcclxuICAgICAgICBpZiAoIXRoaXMuX2dsb2JhbENvbnRleHQpIHtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5Ycm0gJiYgd2luZG93LlhybS5VdGlsaXR5ICYmIHR5cGVvZiB3aW5kb3cuWHJtLlV0aWxpdHkuZ2V0R2xvYmFsQ29udGV4dCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9nbG9iYWxDb250ZXh0ID0gWHJtLlV0aWxpdHkuZ2V0R2xvYmFsQ29udGV4dCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IGV4ZWN1dGlvbkNvbnRleHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGlvbkNvbnRleHQ7XHJcbiAgICB9XHJcbiAgICBnZXQgZm9ybUNvbnRleHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1Db250ZXh0O1xyXG4gICAgfVxyXG4gICAgZ2V0IGdsb2JhbENvbnRleHQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9nbG9iYWxDb250ZXh0KVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHbG9iYWwgY29udGV4dCBkb2VzIG5vdCBleGlzdHNcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dsb2JhbENvbnRleHQ7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgR3VpZCB7XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhIG5ldyByYW5kb20gR1VJRFxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zVGhlIFRoZSBnZW5lcmF0ZWQgR1VJRFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2VuZXJhdGUoKSB7XHJcbiAgICAgICAgbGV0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgbGV0IG1pbGxpc2Vjb25kc1NpbmNlUGFnZUxvYWQgPSAocGVyZm9ybWFuY2UgJiYgcGVyZm9ybWFuY2Uubm93ICYmIChwZXJmb3JtYW5jZS5ub3coKSAqIDEwMDApKSB8fCAwO1xyXG4gICAgICAgIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGMgPT4ge1xyXG4gICAgICAgICAgICBsZXQgciA9IE1hdGgucmFuZG9tKCkgKiAxNjtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnREYXRlID4gMCkgeyAvL1VzZSB0aW1lc3RhbXAgdW50aWwgZGVwbGV0ZWRcclxuICAgICAgICAgICAgICAgIHIgPSAoY3VycmVudERhdGUgKyByKSAlIDE2IHwgMDtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlID0gTWF0aC5mbG9vcihjdXJyZW50RGF0ZSAvIDE2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHIgPSAobWlsbGlzZWNvbmRzU2luY2VQYWdlTG9hZCArIHIpICUgMTYgfCAwO1xyXG4gICAgICAgICAgICAgICAgbWlsbGlzZWNvbmRzU2luY2VQYWdlTG9hZCA9IE1hdGguZmxvb3IobWlsbGlzZWNvbmRzU2luY2VQYWdlTG9hZCAvIDE2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gKGMgPT09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCkpLnRvU3RyaW5nKDE2KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRW5zdXJlcyB0aGF0IHRoZSBndWlkIHN0YXJ0cyB3aXRoIFwie1wiIGFuZCBlbmRzIHdpdGggXCJ9XCJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIEdVSURcclxuICAgICAqIEByZXR1cm5zVGhlIEdVSUQgd2l0aCBicmFjZXNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGVuc3VyZUJyYWNlcyh2YWx1ZSkge1xyXG4gICAgICAgIGlmICghdmFsdWUuc3RhcnRzV2l0aChcIntcIikpXHJcbiAgICAgICAgICAgIHZhbHVlID0gYHske3ZhbHVlfWA7XHJcbiAgICAgICAgaWYgKCF2YWx1ZS5lbmRzV2l0aChcIn1cIikpXHJcbiAgICAgICAgICAgIHZhbHVlICs9IFwifVwiO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRW5zdXJlcyB0aGF0IHRoZSBndWlkIGRvZXMgTk9UIHN0YXJ0cyB3aXRoIFwie1wiIGFuZCBlbmRzIHdpdGggXCJ9XCJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIEdVSURcclxuICAgICAqIEByZXR1cm5zIFRoZSBHVUlEIHdpdGhvdXQgYnJhY2VzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBlbnN1cmVOb0JyYWNlcyh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKFwie1wiLCBcIlwiKS5yZXBsYWNlKFwifVwiLCBcIlwiKTtcclxuICAgIH1cclxufVxuXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVmVyYm9zZVwiXSA9IDBdID0gXCJWZXJib3NlXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkluZm9ybWF0aW9uXCJdID0gMV0gPSBcIkluZm9ybWF0aW9uXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldhcm5pbmdcIl0gPSAyXSA9IFwiV2FybmluZ1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFcnJvclwiXSA9IDNdID0gXCJFcnJvclwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgc3RhdGljIGxvZyhtc2csIGxvZ0xldmVsID0gTG9nTGV2ZWwuVmVyYm9zZSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cuY29uc29sZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZXhlY3V0ZUNvbnNvbGVMb2cobG9nTGV2ZWwsIG1zZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGNvbnNvbGUubG9nKVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobXNnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2V4ZWN1dGVDb25zb2xlTG9nKGxvZ0xldmVsLCBtc2cpIHtcclxuICAgICAgICBzd2l0Y2ggKGxvZ0xldmVsKSB7XHJcbiAgICAgICAgICAgIGNhc2UgTG9nTGV2ZWwuVmVyYm9zZTpcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmRlYnVnKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5JbmZvcm1hdGlvbjpcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmluZm8obXNnKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIExvZ0xldmVsLldhcm5pbmc6XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuY29uc29sZS53YXJuKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBMb2dMZXZlbC5FcnJvcjpcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmVycm9yKG1zZyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5jb25zb2xlLmxvZyhtc2cpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmNsYXNzIE9ic2VydmFibGUge1xyXG4gICAgX2NoYW5nZUhhbmRsZXJzO1xyXG4gICAgX2ludGVybmFsSWQ7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VIYW5kbGVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX2ludGVybmFsSWQgPSBHdWlkLmdlbmVyYXRlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIGV4ZWN1dGVkIG9uIGEgY2hhbmdlIGV2ZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGNoYW5nZVxyXG4gICAgICovXHJcbiAgICByZWdpc3Rlck9uQ2hhbmdlKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlSGFuZGxlcnMucHVzaChjYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlZ2lzdGVycyBhIGNhbGxiYWNrIHRvIGJlIGV4ZWN1dGVkIG9uIGEgY2hhbmdlIGV2ZW50XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIFRoZSBjYWxsYmFjayB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uIGNoYW5nZVxyXG4gICAgICovXHJcbiAgICBhZGRPbkNoYW5nZShjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJPbkNoYW5nZShjYWxsYmFjayk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVucmVnaXN0ZXJlcyBhIGNhbGxiYWNrIGZyb20gcmVjZWl2aW5nIG9uY2hhbmdlIGV2ZW50c1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIHVucmVnaXN0ZXJlZFxyXG4gICAgICovXHJcbiAgICB1bnJlZ2lzdGVyT25DaGFuZ2UoY2FsbGJhY2spIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2NoYW5nZUhhbmRsZXJzLmluZGV4T2YoY2FsbGJhY2spO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKVxyXG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VIYW5kbGVycy5zbGljZShpbmRleCwgMSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVucmVnaXN0ZXJlcyBhIGNhbGxiYWNrIGZyb20gcmVjZWl2aW5nIG9uY2hhbmdlIGV2ZW50c1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIHVucmVnaXN0ZXJlZFxyXG4gICAgICovXHJcbiAgICByZW1vdmVPbkNoYW5nZShjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3Rlck9uQ2hhbmdlKGNhbGxiYWNrKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5yZWdpc3RlcnMgYWxsIGNhbGxiYWNrcyBmcm9tIHJlY2VpdmluZyBvbmNoYW5nZSBldmVudHNcclxuICAgICAqL1xyXG4gICAgY2xlYXJIYW5kbGVycygpIHtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VIYW5kbGVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBOb3RpZmllcyBhbGwgT2JzZXJ2ZXJzIHRoYXQgYSBjaGFuZ2UgZXZlbnQgb2NjdXJyZWRcclxuICAgICAqL1xyXG4gICAgZmlyZU9uQ2hhbmdlKCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiB0aGlzLl9jaGFuZ2VIYW5kbGVycylcclxuICAgICAgICAgICAgaGFuZGxlcih0aGlzKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBUYWIge1xyXG4gICAgX2Zvcm1Db250ZXh0O1xyXG4gICAgX3RhYk5hbWU7XHJcbiAgICBjb25zdHJ1Y3Rvcih0YWJOYW1lLCBmb3JtQ29udGV4dCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm1Db250ZXh0ID0gZm9ybUNvbnRleHQ7XHJcbiAgICAgICAgdGhpcy5fdGFiTmFtZSA9IHRhYk5hbWU7XHJcbiAgICAgICAgdGhpcy5zZWN0aW9ucyA9IHRoaXMuZ2V0VGFiU2FmZSgpPy5zZWN0aW9ucyA/PyBuZXcgSXRlbUNvbGxlY3Rpb24oW10pO1xyXG4gICAgfVxyXG4gICAgZ2V0VGFiKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtQ29udGV4dC51aS50YWJzLmdldCh0aGlzLl90YWJOYW1lKTtcclxuICAgIH1cclxuICAgIGdldFRhYlNhZmUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1Db250ZXh0LnVpLnRhYnMuZ2V0KHRoaXMuX3RhYk5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYWRkVGFiU3RhdGVDaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIHRoaXMuZ2V0VGFiKCkuYWRkVGFiU3RhdGVDaGFuZ2UoaGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBnZXREaXNwbGF5U3RhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGFiKCkuZ2V0RGlzcGxheVN0YXRlKCk7XHJcbiAgICB9XHJcbiAgICBnZXROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRhYigpLmdldE5hbWUoKTtcclxuICAgIH1cclxuICAgIGdldFBhcmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRUYWIoKS5nZXRQYXJlbnQoKTtcclxuICAgIH1cclxuICAgIHJlbW92ZVRhYlN0YXRlQ2hhbmdlKGhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLmdldFRhYigpLnJlbW92ZVRhYlN0YXRlQ2hhbmdlKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgc2V0RGlzcGxheVN0YXRlKGRpc3BsYXlTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuZ2V0VGFiKCkuc2V0RGlzcGxheVN0YXRlKGRpc3BsYXlTdGF0ZSk7XHJcbiAgICB9XHJcbiAgICBzZWN0aW9ucztcclxuICAgIGdldExhYmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRhYigpLmdldExhYmVsKCk7XHJcbiAgICB9XHJcbiAgICBzZXRMYWJlbChsYWJlbCkge1xyXG4gICAgICAgIHRoaXMuZ2V0VGFiKCkuc2V0TGFiZWwobGFiZWwpO1xyXG4gICAgfVxyXG4gICAgc2V0Rm9jdXMoKSB7XHJcbiAgICAgICAgdGhpcy5nZXRUYWIoKS5zZXRGb2N1cygpO1xyXG4gICAgfVxyXG4gICAgc2V0VmlzaWJsZSh2aXNpYmxlKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuX2Zvcm1Db250ZXh0LnVpLnRhYnMuZ2V0KHRoaXMuX3RhYk5hbWUpO1xyXG4gICAgICAgIGlmIChpdGVtICE9IG51bGwpXHJcbiAgICAgICAgICAgIGl0ZW0uc2V0VmlzaWJsZSh2aXNpYmxlKTtcclxuICAgIH1cclxuICAgIGdldFZpc2libGUoKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuX2Zvcm1Db250ZXh0LnVpLnRhYnMuZ2V0KHRoaXMuX3RhYk5hbWUpO1xyXG4gICAgICAgIHJldHVybiBpdGVtICE9IG51bGxcclxuICAgICAgICAgICAgPyBpdGVtLmdldFZpc2libGUoKVxyXG4gICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgc2V0Q29sbGFwc2VkKGlzQ29sbGFwc2VkKSB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuX2Zvcm1Db250ZXh0LnVpLnRhYnMuZ2V0KHRoaXMuX3RhYk5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHN0YXRlID0gaXNDb2xsYXBzZWQgPyBcImNvbGxhcHNlZFwiIDogXCJleHBhbmRlZFwiO1xyXG4gICAgICAgIGlmIChpdGVtICE9IG51bGwpXHJcbiAgICAgICAgICAgIGl0ZW0uc2V0RGlzcGxheVN0YXRlKHN0YXRlKTtcclxuICAgIH1cclxuICAgIGlzQ29sbGFwc2VkKCkge1xyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLl9mb3JtQ29udGV4dC51aS50YWJzLmdldCh0aGlzLl90YWJOYW1lKTtcclxuICAgICAgICByZXR1cm4gaXRlbSAhPSBudWxsXHJcbiAgICAgICAgICAgID8gaXRlbS5nZXREaXNwbGF5U3RhdGUoKSA9PT0gXCJjb2xsYXBzZWRcIlxyXG4gICAgICAgICAgICA6IGZhbHNlO1xyXG4gICAgfVxyXG59XG5cbnZhciBGb3JtVHlwZXM7XHJcbihmdW5jdGlvbiAoRm9ybVR5cGVzKSB7XHJcbiAgICBGb3JtVHlwZXNbRm9ybVR5cGVzW1wiVW5kZWZpbmVkXCJdID0gMF0gPSBcIlVuZGVmaW5lZFwiO1xyXG4gICAgRm9ybVR5cGVzW0Zvcm1UeXBlc1tcIkNyZWF0ZVwiXSA9IDFdID0gXCJDcmVhdGVcIjtcclxuICAgIEZvcm1UeXBlc1tGb3JtVHlwZXNbXCJVcGRhdGVcIl0gPSAyXSA9IFwiVXBkYXRlXCI7XHJcbiAgICBGb3JtVHlwZXNbRm9ybVR5cGVzW1wiUmVhZE9ubHlcIl0gPSAzXSA9IFwiUmVhZE9ubHlcIjtcclxuICAgIEZvcm1UeXBlc1tGb3JtVHlwZXNbXCJEaXNhYmxlZFwiXSA9IDRdID0gXCJEaXNhYmxlZFwiO1xyXG4gICAgRm9ybVR5cGVzW0Zvcm1UeXBlc1tcIkJ1bGtFZGl0XCJdID0gNl0gPSBcIkJ1bGtFZGl0XCI7XHJcbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIFF1aWNrQ3JlYXRlIGhhcyBiZWVuIGRlcHJlY2F0ZWRcclxuICAgICAqL1xyXG4gICAgRm9ybVR5cGVzW0Zvcm1UeXBlc1tcIlF1aWNrQ3JlYXRlXCJdID0gNV0gPSBcIlF1aWNrQ3JlYXRlXCI7XHJcbiAgICAvKipcclxuICAgICAqIEBkZXByZWNhdGVkIFJlYWRPcHRpbWl6ZWQgaGFzIGJlZW4gZGVwcmVjYXRlZC5cclxuICAgICAqL1xyXG4gICAgRm9ybVR5cGVzW0Zvcm1UeXBlc1tcIlJlYWRPcHRpbWl6ZWRcIl0gPSAxMV0gPSBcIlJlYWRPcHRpbWl6ZWRcIjtcclxufSkoRm9ybVR5cGVzIHx8IChGb3JtVHlwZXMgPSB7fSkpO1xyXG5jbGFzcyBGb3JtVXRpbHMge1xyXG4gICAgc3RhdGljIGdldExvb2t1cFN0cmluZ1JlcHJlc2VudGF0aW9uKGxvb2t1cCkge1xyXG4gICAgICAgIGlmIChsb29rdXAgPT0gbnVsbClcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBGb3JtVXRpbHMuZmlyc3RPckRlZmF1bHQobG9va3VwLmdldFZhbHVlKCkpO1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICBjb25zdCBkYXRhID0ge1xyXG4gICAgICAgICAgICBpZDogdmFsdWUuaWQsXHJcbiAgICAgICAgICAgIG5hbWU6IHZhbHVlLm5hbWUsXHJcbiAgICAgICAgICAgIGVudGl0eVR5cGU6IHZhbHVlLmVudGl0eVR5cGUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoZGF0YS5pZCAhPT0gbnVsbCAmJiBkYXRhLmlkICE9PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHJldHVybiBgTG9va3VwKHR5cGU6ICR7ZGF0YS5lbnRpdHlUeXBlfSwgaWQ6ICR7ZGF0YS5pZH0sIG5hbWU6XCIke2RhdGEubmFtZX1cIilgO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGdldExvb2t1cEFycmF5U3RyaW5nUmVwcmVzZW50YXRpb24obG9va3Vwcykge1xyXG4gICAgICAgIGNvbnN0IGxvb2t1cCA9IEZvcm1VdGlscy5maXJzdE9yRGVmYXVsdChsb29rdXBzKTtcclxuICAgICAgICBpZiAobG9va3VwID09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIHJldHVybiBGb3JtVXRpbHMuZ2V0TG9va3VwU3RyaW5nUmVwcmVzZW50YXRpb24obG9va3VwKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXRTdHJpbmdSZXByZXNlbnRhdGlvbihvYmopIHtcclxuICAgICAgICBsZXQgc3RyID0gRm9ybVV0aWxzLmdldExvb2t1cEFycmF5U3RyaW5nUmVwcmVzZW50YXRpb24ob2JqKTtcclxuICAgICAgICBpZiAoc3RyICE9PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gc3RyO1xyXG4gICAgICAgIHN0ciA9IEZvcm1VdGlscy5nZXRMb29rdXBTdHJpbmdSZXByZXNlbnRhdGlvbihvYmopO1xyXG4gICAgICAgIGlmIChzdHIgIT09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybiBzdHI7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0TG9va3VwSWRGcm9tTG9va3VwKGxvb2t1cCkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gbG9va3VwPy5nZXRWYWx1ZSgpO1xyXG4gICAgICAgIGlmICghdmFsdWUpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZVswXS5pZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXRMb29rdXBJZEZyb21Mb29rdXBBcnJheShsb29rdXBBcnJheSkge1xyXG4gICAgICAgIGNvbnN0IGxvb2t1cCA9IEZvcm1VdGlscy5maXJzdE9yRGVmYXVsdChsb29rdXBBcnJheSk7XHJcbiAgICAgICAgaWYgKGxvb2t1cCA9PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gRm9ybVV0aWxzLmdldExvb2t1cElkRnJvbUxvb2t1cChsb29rdXApO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWF0ZUxvb2t1cEFycmF5KGlkLCBlbnRpdHlMb2dpY2FsTmFtZSwgbmFtZSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0ge1xyXG4gICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgZW50aXR5VHlwZTogZW50aXR5TG9naWNhbE5hbWUsXHJcbiAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBpZDogdmFsdWUuaWQsXHJcbiAgICAgICAgICAgIG5hbWU6IHZhbHVlLm5hbWUsXHJcbiAgICAgICAgICAgIGVudGl0eVR5cGU6IHZhbHVlLmVudGl0eVR5cGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZpcnN0T3JEZWZhdWx0KGFycmF5KSB7XHJcbiAgICAgICAgaWYgKGFycmF5ICE9IG51bGwgJiYgYXJyYXkubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5WzBdO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIG5vcm1hbGl6ZUlkKGlkKSB7XHJcbiAgICAgICAgaWYgKGlkICE9IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybiBpZC5yZXBsYWNlKFwie1wiLCBcIlwiKS5yZXBsYWNlKFwifVwiLCBcIlwiKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxufVxuXG5jbGFzcyBTZWN0aW9uIHtcclxuICAgIF9mb3JtQ29udGV4dDtcclxuICAgIF90YWJOYW1lO1xyXG4gICAgX3NlY3Rpb25OYW1lO1xyXG4gICAgY29uc3RydWN0b3IodGFiTmFtZSwgc2VjdGlvbk5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUNvbnRleHQgPSBmb3JtQ29udGV4dDtcclxuICAgICAgICB0aGlzLl90YWJOYW1lID0gdGFiTmFtZTtcclxuICAgICAgICB0aGlzLl9zZWN0aW9uTmFtZSA9IHNlY3Rpb25OYW1lO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSB0aGlzLmdldFNlY3Rpb25TYWZlKCk/LmNvbnRyb2xzID8/IG5ldyBJdGVtQ29sbGVjdGlvbihbXSk7XHJcbiAgICB9XHJcbiAgICBnZXRTZWN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFRhYigpPy5zZWN0aW9ucy5nZXQodGhpcy5fc2VjdGlvbk5hbWUpO1xyXG4gICAgfVxyXG4gICAgZ2V0U2VjdGlvblNhZmUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VGFiKCk/LnNlY3Rpb25zLmdldCh0aGlzLl9zZWN0aW9uTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRUYWIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1Db250ZXh0LnVpLnRhYnMuZ2V0KHRoaXMuX3RhYk5hbWUpO1xyXG4gICAgfVxyXG4gICAgZ2V0TmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRTZWN0aW9uKCkuZ2V0TmFtZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0UGFyZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlY3Rpb24oKS5nZXRQYXJlbnQoKTtcclxuICAgIH1cclxuICAgIGNvbnRyb2xzO1xyXG4gICAgZ2V0TGFiZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U2VjdGlvbigpLmdldExhYmVsKCk7XHJcbiAgICB9XHJcbiAgICBzZXRMYWJlbChsYWJlbCkge1xyXG4gICAgICAgIHRoaXMuZ2V0U2VjdGlvbigpLnNldExhYmVsKGxhYmVsKTtcclxuICAgIH1cclxuICAgIHNldFZpc2libGUodmlzaWJsZSkge1xyXG4gICAgICAgIHRoaXMuZ2V0U2VjdGlvbigpLnNldFZpc2libGUodmlzaWJsZSk7XHJcbiAgICB9XHJcbiAgICBnZXRWaXNpYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldFNlY3Rpb24oKT8uZ2V0VmlzaWJsZSgpID8/IGZhbHNlO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEZvcm1PYmplY3RCYXNlIHtcclxuICAgIF9mb3JtQ29udGV4dDtcclxuICAgIF9vYmplY3RJZDtcclxuICAgIF9mb3JtTmFtZTtcclxuICAgIF9mb3JtU2VsZWN0b3I7XHJcbiAgICBfZm9ybUl0ZW07XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtQ29udGV4dCwgZm9ybU5hbWUpIHtcclxuICAgICAgICB0aGlzLl9mb3JtQ29udGV4dCA9IGZvcm1Db250ZXh0O1xyXG4gICAgICAgIHRoaXMuX2Zvcm1OYW1lID0gZm9ybU5hbWU7XHJcbiAgICAgICAgaWYgKHRoaXMuX2Zvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29iamVjdElkID0gdGhpcy5fZm9ybUNvbnRleHQuZGF0YS5lbnRpdHkuZ2V0SWQoKTtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdGhpcy5fZm9ybUNvbnRleHQudWkuZm9ybVNlbGVjdG9yO1xyXG4gICAgICAgICAgICB0aGlzLl9mb3JtSXRlbSA9IHRoaXMuX2Zvcm1TZWxlY3Rvci5nZXRDdXJyZW50SXRlbSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldFZpc2libGUoaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybUl0ZW0/LnNldFZpc2libGUoaXNWaXNpYmxlKTtcclxuICAgIH1cclxuICAgIGdldElkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtSXRlbT8uZ2V0SWQoKSA/PyBcIlwiO1xyXG4gICAgfVxyXG4gICAgZ2V0TGFiZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1JdGVtPy5nZXRMYWJlbCgpID8/IFwiXCI7XHJcbiAgICB9XHJcbiAgICBuYXZpZ2F0ZSgpIHtcclxuICAgICAgICB0aGlzLl9mb3JtSXRlbT8ubmF2aWdhdGUoKTtcclxuICAgIH1cclxuICAgIGdldCBmb3JtVHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybUNvbnRleHQudWkuZ2V0Rm9ybVR5cGUoKTtcclxuICAgIH1cclxuICAgIGdldCBvYmplY3RJZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb2JqZWN0SWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgZm9ybU5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1OYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IGZvcm1TZWxlY3RvcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVNlbGVjdG9yO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIFJ1bGVCYXNlIHtcclxuICAgIF9ydWxlVHlwZTtcclxuICAgIF9hY3RpdmF0ZU9uID0gbnVsbDtcclxuICAgIF9pbnRlcm5hbElkID0gR3VpZC5nZW5lcmF0ZSgpO1xyXG4gICAgcnVsZVN0b3JlO1xyXG4gICAgZm9ybUNvbnRleHQ7XHJcbiAgICB0YXJnZXRBdHRyaWJ1dGUgPSBudWxsO1xyXG4gICAgZnVuY3Rpb24gPSBudWxsO1xyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlIGNsYXNzIGZvciBhbGwgRmx1ZW50UnVsZXNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZm9ybUNvbnRleHQsIHJ1bGVTdG9yZSwgcnVsZVR5cGUpIHtcclxuICAgICAgICB0aGlzLmZvcm1Db250ZXh0ID0gZm9ybUNvbnRleHQ7XHJcbiAgICAgICAgdGhpcy5ydWxlU3RvcmUgPSBydWxlU3RvcmU7XHJcbiAgICAgICAgdGhpcy5fcnVsZVR5cGUgPSBydWxlVHlwZTtcclxuICAgICAgICB0aGlzLnJ1bGVTdG9yZS5yZWdpc3RlclJ1bGUodGhpcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgd2hldGhlciB0aGUgcnVsZSBpcyBhY3RpdmUgZm9yIHRoZSBjdXJyZW50IGZvcm0gdHlwZVxyXG4gICAgICovXHJcbiAgICBnZXQgaXNBY3RpdmUoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybVR5cGUgPSB0aGlzLmZvcm1Db250ZXh0LnVpLmdldEZvcm1UeXBlKCk7XHJcbiAgICAgICAgaWYgKGZvcm1UeXBlID09PSBGb3JtVHlwZXMuQnVsa0VkaXQpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyBhY3RpdmF0ZSBvbiBub3Qgc2V0IC0+IGFjdGl2YXRlIG9uIGFsbCB0eXBlc1xyXG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmF0ZU9uID09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hY3RpdmF0ZU9uLmluY2x1ZGVzKGZvcm1UeXBlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgcnVsZSdzIG5hbWVcclxuICAgICAqL1xyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRhcmdldEF0dHJpYnV0ZSlcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0QXR0cmlidXRlLmF0dHJpYnV0ZU5hbWU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNwZWNpZmllcyBvbmUgb3IgbW9yZSBmb3JtIHR5cGVzIG9uIHdoaWNoIHRoaXMgcnVsZSBzaG91bGQgYmUgZXhlY3V0ZWQuXHJcbiAgICAgKiBCeSBkZWZhdWx0IChpZiB0aGlzIG1ldGhvZCBpcyBub3QgY2FsbGVkKSB0aGUgcnVsZSB3aWxsIGJlIGFjdGl2YXRlZCBvbiBhbGwgZm9ybSB0eXBlc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmb3JtVHlwZXMgVGhlIGZvcm0gdHlwZXMgb24gd2hpY2ggdGhlIHJ1bGUgc2hvdWxkIGJlIGFjdGl2YXRlZFxyXG4gICAgICovXHJcbiAgICBmb3JGb3JtVHlwZSguLi5mb3JtVHlwZXMpIHtcclxuICAgICAgICB0aGlzLl9hY3RpdmF0ZU9uID0gZm9ybVR5cGVzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBFeGVjdXRlcyB0aGUgcnVsZSBmdW5jdGlvbiBhbmQgcmV0dXJucyB0aGUgcmVzdWx0XHJcbiAgICAgKi9cclxuICAgIGV4ZWN1dGVGdW5jdGlvbigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5mdW5jdGlvbilcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZ1bmN0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEV4Y2VwdGlvbiBvY2N1cnJlZCBpbiAke3RoaXMubmFtZX06ICR7ZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgVHJpZ2dlcmFibGVSdWxlQmFzZSBleHRlbmRzIFJ1bGVCYXNlIHtcclxuICAgIHRyaWdnZXJzID0gW107XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgVHJpZ2dlcmFibGVSdWxlQmFzZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtQ29udGV4dCwgcnVsZVN0b3JlLCBydWxlVHlwZSkge1xyXG4gICAgICAgIHN1cGVyKGZvcm1Db250ZXh0LCBydWxlU3RvcmUsIHJ1bGVUeXBlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBhdHRyaWJ1dGVzIG9yIG1vZGVscyB0aGF0IHRyaWdnZXIgdGhpcyBydWxlXHJcbiAgICAgKi9cclxuICAgIHRyaWdnZXJlZGJ5KC4uLnRyaWdnZXJzKSB7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VycyA9IHRyaWdnZXJzO1xyXG4gICAgICAgIGZvciAoY29uc3QgdHJpZ2dlciBvZiB0aGlzLnRyaWdnZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUNoYW5nZUhhbmRsZXIgPSAoKSA9PiB7IHRoaXMuZXhlY3V0ZSgpOyB9O1xyXG4gICAgICAgICAgICB0aGlzLnJ1bGVTdG9yZS5yZWdpc3RlcmVkQ2hhbmdlSGFuZGxlcnMuc2V0KHRyaWdnZXIsIGF0dHJpYnV0ZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0cmlnZ2VyLnJlZ2lzdGVyT25DaGFuZ2UoYXR0cmlidXRlQ2hhbmdlSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBFeGVjdXRlIHRoZSBydWxlIHdoZW4gdGhlIGZvcm0gaXMgbG9hZGVkXHJcbiAgICAgKi9cclxuICAgIG9uTG9hZCgpIHtcclxuICAgICAgICB0aGlzLnJ1bGVTdG9yZS5vbkxvYWRBY3RpdmF0aW9ucy5wdXNoKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBFeGVjdXRlIHRoZSBydWxlIHdoZW4gdGhlIGZvcm0gaXMgc2F2ZWRcclxuICAgICAqL1xyXG4gICAgb25TYXZlKCkge1xyXG4gICAgICAgIHRoaXMucnVsZVN0b3JlLm9uU2F2ZUFjdGl2YXRpb25zLnB1c2godGhpcyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cblxudmFyIFJ1bGVUeXBlO1xyXG4oZnVuY3Rpb24gKFJ1bGVUeXBlKSB7XHJcbiAgICBSdWxlVHlwZVtcIkVuYWJsZVJ1bGVcIl0gPSBcIkVuYWJsZVJ1bGVcIjtcclxuICAgIFJ1bGVUeXBlW1wiUmVxdWlyZVJ1bGVcIl0gPSBcIlJlcXVpcmVSdWxlXCI7XHJcbiAgICBSdWxlVHlwZVtcIk5vdGlmaWNhdGlvblJ1bGVcIl0gPSBcIk5vdGlmaWNhdGlvblJ1bGVcIjtcclxuICAgIFJ1bGVUeXBlW1wiRGlzcGFseVJ1bGVcIl0gPSBcIkRpc3BhbHlSdWxlXCI7XHJcbiAgICBSdWxlVHlwZVtcIlRhYkNvbGxhcHNlZFJ1bGVcIl0gPSBcIlRhYkNvbGxhcHNlZFJ1bGVcIjtcclxuICAgIFJ1bGVUeXBlW1wiVmFsdWVSdWxlXCJdID0gXCJWYWx1ZVJ1bGVcIjtcclxuICAgIFJ1bGVUeXBlW1wiU3Vic2NyaWJlUnVsZVwiXSA9IFwiU3Vic2NyaWJlUnVsZVwiO1xyXG4gICAgUnVsZVR5cGVbXCJPblNhdmVSdWxlXCJdID0gXCJPblNhdmVSdWxlXCI7XHJcbiAgICBSdWxlVHlwZVtcIkZpbHRlclJ1bGVcIl0gPSBcIkZpbHRlclJ1bGVcIjtcclxufSkoUnVsZVR5cGUgfHwgKFJ1bGVUeXBlID0ge30pKTtcblxuY2xhc3MgVmFsdWVSdWxlIGV4dGVuZHMgVHJpZ2dlcmFibGVSdWxlQmFzZSB7XHJcbiAgICBfdGFyZ2V0VmFsdWVBdHRyaWJ1dGU7XHJcbiAgICBfY2FuU2V0TnVsbDtcclxuICAgIF9hbGxvd092ZXJ3cml0ZTtcclxuICAgIF9leGVjdXRlRmlyZU9uQ2hhbmdlO1xyXG4gICAgX3NhdmVJZlJlYWRvbmx5O1xyXG4gICAgX292ZXJ3cml0ZVNhbWVWYWx1ZTtcclxuICAgIF9hY3RpdmF0ZUFsd2F5cztcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1Db250ZXh0LCBydWxlU3RvcmUpIHtcclxuICAgICAgICBzdXBlcihmb3JtQ29udGV4dCwgcnVsZVN0b3JlLCBSdWxlVHlwZS5WYWx1ZVJ1bGUpO1xyXG4gICAgICAgIHRoaXMuX2NhblNldE51bGwgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2FsbG93T3ZlcndyaXRlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9leGVjdXRlRmlyZU9uQ2hhbmdlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fc2F2ZUlmUmVhZG9ubHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX292ZXJ3cml0ZVNhbWVWYWx1ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2FjdGl2YXRlQWx3YXlzID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFByZXZlbnRzIHRoZSBjYWxjdWxhdGVkIHZhbHVlIHRvIHJlcGxhY2UgdGhlIGV4aXN0aW5nIG9uZVxyXG4gICAgICovXHJcbiAgICBub092ZXJ3cml0ZSgpIHtcclxuICAgICAgICB0aGlzLl9hbGxvd092ZXJ3cml0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVyd3JpdGUgdGhlIGF0dHJpYnV0ZXMgdmFsdWUgZXZlbiBpZiBpdHMgdGhlIHNhbWUgYXMgdGhlIGN1cnJlbnQgdmFsdWVcclxuICAgICAqL1xyXG4gICAgb3ZlcndyaXRlU2FtZVZhbHVlKCkge1xyXG4gICAgICAgIHRoaXMuX292ZXJ3cml0ZVNhbWVWYWx1ZSA9IHRydWU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFsbG93cyB0aGUgY2FsY3VsYXRlZCB2YWx1ZSB0byBiZSBudWxsXHJcbiAgICAgKi9cclxuICAgIG5vRGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuX2NhblNldE51bGwgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGVsbHMgdGhlIFZhbHVlUnVsZSB0byBhbHdheXMgc2V0IHRoZSB2YWx1ZSBldmVuIHdoZW4gdGhlIGZvcm0gaXMgXCJEaXNhYmxlZFwiIG9yIFwiUmVhZE9ubHlcIlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtWYWx1ZVJ1bGV9XHJcbiAgICAgKi9cclxuICAgIGFjdGl2YXRlQWx3YXlzKCkge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2YXRlQWx3YXlzID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3BlY2lmaWVzIHRoZSBmdW5jdGlvbiB3aGljaCByZXR1cm5zIHRoZSBjYWxjdWFsdGVkIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIHJldHVybnMoZnVuYykge1xyXG4gICAgICAgIHRoaXMuZnVuY3Rpb24gPSBmdW5jO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSB0YXJnZXQgYXR0cmlidXRlXHJcbiAgICAgKi9cclxuICAgIGZvcih0YXJnZXQpIHtcclxuICAgICAgICB0aGlzLl90YXJnZXRWYWx1ZUF0dHJpYnV0ZSA9IHRhcmdldDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBhdHRyaWJ1dGVzIG9yIG1vZGVscyB0aGF0IHRyaWdnZXIgdGhpcyBydWxlXHJcbiAgICAgKi9cclxuICAgIHRyaWdnZXJlZGJ5KC4uLnRyaWdnZXJzKSB7XHJcbiAgICAgICAgc3VwZXIudHJpZ2dlcmVkYnkoLi4udHJpZ2dlcnMpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTcGVjaWZpZXMgb25lIG9yIG1vcmUgZm9ybSB0eXBlcyBvbiB3aGljaCB0aGlzIHJ1bGUgc2hvdWxkIGJlIGV4ZWN1dGVkLlxyXG4gICAgICogQnkgZGVmYXVsdCAoaWYgdGhpcyBtZXRob2QgaXMgbm90IGNhbGxlZCkgdGhlIHJ1bGUgd2lsbCBiZSBhY3RpdmF0ZWQgb24gYWxsIGZvcm0gdHlwZXNcclxuICAgICAqL1xyXG4gICAgZm9yRm9ybVR5cGUoLi4uZm9ybVR5cGVzKSB7XHJcbiAgICAgICAgc3VwZXIuZm9yRm9ybVR5cGUoLi4uZm9ybVR5cGVzKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRXhlY3V0ZXMgYSBmaXJlT25DaGFuZ2UgYWZ0ZXIgc2V0dGluZ3MgdGhlIHZhbHVlXHJcbiAgICAgKi9cclxuICAgIGRvRmlyZU9uQ2hhbmdlKCkge1xyXG4gICAgICAgIHRoaXMuX2V4ZWN1dGVGaXJlT25DaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQcmV2ZW50cyBzZXR0aW5nIGEgdmFsdWUgb24gYSBkaXNzYWJsZWQgYXR0cmlidXRlXHJcbiAgICAgKi9cclxuICAgIGRvTm90U2F2ZVdoZW5EaXNhYmxlZCgpIHtcclxuICAgICAgICB0aGlzLl9zYXZlSWZSZWFkb25seSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgX2hhbmRsZVZhbHVlKHZhbHVlVG9TZXQpIHtcclxuICAgICAgICBjb25zdCBzaG91bGRTZXQgPSB0aGlzLl9zaG91bGRTZXRUaGF0VmFsdWUodmFsdWVUb1NldCk7XHJcbiAgICAgICAgaWYgKCFzaG91bGRTZXQpXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLl9hY3RpdmF0ZUFsd2F5cykge1xyXG4gICAgICAgICAgICB0aGlzLl90YXJnZXRWYWx1ZUF0dHJpYnV0ZS5zZXRWYWx1ZUludGVybmFsSWdub3JlTG9ja2VkRm9ybSh2YWx1ZVRvU2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3RhcmdldFZhbHVlQXR0cmlidXRlLnNldFZhbHVlKHZhbHVlVG9TZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fZXhlY3V0ZUZpcmVPbkNoYW5nZSlcclxuICAgICAgICAgICAgdGhpcy5fdGFyZ2V0VmFsdWVBdHRyaWJ1dGUuZmlyZU9uQ2hhbmdlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRWYWx1ZUF0dHJpYnV0ZS5nZXREaXNhYmxlZCgpICYmIHRoaXMuX3NhdmVJZlJlYWRvbmx5KVxyXG4gICAgICAgICAgICB0aGlzLl90YXJnZXRWYWx1ZUF0dHJpYnV0ZS5zdWJtaXRWYWx1ZShcImRpcnR5XCIpO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlVG9TZXRPclByb21pc2UgPSB0aGlzLmV4ZWN1dGVGdW5jdGlvbigpO1xyXG4gICAgICAgIGlmICh2YWx1ZVRvU2V0T3JQcm9taXNlICYmIHR5cGVvZiB2YWx1ZVRvU2V0T3JQcm9taXNlLnRoZW4gPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVUb1NldE9yUHJvbWlzZS50aGVuKCh2YWx1ZSkgPT4gdGhpcy5faGFuZGxlVmFsdWUodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVZhbHVlKHZhbHVlVG9TZXRPclByb21pc2UpO1xyXG4gICAgfVxyXG4gICAgX2FjdGl2YXRlRGVmYXVsdExvYWRCZWhhdmlvdXIoKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbGluZ0Zvcm1UeXBlID0gdGhpcy5mb3JtQ29udGV4dC51aS5nZXRGb3JtVHlwZSgpO1xyXG4gICAgICAgIGNvbnN0IGlzQ3JlYXRlRm9ybSA9IGNhbGxpbmdGb3JtVHlwZSA9PT0gRm9ybVR5cGVzLkNyZWF0ZTtcclxuICAgICAgICBjb25zdCBpc1VwZGF0ZUZvcm0gPSBjYWxsaW5nRm9ybVR5cGUgPT09IEZvcm1UeXBlcy5VcGRhdGU7XHJcbiAgICAgICAgY29uc3QgaXNEaXNiYWxlZEZvcm0gPSBjYWxsaW5nRm9ybVR5cGUgPT09IEZvcm1UeXBlcy5EaXNhYmxlZDtcclxuICAgICAgICBpZiAoY2FsbGluZ0Zvcm1UeXBlID4gRm9ybVR5cGVzLlVwZGF0ZSAmJiBjYWxsaW5nRm9ybVR5cGUgIT09IEZvcm1UeXBlcy5EaXNhYmxlZClcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICghaXNDcmVhdGVGb3JtICYmICFpc1VwZGF0ZUZvcm0gJiYgIWlzRGlzYmFsZWRGb3JtKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gaWYgdGhlIGRvY3VtZW50IGlzIG5vdCByZWFkeSAocnVsZSAoY2FzY2FkaW5nbHkpIHRyaWdnZXJlcmQgb25sb2FkKSwgb25seSBleGVjdXRlIG9uIGNyZWF0ZSBmb3JtXHJcbiAgICAgICAgcmV0dXJuIGlzQ3JlYXRlRm9ybTtcclxuICAgIH1cclxuICAgIF9zaG91bGRTZXRUaGF0VmFsdWUobmV3VmFsdWUpIHtcclxuICAgICAgICBjb25zdCBjdXJyZW50VmFsdWUgPSB0aGlzLl90YXJnZXRWYWx1ZUF0dHJpYnV0ZS5nZXRWYWx1ZSgpO1xyXG4gICAgICAgIC8vIFByZXZlbnQgU2V0dGluZyBvZiBOVUxMIHZhbHVlc1xyXG4gICAgICAgIGlmICgobmV3VmFsdWUgPT09IHVuZGVmaW5lZCB8fCBuZXdWYWx1ZSA9PT0gbnVsbCkgJiYgIXRoaXMuX2NhblNldE51bGwpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyBQcmV2ZW50IE92ZXJ3cml0ZSBvZiBub3QgTlVMTCBjdXJyZW50IHZhbHVlc1xyXG4gICAgICAgIGlmIChjdXJyZW50VmFsdWUgIT0gbnVsbCAmJiAhdGhpcy5fYWxsb3dPdmVyd3JpdGUpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyBQcmV2ZW50IHNldHRpbmcgb2YgdGhlIHNhbWUgdmFsdWVcclxuICAgICAgICBpZiAoY3VycmVudFZhbHVlID09PSBuZXdWYWx1ZSAmJiAhdGhpcy5fb3ZlcndyaXRlU2FtZVZhbHVlKVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEEgRGlzcGxheVJ1bGUgaXMgdXNlZCB0byBjb25kaXRpb25hbGx5IGhpZGUgYSBmaWVsZCBvbiBhIGdpdmVuIEZvcm1cclxuICovXHJcbmNsYXNzIERpc3BsYXlSdWxlIGV4dGVuZHMgVHJpZ2dlcmFibGVSdWxlQmFzZSB7XHJcbiAgICBfdGFyZ2V0QXR0cmlidXRlcyA9IFtdO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IERpc3BsYXkgUnVsZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtQ29udGV4dCwgcnVsZVN0b3JlKSB7XHJcbiAgICAgICAgc3VwZXIoZm9ybUNvbnRleHQsIHJ1bGVTdG9yZSwgUnVsZVR5cGUuRGlzcGFseVJ1bGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJucyhmdW5jKSB7XHJcbiAgICAgICAgdGhpcy5mdW5jdGlvbiA9IGZ1bmM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICogU2V0IHRoZSBhdHRyaWJ1dGVzIHRoYXQgZW5hYmxlZC9kaXNhYmxlZCBvbiB0aGUgZm9ybVxyXG4gICAgKi9cclxuICAgIGZvciguLi50YXJnZXRzKSB7XHJcbiAgICAgICAgdGhpcy5fdGFyZ2V0QXR0cmlidXRlcyA9IHRhcmdldHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZXhlY3V0ZUZ1bmN0aW9uKCk7XHJcbiAgICAgICAgZm9yIChjb25zdCB0YXJnZXRBdHRyaWJ1dGUgb2YgdGhpcy5fdGFyZ2V0QXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICB0YXJnZXRBdHRyaWJ1dGUuc2V0VmlzaWJsZShyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQW4gRW5hYmxlUnVsZSBpcyB1c2VkIHRvIGNvbmRpdGlvbmFsbHkgZGlzYWJsZSBzcGVjaWZpYyBmaWVsZCBvbiBhIGdpdmVuIEZvcm1cclxuICovXHJcbmNsYXNzIEVuYWJsZVJ1bGUgZXh0ZW5kcyBUcmlnZ2VyYWJsZVJ1bGVCYXNlIHtcclxuICAgIF90YXJnZXRBdHRyaWJ1dGVzID0gW107XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgRW5hYmxlUnVsZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtQ29udGV4dCwgcnVsZVN0b3JlKSB7XHJcbiAgICAgICAgc3VwZXIoZm9ybUNvbnRleHQsIHJ1bGVTdG9yZSwgUnVsZVR5cGUuRW5hYmxlUnVsZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm5zKGZ1bmMpIHtcclxuICAgICAgICB0aGlzLmZ1bmN0aW9uID0gZnVuYztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgKiBTZXQgdGhlIGF0dHJpYnV0ZXMgdGhhdCBlbmFibGVkL2Rpc2FibGVkIG9uIHRoZSBmb3JtXHJcbiAgICAqL1xyXG4gICAgZm9yKC4uLnRhcmdldHMpIHtcclxuICAgICAgICB0aGlzLl90YXJnZXRBdHRyaWJ1dGVzID0gdGFyZ2V0cztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3Qgc2hvdWxkQmVFbmFibGVkID0gdGhpcy5leGVjdXRlRnVuY3Rpb24oKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHRhcmdldEF0dHJpYnV0ZSBvZiB0aGlzLl90YXJnZXRBdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIHRhcmdldEF0dHJpYnV0ZS5zZXREaXNhYmxlZCghc2hvdWxkQmVFbmFibGVkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRmlsdGVyUnVsZSBleHRlbmRzIFRyaWdnZXJhYmxlUnVsZUJhc2Uge1xyXG4gICAgX2N1cnJlbnRQcmVTZWFyY2hIYW5kbGVyID0gbnVsbDtcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1Db250ZXh0LCBydWxlU3RvcmUpIHtcclxuICAgICAgICBzdXBlcihmb3JtQ29udGV4dCwgcnVsZVN0b3JlLCBSdWxlVHlwZS5GaWx0ZXJSdWxlKTtcclxuICAgIH1cclxuICAgIGZvcih0YXJnZXQpIHtcclxuICAgICAgICB0aGlzLnRhcmdldEF0dHJpYnV0ZSA9IHRhcmdldDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgRmV0Y2hYTUwgRmlsdGVyIGZ1bmN0aW9uXHJcbiAgICAgKi9cclxuICAgIGZpbHRlcihmaWx0ZXJGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuZnVuY3Rpb24gPSBmaWx0ZXJGdW5jdGlvbjtcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQWN0aXZlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgZmV0Y2hYTUwgPSB0aGlzLmV4ZWN1dGVGdW5jdGlvbigpO1xyXG4gICAgICAgIGlmIChmZXRjaFhNTCA9PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKCF0aGlzLnRhcmdldEF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVGhlIHRhcmdldCBhdHRyaWJ1dGUgaGFzIG5vdCBiZWVuIHNldC5cIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY29udHJvbCA9IHRoaXMudGFyZ2V0QXR0cmlidXRlLmNvbnRyb2woKTtcclxuICAgICAgICBpZiAoY29udHJvbCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY3VycmVudFByZVNlYXJjaEhhbmRsZXIgIT0gbnVsbClcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wucmVtb3ZlUHJlU2VhcmNoKHRoaXMuX2N1cnJlbnRQcmVTZWFyY2hIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFByZVNlYXJjaEhhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sLmFkZEN1c3RvbUZpbHRlcihmZXRjaFhNTCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnRyb2wuYWRkUHJlU2VhcmNoKHRoaXMuX2N1cnJlbnRQcmVTZWFyY2hIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRm9ybUF0dHJpYnV0ZUJhc2UgZXh0ZW5kcyBPYnNlcnZhYmxlIHtcclxuICAgIF9mb3JtQ29udGV4dDtcclxuICAgIGF0dHJpYnV0ZU5hbWU7XHJcbiAgICBjb25zdHJ1Y3RvcihhdHRyaWJ1dGVOYW1lLCBmb3JtQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fZm9ybUNvbnRleHQgPSBmb3JtQ29udGV4dDtcclxuICAgICAgICB0aGlzLmF0dHJpYnV0ZU5hbWUgPSBhdHRyaWJ1dGVOYW1lO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSB0aGlzLmdldEF0dHJpYnV0ZVNhZmUoKT8uY29udHJvbHMgPz8gbmV3IEl0ZW1Db2xsZWN0aW9uKFtdKTtcclxuICAgIH1cclxuICAgIGdldEF0dHJpYnV0ZVR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCkuZ2V0QXR0cmlidXRlVHlwZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0Rm9ybWF0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgpLmdldEZvcm1hdCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0SXNEaXJ0eSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoKS5nZXRJc0RpcnR5KCk7XHJcbiAgICB9XHJcbiAgICBnZXROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgpLmdldE5hbWUoKTtcclxuICAgIH1cclxuICAgIGdldFBhcmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoKS5nZXRQYXJlbnQoKTtcclxuICAgIH1cclxuICAgIGdldFN1Ym1pdE1vZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCkuZ2V0U3VibWl0TW9kZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0VXNlclByaXZpbGVnZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoKS5nZXRVc2VyUHJpdmlsZWdlKCk7XHJcbiAgICB9XHJcbiAgICBzZXRTdWJtaXRNb2RlKHN1Ym1pdE1vZGUpIHtcclxuICAgICAgICB0aGlzLmdldEF0dHJpYnV0ZSgpLnNldFN1Ym1pdE1vZGUoc3VibWl0TW9kZSk7XHJcbiAgICB9XHJcbiAgICBjb250cm9scztcclxuICAgIGdldFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgpLmdldFZhbHVlKCk7XHJcbiAgICB9XHJcbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZ2V0QXR0cmlidXRlKCkuc2V0VmFsdWUodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZ2V0QXR0cmlidXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtQ29udGV4dC5nZXRBdHRyaWJ1dGUodGhpcy5hdHRyaWJ1dGVOYW1lKTtcclxuICAgIH1cclxuICAgIGdldEF0dHJpYnV0ZVNhZmUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1Db250ZXh0LmdldEF0dHJpYnV0ZSh0aGlzLmF0dHJpYnV0ZU5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29udHJvbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybUNvbnRleHQuZ2V0Q29udHJvbCh0aGlzLmF0dHJpYnV0ZU5hbWUpO1xyXG4gICAgfVxyXG4gICAgaXNDcmVhdGVGb3JtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtQ29udGV4dC51aS5nZXRGb3JtVHlwZSgpID09PSAxO1xyXG4gICAgfVxyXG4gICAgaXNVcGRhdGVGb3JtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtQ29udGV4dC51aS5nZXRGb3JtVHlwZSgpID09PSAyO1xyXG4gICAgfVxyXG4gICAgaXNSZWFkT25seUZvcm0oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1Db250ZXh0LnVpLmdldEZvcm1UeXBlKCkgPT09IDM7XHJcbiAgICB9XHJcbiAgICBpc0Rpc2FibGVkRm9ybSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybUNvbnRleHQudWkuZ2V0Rm9ybVR5cGUoKSA9PT0gNDtcclxuICAgIH1cclxuICAgIGlzRWRpdGFibGVGb3JtKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQ3JlYXRlRm9ybSB8fCB0aGlzLmlzVXBkYXRlRm9ybTtcclxuICAgIH1cclxuICAgIGlzTG9ja2VkRm9ybSgpIHtcclxuICAgICAgICByZXR1cm4gIXRoaXMuaXNFZGl0YWJsZUZvcm07XHJcbiAgICB9XHJcbiAgICByZWdpc3Rlck9uQ2hhbmdlKGhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLmFkZE9uQ2hhbmdlKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgYWRkT25DaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIHRoaXMuZ2V0QXR0cmlidXRlKCkuYWRkT25DaGFuZ2UoaGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICByZW1vdmVPbkNoYW5nZShoYW5kbGVyKSB7XHJcbiAgICAgICAgdGhpcy5nZXRBdHRyaWJ1dGUoKS5yZW1vdmVPbkNoYW5nZShoYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGZpcmVPbkNoYW5nZSgpIHtcclxuICAgICAgICB0aGlzLmdldEF0dHJpYnV0ZSgpLmZpcmVPbkNoYW5nZSgpO1xyXG4gICAgfVxyXG4gICAgc2V0RGlzYWJsZWQoZGlzYWJsZSkge1xyXG4gICAgICAgIGlmICghZGlzYWJsZSAmJiB0aGlzLmlzTG9ja2VkRm9ybSgpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlQ29udHJvbHMgPSB0aGlzLmdldEF0dHJpYnV0ZSgpLmNvbnRyb2xzO1xyXG4gICAgICAgIGF0dHJpYnV0ZUNvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChcInNldERpc2FibGVkXCIgaW4gY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5zZXREaXNhYmxlZChkaXNhYmxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0RGlzYWJsZWQoKSB7XHJcbiAgICAgICAgbGV0IGRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVDb250cm9scyA9IHRoaXMuZ2V0QXR0cmlidXRlKCkuY29udHJvbHM7XHJcbiAgICAgICAgYXR0cmlidXRlQ29udHJvbHMuZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICAgICAgaWYgKFwiZ2V0RGlzYWJsZWRcIiBpbiBjb250cm9sKSB7XHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlZCA9IGRpc2FibGVkICYmIGNvbnRyb2wuZ2V0RGlzYWJsZWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkaXNhYmxlZDtcclxuICAgIH1cclxuICAgIGdldFZpc2libGUoKSB7XHJcbiAgICAgICAgY29uc3QgZm9ybUF0dHJpYnV0ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKCk7XHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlQ29udHJvbHMgPSBmb3JtQXR0cmlidXRlLmNvbnRyb2xzO1xyXG4gICAgICAgIGxldCB2aXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICBhdHRyaWJ1dGVDb250cm9scy5mb3JFYWNoKGNvbnRyb2wgPT4geyB2aXNpYmxlID0gdmlzaWJsZSAmJiBjb250cm9sLmdldFZpc2libGUoKTsgfSk7XHJcbiAgICAgICAgcmV0dXJuIHZpc2libGU7XHJcbiAgICB9XHJcbiAgICBzZXRWaXNpYmxlKHZpc2libGUpIHtcclxuICAgICAgICBjb25zdCBmb3JtQXR0cmlidXRlID0gdGhpcy5nZXRBdHRyaWJ1dGUoKTtcclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVDb250cm9scyA9IGZvcm1BdHRyaWJ1dGUuY29udHJvbHM7XHJcbiAgICAgICAgYXR0cmlidXRlQ29udHJvbHMuZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICAgICAgaWYgKFwic2V0VmlzaWJsZVwiIGluIGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2wuc2V0VmlzaWJsZSh2aXNpYmxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc2V0VmFsdWVJbnRlcm5hbCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTG9ja2VkRm9ybSgpKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoKS5zZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBzZXRWYWx1ZUludGVybmFsSWdub3JlTG9ja2VkRm9ybSh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgpLnNldFZhbHVlKHZhbHVlKTtcclxuICAgIH1cclxuICAgIHNldFZhbHVlSWdub3JlTG9ja2VkRm9ybSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWVJbnRlcm5hbElnbm9yZUxvY2tlZEZvcm0odmFsdWUpO1xyXG4gICAgfVxyXG4gICAgc2V0UmVxdWlyZWRMZXZlbChyZXF1aXJlZExldmVsKSB7XHJcbiAgICAgICAgdGhpcy5nZXRBdHRyaWJ1dGUoKS5zZXRSZXF1aXJlZExldmVsKHJlcXVpcmVkTGV2ZWwpO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVxdWlyZWRMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoKS5nZXRSZXF1aXJlZExldmVsKCk7XHJcbiAgICB9XHJcbiAgICBnZXRMYWJlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb250cm9sKCkuZ2V0TGFiZWwoKTtcclxuICAgIH1cclxuICAgIHNldExhYmVsKGxhYmVsKSB7XHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlQ29udHJvbHMgPSB0aGlzLmdldEF0dHJpYnV0ZSgpLmNvbnRyb2xzO1xyXG4gICAgICAgIGF0dHJpYnV0ZUNvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiB7IGNvbnRyb2wuc2V0TGFiZWwobGFiZWwpOyB9KTtcclxuICAgIH1cclxuICAgIHN1Ym1pdFZhbHVlKHN1Ym1pdCkge1xyXG4gICAgICAgIHRoaXMuZ2V0QXR0cmlidXRlKCkuc2V0U3VibWl0TW9kZShzdWJtaXQpO1xyXG4gICAgfVxyXG4gICAgc2V0Tm90aWZpY2F0aW9uKG1lc3NhZ2UsIHVuaXF1ZUlkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNMb2NrZWRGb3JtKCkpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVDb250cm9scyA9IHRoaXMuZ2V0QXR0cmlidXRlKCkuY29udHJvbHM7XHJcbiAgICAgICAgYXR0cmlidXRlQ29udHJvbHMuZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICAgICAgaWYgKFwic2V0Tm90aWZpY2F0aW9uXCIgaW4gY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5zZXROb3RpZmljYXRpb24obWVzc2FnZSwgdW5pcXVlSWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhck5vdGlmaWNhdGlvbih1bmlxdWVJZCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzTG9ja2VkRm9ybSgpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlQ29udHJvbHMgPSB0aGlzLmdldEF0dHJpYnV0ZSgpLmNvbnRyb2xzO1xyXG4gICAgICAgIGF0dHJpYnV0ZUNvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChcImNsZWFyTm90aWZpY2F0aW9uXCIgaW4gY29udHJvbCkge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbC5jbGVhck5vdGlmaWNhdGlvbih1bmlxdWVJZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGZvckVhY2hDb250cm9sKGZ1bmMpIHtcclxuICAgICAgICB0aGlzLmdldEF0dHJpYnV0ZSgpLmNvbnRyb2xzLmZvckVhY2goZnVuYyk7XHJcbiAgICB9XHJcbiAgICBzZXRJc1ZhbGlkKGlzVmFsaWQsIG1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLmdldEF0dHJpYnV0ZSgpLnNldElzVmFsaWQoaXNWYWxpZCwgbWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgU3RyaW5nRm9ybUF0dHJpYnV0ZSBleHRlbmRzIEZvcm1BdHRyaWJ1dGVCYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpPy5jb250cm9scztcclxuICAgIH1cclxuICAgIF9nZXRUeXBlZEF0dHJpYnV0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVTYWZlKCk7XHJcbiAgICB9XHJcbiAgICBjb250cm9scztcclxuICAgIGdldEZvcm1hdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRGb3JtYXQoKTtcclxuICAgIH1cclxuICAgIGdldE1heExlbmd0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRNYXhMZW5ndGgoKTtcclxuICAgIH1cclxuICAgIHNldElzVmFsaWQoaXNWYWxpZCwgbWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuX2dldFR5cGVkQXR0cmlidXRlKCkuc2V0SXNWYWxpZChpc1ZhbGlkLCBtZXNzYWdlKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBNZW1vRm9ybUF0dHJpYnV0ZSBleHRlbmRzIFN0cmluZ0Zvcm1BdHRyaWJ1dGUge1xyXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihhdHRyaWJ1dGVOYW1lLCBmb3JtQ29udGV4dCk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgTnVtYmVyRm9ybUF0dHJpYnV0ZSBleHRlbmRzIEZvcm1BdHRyaWJ1dGVCYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpPy5jb250cm9scztcclxuICAgIH1cclxuICAgIF9nZXRUeXBlZEF0dHJpYnV0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVTYWZlKCk7XHJcbiAgICB9XHJcbiAgICBjb250cm9scztcclxuICAgIGdldEZvcm1hdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRGb3JtYXQoKTtcclxuICAgIH1cclxuICAgIGdldE1heCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRNYXgoKTtcclxuICAgIH1cclxuICAgIGdldE1pbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRNaW4oKTtcclxuICAgIH1cclxuICAgIGdldFByZWNpc2lvbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRQcmVjaXNpb24oKTtcclxuICAgIH1cclxuICAgIHNldFByZWNpc2lvbihwcmVjaXNpb24pIHtcclxuICAgICAgICB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpLnNldFByZWNpc2lvbihwcmVjaXNpb24pO1xyXG4gICAgfVxyXG4gICAgc2V0SXNWYWxpZChpc1ZhbGlkLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5zZXRJc1ZhbGlkKGlzVmFsaWQsIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIE1vbmV5Rm9ybUF0dHJpYnV0ZSBleHRlbmRzIE51bWJlckZvcm1BdHRyaWJ1dGUge1xyXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihhdHRyaWJ1dGVOYW1lLCBmb3JtQ29udGV4dCk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgTG9va3VwRm9ybUF0dHJpYnV0ZSBleHRlbmRzIEZvcm1BdHRyaWJ1dGVCYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpPy5jb250cm9scztcclxuICAgIH1cclxuICAgIF9nZXRUeXBlZEF0dHJpYnV0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVTYWZlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEJ1aWxkcyB0aGUgY29ycmVjdCBsb29rdXAgYXJyYXkgYmFzZWQgb24gYSB2YXJpZXR5IGlucHV0IHBhcmFtZXRlciB0eXBlc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfHtpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmd9fEFycmF5PHtpZDogc3RyaW5nLCBuYW1lOiBzdHJpbmd9Pn0gdmFsdWVcclxuICAgICAqIEByZXR1cm5zIHtBcnJheTx7aWQ6IHN0cmluZ30+fG51bGx9IFRoZSBsb29rdXAgYXJyYXlcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGJ1aWxkTG9va3VwQXJyYXkodmFsdWUpIHtcclxuICAgICAgICBsZXQgbG9va3VwVmFsdWU7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICBsb29rdXBWYWx1ZSA9IFt7IGlkOiBHdWlkLmVuc3VyZUJyYWNlcyh2YWx1ZSkgfV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiBcImlkXCIgaW4gdmFsdWUgJiYgdmFsdWUuaWQpIHtcclxuICAgICAgICAgICAgbG9va3VwVmFsdWUgPSBbdmFsdWVdO1xyXG4gICAgICAgICAgICBsb29rdXBWYWx1ZVswXS5pZCA9IEd1aWQuZW5zdXJlQnJhY2VzKHZhbHVlLmlkKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXkgJiYgdmFsdWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBsb29rdXBWYWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAobG9va3VwVmFsdWUgIT0gbnVsbCAmJiBsb29rdXBWYWx1ZVswXSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgbG9va3VwVmFsdWVbMF0uaWQgPSBHdWlkLmVuc3VyZUJyYWNlcyhsb29rdXBWYWx1ZVswXS5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFyZ3VtZW50IFR5cGUgXFxcInZhbHVlXFxcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxvb2t1cFZhbHVlO1xyXG4gICAgfVxyXG4gICAgY29udHJvbHM7XHJcbiAgICBnZXRWYWx1ZSgpIHtcclxuICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpLmdldFZhbHVlKCk7XHJcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdmFsdWVbMF07XHJcbiAgICB9XHJcbiAgICBnZXRMb29rdXBJZCgpIHtcclxuICAgICAgICBjb25zdCByYXdWYWx1ZSA9IHRoaXMuX2dldFR5cGVkQXR0cmlidXRlKCkuZ2V0VmFsdWUoKTtcclxuICAgICAgICBpZiAocmF3VmFsdWUgPT0gbnVsbCB8fCByYXdWYWx1ZS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByYXdWYWx1ZVswXS5pZDtcclxuICAgIH1cclxuICAgIGdldExvb2t1cE5hbWUoKSB7XHJcbiAgICAgICAgY29uc3QgcmF3VmFsdWUgPSB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpLmdldFZhbHVlKCk7XHJcbiAgICAgICAgaWYgKHJhd1ZhbHVlID09IG51bGwgfHwgcmF3VmFsdWUubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByYXdWYWx1ZVswXS5uYW1lO1xyXG4gICAgfVxyXG4gICAgc2V0VmFsdWUodmFsdWUpIHtcclxuICAgICAgICBjb25zdCBsb29rdXBBcnJheSA9ICF2YWx1ZVxyXG4gICAgICAgICAgICA/IG51bGxcclxuICAgICAgICAgICAgOiBMb29rdXBGb3JtQXR0cmlidXRlLmJ1aWxkTG9va3VwQXJyYXkodmFsdWUpO1xyXG4gICAgICAgIHRoaXMuc2V0VmFsdWVJbnRlcm5hbChsb29rdXBBcnJheSk7XHJcbiAgICB9XHJcbiAgICBnZXRJc1BhcnR5TGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRJc1BhcnR5TGlzdCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBsb29rdXAgdmFsdWUuIEEgdmFyaWV0eSBvZiBwYXJhbWV0ZXIgdHlwZXMgaXMgc3VwcG9ydGVkLiBJZ25vcmVzIGxvY2tlZCBmb3JtLlxyXG4gICAgICovXHJcbiAgICBzZXRWYWx1ZUlnbm9yZUxvY2tlZEZvcm0odmFsdWUpIHtcclxuICAgICAgICBjb25zdCBsb29rdXBBcnJheSA9IExvb2t1cEZvcm1BdHRyaWJ1dGUuYnVpbGRMb29rdXBBcnJheSh2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5zZXRWYWx1ZUludGVybmFsSWdub3JlTG9ja2VkRm9ybShsb29rdXBBcnJheSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHR5cGVzIG9mIGVudGl0aWVzIGFsbG93ZWQgaW4gdGhlIGxvb2t1cCBjb250cm9sLlxyXG4gICAgICovXHJcbiAgICBzZXRFbnRpdHlUeXBlcyhsb2dpY2FsTmFtZXMpIHtcclxuICAgICAgICB0aGlzLmNvbnRyb2woKS5zZXRFbnRpdHlUeXBlcyhsb2dpY2FsTmFtZXMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIHRoZSB0eXBlcyBvZiBlbnRpdGllcyBhbGxvd2VkIGluIHRoZSBsb29rdXAgY29udHJvbC5cclxuICAgICAqL1xyXG4gICAgZ2V0RW50aXR5VHlwZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udHJvbCgpLmdldEVudGl0eVR5cGVzKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYW4gYWRkaXRpb25hbCBjdXN0b20gZmlsdGVyIHRvIHRoZSBsb29rdXAsIHdpdGggdGhlIFwiQU5EXCIgZmlsdGVyIG9wZXJhdG9yLlxyXG4gICAgICogQ2FuIG9ubHkgYmUgdXNlZCB3aXRoaW4gYSBcInByZSBzZWFyY2hcIiBldmVudCBoYW5kbGVyXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGZpbHRlckZpZWxkIEZpZWxkIGZvciB3aGljaCB0aGUgZmlsdGVyIHZhbHVlIHNob3VsZCBiZSBhcHBsaWVkXHJcbiAgICAgKiBAcGFyYW0gZmlsdGVyVmFsdWUgVGhlIGZpbHRlciB2YWx1ZVxyXG4gICAgICovXHJcbiAgICBhZGRMb29rdXBGaWx0ZXIoZmlsdGVyRmllbGQsIGZpbHRlclZhbHVlKSB7XHJcbiAgICAgICAgLy8gbm9pbnNwZWN0aW9uIEh0bWxVbmtub3duQXR0cmlidXRlXHJcbiAgICAgICAgY29uc3QgZmlsdGVyID0gYDxmaWx0ZXIgdHlwZT0nYW5kJz5cclxuICAgICAgICAgICAgPGNvbmRpdGlvbiBhdHRyaWJ1dGU9JyR7ZmlsdGVyRmllbGR9JyBvcGVyYXRvcj0nZXEnIHZhbHVlPScke2ZpbHRlclZhbHVlfScgLz5cclxuICAgICAgICA8L2ZpbHRlcj5gO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMuZm9yRWFjaChjb250cm9sID0+IHtcclxuICAgICAgICAgICAgY29udHJvbC5hZGRDdXN0b21GaWx0ZXIoZmlsdGVyKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyBhIGZldGNoWE1MIGxvb2t1cCBmaWx0ZXIgZm9yIHRoaXMgbG9va3VwIGF0dHJpYnV0ZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gVGhlIGN1c3RvbSBsb29rdXAgZmlsdGVyXHJcbiAgICAgKi9cclxuICAgIGFkZExvb2t1cFhNTEZpbHRlcih4bWxGaWx0ZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmZvckVhY2goY29udHJvbCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnRyb2wuYWRkQ3VzdG9tRmlsdGVyKHhtbEZpbHRlcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzZXRJc1ZhbGlkKGlzVmFsaWQsIG1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpLnNldElzVmFsaWQoaXNWYWxpZCwgbWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgVW5pcXVlaWRlbnRpZmllckZvcm1BdHRyaWJ1dGUgZXh0ZW5kcyBMb29rdXBGb3JtQXR0cmlidXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIE93bmVyRm9ybUF0dHJpYnV0ZSBleHRlbmRzIFVuaXF1ZWlkZW50aWZpZXJGb3JtQXR0cmlidXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIFBpY2tsaXN0Rm9ybUF0dHJpYnV0ZSBleHRlbmRzIEZvcm1BdHRyaWJ1dGVCYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpPy5jb250cm9scztcclxuICAgIH1cclxuICAgIF9nZXRUeXBlZEF0dHJpYnV0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGVTYWZlKCk7XHJcbiAgICB9XHJcbiAgICBjb250cm9scztcclxuICAgIGdldEluaXRpYWxWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRJbml0aWFsVmFsdWUoKTtcclxuICAgIH1cclxuICAgIGdldEZvcm1hdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRGb3JtYXQoKTtcclxuICAgIH1cclxuICAgIGdldE9wdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpLmdldE9wdGlvbih2YWx1ZSk7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRPcHRpb24odmFsdWUpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3B0aW9ucygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5nZXRPcHRpb25zKCk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVPcHRpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLmZvckVhY2goKGNvbnRyb2wpID0+IHtcclxuICAgICAgICAgICAgY29udHJvbD8ucmVtb3ZlT3B0aW9uKHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGdldFNlbGVjdGVkT3B0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpLmdldFNlbGVjdGVkT3B0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBnZXRUZXh0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpLmdldFRleHQoKTtcclxuICAgIH1cclxuICAgIHNldFZhbHVlKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5zZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBzZXRJc1ZhbGlkKGlzVmFsaWQsIG1lc3NhZ2UpIHtcclxuICAgICAgICB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpLnNldElzVmFsaWQoaXNWYWxpZCwgbWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgU3RhdGVGb3JtQXR0cmlidXRlIGV4dGVuZHMgUGlja2xpc3RGb3JtQXR0cmlidXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIERvdWJsZUZvcm1BdHRyaWJ1dGUgZXh0ZW5kcyBOdW1iZXJGb3JtQXR0cmlidXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIFN0YXR1c0Zvcm1BdHRyaWJ1dGUgZXh0ZW5kcyBQaWNrbGlzdEZvcm1BdHRyaWJ1dGUge1xyXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihhdHRyaWJ1dGVOYW1lLCBmb3JtQ29udGV4dCk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgQm9vbGVhbkZvcm1BdHRyaWJ1dGUgZXh0ZW5kcyBGb3JtQXR0cmlidXRlQmFzZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdHRyaWJ1dGVOYW1lLCBmb3JtQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KTtcclxuICAgIH1cclxuICAgIHNldElzVmFsaWQoaXNWYWxpZCwgbWVzc2FnZSkge1xyXG4gICAgICAgIHRoaXMuX2dldEF0dHJpYnV0ZSgpLnNldElzVmFsaWQoaXNWYWxpZCwgbWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0QXR0cmlidXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0SW5pdGlhbFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRBdHRyaWJ1dGUoKS5nZXRJbml0aWFsVmFsdWUoKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBEZWNpbWFsRm9ybUF0dHJpYnV0ZSBleHRlbmRzIE51bWJlckZvcm1BdHRyaWJ1dGUge1xyXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihhdHRyaWJ1dGVOYW1lLCBmb3JtQ29udGV4dCk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgSW50ZWdlckZvcm1BdHRyaWJ1dGUgZXh0ZW5kcyBOdW1iZXJGb3JtQXR0cmlidXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEN1c3RvbWVyRm9ybUF0dHJpYnV0ZSBleHRlbmRzIExvb2t1cEZvcm1BdHRyaWJ1dGUge1xyXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihhdHRyaWJ1dGVOYW1lLCBmb3JtQ29udGV4dCk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRGF0ZVRpbWVGb3JtQXR0cmlidXRlIGV4dGVuZHMgRm9ybUF0dHJpYnV0ZUJhc2Uge1xyXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihhdHRyaWJ1dGVOYW1lLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5jb250cm9scyA9IHRoaXMuX2dldFR5cGVkQXR0cmlidXRlKCk/LmNvbnRyb2xzO1xyXG4gICAgfVxyXG4gICAgX2dldFR5cGVkQXR0cmlidXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0dHJpYnV0ZVNhZmUoKTtcclxuICAgIH1cclxuICAgIGNvbnRyb2xzO1xyXG4gICAgZ2V0Rm9ybWF0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRUeXBlZEF0dHJpYnV0ZSgpLmdldEZvcm1hdCgpO1xyXG4gICAgfVxyXG4gICAgc2V0SXNWYWxpZChpc1ZhbGlkLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5fZ2V0VHlwZWRBdHRyaWJ1dGUoKS5zZXRJc1ZhbGlkKGlzVmFsaWQsIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIE11bHRpU2VsZWN0UGlja2xpc3RGb3JtQXR0cmlidXRlIGV4dGVuZHMgUGlja2xpc3RGb3JtQXR0cmlidXRlIHtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIFBhcnR5TGlzdEZvcm1BdHRyaWJ1dGUgZXh0ZW5kcyBMb29rdXBGb3JtQXR0cmlidXRlIHtcclxufVxuXG5jbGFzcyBFbnRpdHlOYW1lRm9ybUF0dHJpYnV0ZSBleHRlbmRzIFN0cmluZ0Zvcm1BdHRyaWJ1dGUge1xyXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlTmFtZSwgZm9ybUNvbnRleHQpIHtcclxuICAgICAgICBzdXBlcihhdHRyaWJ1dGVOYW1lLCBmb3JtQ29udGV4dCk7XHJcbiAgICB9XHJcbn1cblxudmFyIE5vdGlmaWNhdGlvbkxldmVsO1xyXG4oZnVuY3Rpb24gKE5vdGlmaWNhdGlvbkxldmVsKSB7XHJcbiAgICBOb3RpZmljYXRpb25MZXZlbFtcIkluZm9cIl0gPSBcIklORk9cIjtcclxuICAgIE5vdGlmaWNhdGlvbkxldmVsW1wiV2FybmluZ1wiXSA9IFwiV0FSTklOR1wiO1xyXG4gICAgTm90aWZpY2F0aW9uTGV2ZWxbXCJFcnJvclwiXSA9IFwiRVJST1JcIjtcclxufSkoTm90aWZpY2F0aW9uTGV2ZWwgfHwgKE5vdGlmaWNhdGlvbkxldmVsID0ge30pKTtcclxuLyoqXHJcbiAqIEEgTm90aWZpY2F0aW9uUnVsZSBpcyB1c2VkIHRvIGNvbmRpdGlvbmFsbHkgc2hvdyBhIG5vdGlmaWNhdGlvbiBvblxyXG4gKiBlaXRoZXIgcGFnZSBsZXZlbCBvciBvbiBhIHNwZWNpZmljIGF0dHJpYnV0ZVxyXG4gKi9cclxuY2xhc3MgTm90aWZpY2F0aW9uUnVsZSBleHRlbmRzIFRyaWdnZXJhYmxlUnVsZUJhc2Uge1xyXG4gICAgX2lkO1xyXG4gICAgX2xldmVsID0gTm90aWZpY2F0aW9uTGV2ZWwuSW5mbztcclxuICAgIF9zaG93SWZGdW5jdGlvbiA9ICgpID0+IHRydWU7XHJcbiAgICBpc1BhZ2VOb3RpZmljYXRpb24gPSBmYWxzZTtcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1Db250ZXh0LCBydWxlU3RvcmUsIGlkKSB7XHJcbiAgICAgICAgc3VwZXIoZm9ybUNvbnRleHQsIHJ1bGVTdG9yZSwgUnVsZVR5cGUuTm90aWZpY2F0aW9uUnVsZSk7XHJcbiAgICAgICAgdGhpcy5faWQgPSBpZCB8fCBHdWlkLmdlbmVyYXRlKCk7XHJcbiAgICAgICAgdGhpcy5pc1BhZ2VOb3RpZmljYXRpb24gPSBmYWxzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZnVuY3Rpb24gd2hpY2ggZGVjaWRlcyBpZiB0aGUgbm90aWZpY2F0aW9uIHdpbGwgYmUgc2hvd25cclxuICAgICAqL1xyXG4gICAgaWYoZnVuYykge1xyXG4gICAgICAgIHRoaXMuX3Nob3dJZkZ1bmN0aW9uID0gZnVuYztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyB0aGUgbm90aWZpY2F0aW9uIG1lc3NhZ2VcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdmFsdWUgVGhlIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICByZXR1cm5zKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mdW5jdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICAgICAgdGhpcy5mdW5jdGlvbiA9ICgpID0+IHZhbHVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBmb3JtIG9yIGF0dHJpYnV0ZSBmb3Igd2hpY2ggdGhlIG5vdGlmaWNhdGlvbiB3aWxsIGJlIGRpc3BsYXllZFxyXG4gICAgICovXHJcbiAgICBmb3IoZm9ybU9yQXR0cmlidXRlKSB7XHJcbiAgICAgICAgdGhpcy5pc1BhZ2VOb3RpZmljYXRpb24gPSBmb3JtT3JBdHRyaWJ1dGUgaW5zdGFuY2VvZiBGb3JtT2JqZWN0QmFzZTtcclxuICAgICAgICBpZiAoZm9ybU9yQXR0cmlidXRlIGluc3RhbmNlb2YgRm9ybUF0dHJpYnV0ZUJhc2UpXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QXR0cmlidXRlID0gZm9ybU9yQXR0cmlidXRlO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBub3RpZmljYXRpb24gbGV2ZWwgKEluZm8gLyBFcnJvciAvIFdhcm5pbmcpXHJcbiAgICAgKi9cclxuICAgIGlzTGV2ZWwobGV2ZWwpIHtcclxuICAgICAgICB0aGlzLl9sZXZlbCA9IGxldmVsO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNBY3RpdmUpXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5leGVjdXRlRnVuY3Rpb24oKTtcclxuICAgICAgICAgICAgY29uc3Qgc2hvd01lc3NhZ2UgPSB0aGlzLl9zaG93SWZGdW5jdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1BhZ2VOb3RpZmljYXRpb24pXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFBhZ2VOb3RpZmljYXRpb24oc2hvd01lc3NhZ2UsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZU5vdGlmaWNhdGlvbihzaG93TWVzc2FnZSwgbWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEV4Y2VwdGlvbiBvY2N1cnJlZCBkdXJpbmcgTm90aWZpY2F0aW9uUnVsZSBleGVjdXRpb246ICR7ZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRQYWdlTm90aWZpY2F0aW9uKHNob3dNZXNzYWdlLCBtZXNzYWdlID0gXCJcIikge1xyXG4gICAgICAgIGNvbnN0IG1zZyA9IHRoaXMuX2xldmVsO1xyXG4gICAgICAgIGlmIChzaG93TWVzc2FnZSlcclxuICAgICAgICAgICAgdGhpcy5mb3JtQ29udGV4dC51aS5zZXRGb3JtTm90aWZpY2F0aW9uKG1lc3NhZ2UsIG1zZywgdGhpcy5faWQpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5mb3JtQ29udGV4dC51aS5jbGVhckZvcm1Ob3RpZmljYXRpb24odGhpcy5faWQpO1xyXG4gICAgfVxyXG4gICAgc2V0QXR0cmlidXRlTm90aWZpY2F0aW9uKHNob3dNZXNzYWdlLCBtZXNzYWdlID0gXCJcIikge1xyXG4gICAgICAgIGlmICghdGhpcy50YXJnZXRBdHRyaWJ1dGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlRoZSB0YXJnZXQgYXR0cmlidXRlIGhhcyBub3QgYmVlbiBzZXQuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzaG93TWVzc2FnZSlcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRBdHRyaWJ1dGUuc2V0Tm90aWZpY2F0aW9uKG1lc3NhZ2UsIHRoaXMuX2lkKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0QXR0cmlidXRlLmNsZWFyTm90aWZpY2F0aW9uKHRoaXMuX2lkKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBPblNhdmVSdWxlIGV4dGVuZHMgUnVsZUJhc2Uge1xyXG4gICAgX3ByZXZlbnRGdW5jdGlvbiA9IG51bGw7XHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtQ29udGV4dCwgcnVsZVN0b3JlKSB7XHJcbiAgICAgICAgc3VwZXIoZm9ybUNvbnRleHQsIHJ1bGVTdG9yZSwgUnVsZVR5cGUuT25TYXZlUnVsZSk7XHJcbiAgICAgICAgdGhpcy5mb3JtQ29udGV4dC5kYXRhLmVudGl0eS5hZGRPblNhdmUoZXhlY09iaiA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mdW5jdGlvbilcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVGdW5jdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3ByZXZlbnRGdW5jdGlvbiAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJldmVudCA9IHRoaXMuX3ByZXZlbnRGdW5jdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2ZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjT2JqLmdldEV2ZW50QXJncygpLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHByZXZlbnRzSWYoYm9vbGZ1bmMpIHtcclxuICAgICAgICB0aGlzLl9wcmV2ZW50RnVuY3Rpb24gPSBib29sZnVuYztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGV4ZWN1dGVzKGZ1bmMpIHtcclxuICAgICAgICB0aGlzLmZ1bmN0aW9uID0gZnVuYztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgLy8gRW1wdHkgb24gcHVycG9zZVxyXG4gICAgfVxyXG59XG5cbmNsYXNzIFJlcXVpcmVSdWxlIGV4dGVuZHMgVHJpZ2dlcmFibGVSdWxlQmFzZSB7XHJcbiAgICBfdGFyZ2V0QXR0cmlidXRlcyA9IFtdO1xyXG4gICAgY29uc3RydWN0b3IoZm9ybUNvbnRleHQsIHJ1bGVTdG9yZSkge1xyXG4gICAgICAgIHN1cGVyKGZvcm1Db250ZXh0LCBydWxlU3RvcmUsIFJ1bGVUeXBlLlJlcXVpcmVSdWxlKTtcclxuICAgIH1cclxuICAgIHJldHVybnMoZnVuYykge1xyXG4gICAgICAgIHRoaXMuZnVuY3Rpb24gPSBmdW5jO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZm9yKC4uLnRhcmdldHMpIHtcclxuICAgICAgICB0aGlzLl90YXJnZXRBdHRyaWJ1dGVzID0gdGFyZ2V0cztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5leGVjdXRlRnVuY3Rpb24oKTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCB0YXJnZXRBdHRyaWJ1dGUgb2YgdGhpcy5fdGFyZ2V0QXR0cmlidXRlcykge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0QXR0cmlidXRlLnNldFJlcXVpcmVkTGV2ZWwocmVzdWx0ID8gXCJyZXF1aXJlZFwiIDogXCJub25lXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmNsYXNzIFN1YnNjcmliZVJ1bGUgZXh0ZW5kcyBUcmlnZ2VyYWJsZVJ1bGVCYXNlIHtcclxuICAgIHRhcmdldE1vZGVsID0gbnVsbDtcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1Db250ZXh0LCBydWxlU3RvcmUpIHtcclxuICAgICAgICBzdXBlcihmb3JtQ29udGV4dCwgcnVsZVN0b3JlLCBSdWxlVHlwZS5TdWJzY3JpYmVSdWxlKTtcclxuICAgIH1cclxuICAgIGZvcih0YXJnZXQpIHtcclxuICAgICAgICB0aGlzLnRhcmdldE1vZGVsID0gdGFyZ2V0O1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZXMoZnVuYykge1xyXG4gICAgICAgIHRoaXMuZnVuY3Rpb24gPSBmdW5jO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZUZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHN1cGVyLmV4ZWN1dGVGdW5jdGlvbigpO1xyXG4gICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RvRmlyZU9uQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgIH0sIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXhjZXB0aW9uIG9jY3VycmVkIGR1cmluZyBTdWJzY3JpYmVSdWxlIGV4ZWN1dGlvbjogJHtlcnJvcn1gKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RvRmlyZU9uQ2hhbmdlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2RvRmlyZU9uQ2hhbmdlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRhcmdldE1vZGVsKVxyXG4gICAgICAgICAgICB0aGlzLnRhcmdldE1vZGVsLmZpcmVPbkNoYW5nZSgpO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZSlcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlRnVuY3Rpb24oKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBGbHVlbnRSdWxlRmFjdG9yeSB7XHJcbiAgICBfZm9ybUNvbnRleHQ7XHJcbiAgICBfcnVsZVN0b3JlO1xyXG4gICAgY29uc3RydWN0b3IoZm9ybUNvbnRleHQsIHJ1bGVTdG9yZSkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm1Db250ZXh0ID0gZm9ybUNvbnRleHQ7XHJcbiAgICAgICAgdGhpcy5fcnVsZVN0b3JlID0gcnVsZVN0b3JlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IERpc3BsYXlSdWxlXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZURpc3BsYXlSdWxlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGlzcGxheVJ1bGUodGhpcy5fZm9ybUNvbnRleHQsIHRoaXMuX3J1bGVTdG9yZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgRW5hYmxlUnVsZVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVFbmFibGVSdWxlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW5hYmxlUnVsZSh0aGlzLl9mb3JtQ29udGV4dCwgdGhpcy5fcnVsZVN0b3JlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBOb3RpZmljYXRpb25SdWxlXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZU5vdGlmaWNhdGlvblJ1bGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBOb3RpZmljYXRpb25SdWxlKHRoaXMuX2Zvcm1Db250ZXh0LCB0aGlzLl9ydWxlU3RvcmUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IEZpbHRlclJ1bGVcclxuICAgICAqL1xyXG4gICAgY3JlYXRlRmlsdGVyUnVsZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEZpbHRlclJ1bGUodGhpcy5fZm9ybUNvbnRleHQsIHRoaXMuX3J1bGVTdG9yZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgT25TYXZlUnVsZVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVPblNhdmVSdWxlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgT25TYXZlUnVsZSh0aGlzLl9mb3JtQ29udGV4dCwgdGhpcy5fcnVsZVN0b3JlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBSZXF1aXJlUnVsZVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVSZXF1aXJlUnVsZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFJlcXVpcmVSdWxlKHRoaXMuX2Zvcm1Db250ZXh0LCB0aGlzLl9ydWxlU3RvcmUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFZhbHVlUnVsZVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVWYWx1ZVJ1bGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZVJ1bGUodGhpcy5fZm9ybUNvbnRleHQsIHRoaXMuX3J1bGVTdG9yZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgU3Vic2NyaWJlUnVsZVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVTdWJzY3JpYmVSdWxlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgU3Vic2NyaWJlUnVsZSh0aGlzLl9mb3JtQ29udGV4dCwgdGhpcy5fcnVsZVN0b3JlKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBSdWxlU3RvcmUge1xyXG4gICAgcnVsZXM7XHJcbiAgICBvbkxvYWRBY3RpdmF0aW9ucztcclxuICAgIG9uU2F2ZUFjdGl2YXRpb25zO1xyXG4gICAgcmVnaXN0ZXJlZENoYW5nZUhhbmRsZXJzO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ydWxlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub25Mb2FkQWN0aXZhdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLm9uU2F2ZUFjdGl2YXRpb25zID0gW107XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcmVkQ2hhbmdlSGFuZGxlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICBjbGVhclJ1bGVzKCkge1xyXG4gICAgICAgIGZvciAoY29uc3QgcnVsZSBvZiB0aGlzLnJ1bGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChydWxlIGluc3RhbmNlb2YgTm90aWZpY2F0aW9uUnVsZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJ1bGUuaXNQYWdlTm90aWZpY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcnVsZS5zZXRQYWdlTm90aWZpY2F0aW9uKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bGUuc2V0QXR0cmlidXRlTm90aWZpY2F0aW9uKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBbdHJpZ2dlciwgaGFuZGxlcl0gb2YgdGhpcy5yZWdpc3RlcmVkQ2hhbmdlSGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgdHJpZ2dlci51bnJlZ2lzdGVyT25DaGFuZ2UoaGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJlZENoYW5nZUhhbmRsZXJzLmNsZWFyKCk7XHJcbiAgICAgICAgdGhpcy5vbkxvYWRBY3RpdmF0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMub25TYXZlQWN0aXZhdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLnJ1bGVzID0gW107XHJcbiAgICB9XHJcbiAgICByZWdpc3RlclJ1bGUocnVsZSkge1xyXG4gICAgICAgIHRoaXMucnVsZXMucHVzaChydWxlKTtcclxuICAgIH1cclxuICAgIGdldCBhbGxTdWJzY3JpYmVSdWxlcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ydWxlcy5maWx0ZXIociA9PiByIGluc3RhbmNlb2YgU3Vic2NyaWJlUnVsZSk7XHJcbiAgICB9XHJcbiAgICBnZXQgb25Mb2FkQWN0aXZhdGlvblN1YnNjcmliZVJ1bGVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uTG9hZEFjdGl2YXRpb25zLmZpbHRlcihyID0+IHIgaW5zdGFuY2VvZiBTdWJzY3JpYmVSdWxlKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBGbHVlbnRSdWxlcyB7XHJcbiAgICBfZHluYW1pY3NDb250ZXh0O1xyXG4gICAgX3J1bGVTdG9yZTtcclxuICAgIF9pbXBhY3RlZE9uTG9hZFJ1bGVzO1xyXG4gICAgX3J1bGVGYWN0b3J5O1xyXG4gICAgaXNEb2N1bWVudFJlYWR5O1xyXG4gICAgY29uc3RydWN0b3IoZHluYW1pY3NDb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fZHluYW1pY3NDb250ZXh0ID0gZHluYW1pY3NDb250ZXh0O1xyXG4gICAgICAgIHRoaXMuX3J1bGVTdG9yZSA9IG5ldyBSdWxlU3RvcmUoKTtcclxuICAgICAgICB0aGlzLl9ydWxlRmFjdG9yeSA9IG5ldyBGbHVlbnRSdWxlRmFjdG9yeSh0aGlzLl9keW5hbWljc0NvbnRleHQuZm9ybUNvbnRleHQsIHRoaXMuX3J1bGVTdG9yZSk7XHJcbiAgICAgICAgdGhpcy5pc0RvY3VtZW50UmVhZHkgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIGFycmF5IHN0b3JlcyBhbGwgbW9kZWxzIHRoYXQgYXJlIHRyaWdnZXJlZCBieSBhbiBvbmxvYWQgc3Vic2NyaWJlIHJ1bGUuXHJcbiAgICAgICAgICogVGhlIEZsdWVudFJ1bGUgZnJhbWV3b3JrIHdhaXRzIGZvciBhbGwgdGhlc2UgbW9kZWxzIHRvIGZpcmUgYW4gb25jaGFuZ2UgZXZlbnRcclxuICAgICAgICAgKiBiZWZvcmUgc2V0dGluZyB7QGxpbmsgaXNEb2N1bWVudFJlYWR5fSB0byB0cnVlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2ltcGFjdGVkT25Mb2FkUnVsZXMgPSBbXTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uTG9hZCgpIHtcclxuICAgICAgICBjb25zdCBydWxlcyA9IHRoaXMuX3J1bGVTdG9yZS5hbGxTdWJzY3JpYmVSdWxlcztcclxuICAgICAgICBmb3IgKGNvbnN0IHJ1bGUgb2YgdGhpcy5fcnVsZVN0b3JlLm9uTG9hZEFjdGl2YXRpb25TdWJzY3JpYmVSdWxlcykge1xyXG4gICAgICAgICAgICBjb25zdCBpbXBhY3RlZFJ1bGVzID0gdGhpcy5fZmluZEltcGFjdGVkUnVsZXMocnVsZXMsIHJ1bGUpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbXBhY3RlZE9uTG9hZFJ1bGVzLnB1c2goLi4uaW1wYWN0ZWRSdWxlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgcnVsZSBvZiB0aGlzLl9pbXBhY3RlZE9uTG9hZFJ1bGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChydWxlLnRhcmdldE1vZGVsKVxyXG4gICAgICAgICAgICAgICAgcnVsZS50YXJnZXRNb2RlbC5yZWdpc3Rlck9uQ2hhbmdlKHRoaXMuX2ltcGFjdGVkTW9kZWxDaGFuZ2VIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5fcnVsZVN0b3JlLm9uTG9hZEFjdGl2YXRpb25zLm1hcChpdGVtID0+IGl0ZW0uZXhlY3V0ZSgpKSk7XHJcbiAgICAgICAgdGhpcy5fc2V0RG9jdW1lbnRSZWFkeVN0YXRlKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvblNhdmUoKSB7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5fcnVsZVN0b3JlLm9uU2F2ZUFjdGl2YXRpb25zLm1hcChpdGVtID0+IGl0ZW0uZXhlY3V0ZSgpKSk7XHJcbiAgICB9XHJcbiAgICBfc2V0RG9jdW1lbnRSZWFkeVN0YXRlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pbXBhY3RlZE9uTG9hZFJ1bGVzLmxlbmd0aCA9PT0gMClcclxuICAgICAgICAgICAgdGhpcy5pc0RvY3VtZW50UmVhZHkgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgX2ltcGFjdGVkTW9kZWxDaGFuZ2VIYW5kbGVyKG1vZGVsKSB7XHJcbiAgICAgICAgY29uc3QgcnVsZXMgPSB0aGlzLl9pbXBhY3RlZE9uTG9hZFJ1bGVzLmZpbHRlcihyID0+IHIudGFyZ2V0TW9kZWw/Ll9pbnRlcm5hbElkID09PSBtb2RlbC5faW50ZXJuYWxJZCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBydWxlIG9mIHJ1bGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5faW1wYWN0ZWRPbkxvYWRSdWxlcy5pbmRleE9mKHJ1bGUpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbXBhY3RlZE9uTG9hZFJ1bGVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2ZpbmRJbXBhY3RlZFJ1bGVzKGFsbFJ1bGVzLCBzb3VyY2VSdWxlKSB7XHJcbiAgICAgICAgY29uc3QgaW1wYWN0ZWRSdWxlcyA9IGFsbFJ1bGVzXHJcbiAgICAgICAgICAgIC5maWx0ZXIociA9PiByLnRyaWdnZXJzLnNvbWUodCA9PiB0ID09PSBzb3VyY2VSdWxlLnRhcmdldE1vZGVsKSk7XHJcbiAgICAgICAgZm9yIChjb25zdCBpbXBhY3RlZFJ1bGUgb2YgaW1wYWN0ZWRSdWxlcykge1xyXG4gICAgICAgICAgICBjb25zdCBjaGlsZEltcGFjdGVkUnVsZXMgPSB0aGlzLl9maW5kSW1wYWN0ZWRSdWxlcyhhbGxSdWxlcywgaW1wYWN0ZWRSdWxlKTtcclxuICAgICAgICAgICAgaW1wYWN0ZWRSdWxlcy5wdXNoKC4uLmNoaWxkSW1wYWN0ZWRSdWxlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbXBhY3RlZFJ1bGVzO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIExvb2tVcEN1c3RvbUZpbHRlciB7XHJcbiAgICBzdGF0aWMgaXNMb29rdXBDb250cm9sKGNvbnRyb2wpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhcHBseShhdHRyaWJ1dGVBY2Nlc3NvciwgZnVuYykge1xyXG4gICAgICAgIGF0dHJpYnV0ZUFjY2Vzc29yKCkuZm9yRWFjaENvbnRyb2woKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNMb29rdXBDb250cm9sKGl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgZnVuYyhpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHN0YXRpYyByZW1vdmVGaWx0ZXIoYXR0cmlidXRlQWNjZXNzb3IsIGhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLmFwcGx5KGF0dHJpYnV0ZUFjY2Vzc29yLCAoYykgPT4gYy5yZW1vdmVQcmVTZWFyY2goaGFuZGxlcikpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFwcGx5RmlsdGVyKGF0dHJpYnV0ZUFjY2Vzc29yLCBmZXRjaFhtbEZpbHRlclN0cmluZywgbG9naWNhbE5hbWUpIHtcclxuICAgICAgICBjb25zdCBwcmVTZWFyY2hIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5KGF0dHJpYnV0ZUFjY2Vzc29yLCAoYykgPT4ge1xyXG4gICAgICAgICAgICAgICAgYy5hZGRDdXN0b21GaWx0ZXIoZmV0Y2hYbWxGaWx0ZXJTdHJpbmcsIGxvZ2ljYWxOYW1lICE9IG51bGwgPyBsb2dpY2FsTmFtZSA6IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5hcHBseShhdHRyaWJ1dGVBY2Nlc3NvciwgKGMpID0+IGMuYWRkUHJlU2VhcmNoKHByZVNlYXJjaEhhbmRsZXIpKTtcclxuICAgICAgICByZXR1cm4gcHJlU2VhcmNoSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhcHBseUZpbHRlck1ldGhvZChhdHRyaWJ1dGVBY2Nlc3NvciwgaGFuZGxlckZ1bmMsIGxvZ2ljYWxOYW1lLCBhZGRDdXN0b21GaWx0ZXJQcmVkaWNhdGUpIHtcclxuICAgICAgICBjb25zdCBwcmVTZWFyY2hIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWFkZEN1c3RvbUZpbHRlclByZWRpY2F0ZSB8fCB0eXBlb2YgYWRkQ3VzdG9tRmlsdGVyUHJlZGljYXRlICE9PSBcImZ1bmN0aW9uXCIgfHwgYWRkQ3VzdG9tRmlsdGVyUHJlZGljYXRlKCkgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwbHkoYXR0cmlidXRlQWNjZXNzb3IsIChjKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYy5hZGRDdXN0b21GaWx0ZXIoaGFuZGxlckZ1bmMoKSwgbG9naWNhbE5hbWUgIT0gbnVsbCA/IGxvZ2ljYWxOYW1lIDogdW5kZWZpbmVkKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmFwcGx5KGF0dHJpYnV0ZUFjY2Vzc29yLCAoYykgPT4gYy5hZGRQcmVTZWFyY2gocHJlU2VhcmNoSGFuZGxlcikpO1xyXG4gICAgICAgIHJldHVybiBwcmVTZWFyY2hIYW5kbGVyO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIE9EYXRhQXR0cmlidXRlRmlsdGVyQmFzZSB7XHJcbiAgICBfbm90O1xyXG4gICAgX2ZpbHRlclZhbHVlO1xyXG4gICAgX2F0dHJpYnV0ZTtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGF0dHJpYnV0ZSBUaGUgQXR0cmlidXRlIHRvIGZpbHRlclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihhdHRyaWJ1dGUpIHtcclxuICAgICAgICB0aGlzLl9ub3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9maWx0ZXJWYWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5fYXR0cmlidXRlID0gYXR0cmlidXRlO1xyXG4gICAgfVxyXG4gICAgZ2V0IGZpbHRlclZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9maWx0ZXJWYWx1ZTtcclxuICAgIH1cclxuICAgIGlzTm90TnVsbCgpIHtcclxuICAgICAgICB0aGlzLl9maWx0ZXJWYWx1ZSA9IGAke3RoaXMuX2F0dHJpYnV0ZS5zZWxlY3Rvcn0gbmUgbnVsbGA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBpc051bGwoKSB7XHJcbiAgICAgICAgdGhpcy5fZmlsdGVyVmFsdWUgPSBgJHt0aGlzLl9hdHRyaWJ1dGUuc2VsZWN0b3J9IGVxIG51bGxgO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZXF1YWwodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9idWlsZEZpbHRlclZhbHVlKFwiZXFcIiwgdmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgbm90RXF1YWwodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9idWlsZEZpbHRlclZhbHVlKFwibmVcIiwgdmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgX2J1aWxkRmlsdGVyVmFsdWUob3BlcmF0b3IsIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlsdGVyVmFsdWUgPSBgJHt0aGlzLl9hdHRyaWJ1dGUuc2VsZWN0b3J9ICR7b3BlcmF0b3J9ICR7dGhpcy5fYXR0cmlidXRlLmNvbnZlcnQodmFsdWUpfWA7XHJcbiAgICB9XHJcbn1cblxudmFyIE9yZGVyRGlyZWN0aW9uO1xyXG4oZnVuY3Rpb24gKE9yZGVyRGlyZWN0aW9uKSB7XHJcbiAgICBPcmRlckRpcmVjdGlvbltPcmRlckRpcmVjdGlvbltcIkFzY2VuZGluZ1wiXSA9IDBdID0gXCJBc2NlbmRpbmdcIjtcclxuICAgIE9yZGVyRGlyZWN0aW9uW09yZGVyRGlyZWN0aW9uW1wiRGVzY2VuZGluZ1wiXSA9IDFdID0gXCJEZXNjZW5kaW5nXCI7XHJcbn0pKE9yZGVyRGlyZWN0aW9uIHx8IChPcmRlckRpcmVjdGlvbiA9IHt9KSk7XHJcbmNsYXNzIE9EYXRhQXR0cmlidXRlT3JkZXIge1xyXG4gICAgX2F0dHJpYnV0ZTtcclxuICAgIF9vcmRlckRpcmVjdGlvbjtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHRoaXMuX2F0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcclxuICAgICAgICB0aGlzLl9vcmRlckRpcmVjdGlvbiA9IE9yZGVyRGlyZWN0aW9uLkFzY2VuZGluZztcclxuICAgIH1cclxuICAgIGFzY2VuZGluZygpIHtcclxuICAgICAgICB0aGlzLl9vcmRlckRpcmVjdGlvbiA9IE9yZGVyRGlyZWN0aW9uLkFzY2VuZGluZztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGRlc2NlbmRpbmcoKSB7XHJcbiAgICAgICAgdGhpcy5fb3JkZXJEaXJlY3Rpb24gPSBPcmRlckRpcmVjdGlvbi5EZXNjZW5kaW5nO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgYnVpbGRPcmRlclN0cmluZygpIHtcclxuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLl9vcmRlckRpcmVjdGlvbiA9PT0gT3JkZXJEaXJlY3Rpb24uQXNjZW5kaW5nID8gXCJhc2NcIiA6IFwiZGVzY1wiO1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLl9hdHRyaWJ1dGUuc2VsZWN0b3J9ICR7ZGlyZWN0aW9ufWA7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgT0RhdGFBdHRyaWJ1dGVCYXNlIHtcclxuICAgIHJlbGF0aW9uO1xyXG4gICAgYXR0cmlidXRlTmFtZTtcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZU5hbWUsIHJlbGF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVOYW1lID0gYXR0cmlidXRlTmFtZTtcclxuICAgICAgICB0aGlzLnJlbGF0aW9uID0gcmVsYXRpb247XHJcbiAgICB9XHJcbiAgICBnZXQgc2VsZWN0b3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgfVxyXG4gICAgY29udmVydCh2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGFzRmlsdGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgT0RhdGFBdHRyaWJ1dGVGaWx0ZXJCYXNlKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgYXNPcmRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9EYXRhQXR0cmlidXRlT3JkZXIodGhpcyk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgU3RyaW5nT0RhdGFBdHRyaWJ1dGVGaWx0ZXIgZXh0ZW5kcyBPRGF0YUF0dHJpYnV0ZUZpbHRlckJhc2Uge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYXR0cmlidXRlIFRoZSBBdHRyaWJ1dGUgdG8gZmlsdGVyXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHN1cGVyKGF0dHJpYnV0ZSk7XHJcbiAgICAgICAgdGhpcy5fbm90ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBnZXQgZmlsdGVyVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLl9ub3QgPyBcIm5vdCBcIiA6IFwiXCIpICsgdGhpcy5fZmlsdGVyVmFsdWU7XHJcbiAgICB9XHJcbiAgICBub3QoKSB7XHJcbiAgICAgICAgdGhpcy5fbm90ID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHN0YXJ0c1dpdGgodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9maWx0ZXJWYWx1ZSA9IGBzdGFydHN3aXRoKCR7dGhpcy5fYXR0cmlidXRlLnNlbGVjdG9yfSwke3RoaXMuX2F0dHJpYnV0ZS5jb252ZXJ0KHZhbHVlKX0pYDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGVuZHNXaXRoKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlsdGVyVmFsdWUgPSBgZW5kc3dpdGgoJHt0aGlzLl9hdHRyaWJ1dGUuc2VsZWN0b3J9LCR7dGhpcy5fYXR0cmlidXRlLmNvbnZlcnQodmFsdWUpfSlgO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgY29udGFpbnModmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9maWx0ZXJWYWx1ZSA9IGBjb250YWlucygke3RoaXMuX2F0dHJpYnV0ZS5zZWxlY3Rvcn0sJHt0aGlzLl9hdHRyaWJ1dGUuY29udmVydCh2YWx1ZSl9KWA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgTWVtb09EYXRhQXR0cmlidXRlIGV4dGVuZHMgT0RhdGFBdHRyaWJ1dGVCYXNlIHtcclxuICAgIGNvbnZlcnQodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gYCcke3ZhbHVlfSdgO1xyXG4gICAgfVxyXG4gICAgYXNGaWx0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdPRGF0YUF0dHJpYnV0ZUZpbHRlcih0aGlzKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBOdW1iZXJPRGF0YUF0dHJpYnV0ZUZpbHRlciBleHRlbmRzIE9EYXRhQXR0cmlidXRlRmlsdGVyQmFzZSB7XHJcbiAgICBncmVhdGVyVGhhbih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2J1aWxkRmlsdGVyVmFsdWUoXCJndFwiLCB2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBsZXNzVGhhbih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2J1aWxkRmlsdGVyVmFsdWUoXCJsdFwiLCB2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBsZXNzVGhhbk9yRXF1YWwodmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9idWlsZEZpbHRlclZhbHVlKFwibGVcIiwgdmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgZ3JlYXRlclRoYW5PckVxdWFsKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fYnVpbGRGaWx0ZXJWYWx1ZShcImdlXCIsIHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxuXG5jbGFzcyBNb25leU9EYXRhQXR0cmlidXRlIGV4dGVuZHMgT0RhdGFBdHRyaWJ1dGVCYXNlIHtcclxuICAgIGFzRmlsdGVyKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTnVtYmVyT0RhdGFBdHRyaWJ1dGVGaWx0ZXIodGhpcyk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgT3duZXJPRGF0YUF0dHJpYnV0ZSBleHRlbmRzIE9EYXRhQXR0cmlidXRlQmFzZSB7XHJcbiAgICBnZXQgc2VsZWN0b3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIGBfJHtzdXBlci5zZWxlY3Rvcn1fdmFsdWVgO1xyXG4gICAgfVxyXG4gICAgY29udmVydCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShcIntcIiwgXCJcIikucmVwbGFjZShcIn1cIiwgXCJcIik7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgU3RhdGVPRGF0YUF0dHJpYnV0ZSBleHRlbmRzIE9EYXRhQXR0cmlidXRlQmFzZSB7XHJcbn1cblxuY2xhc3MgRG91YmxlT0RhdGFBdHRyaWJ1dGUgZXh0ZW5kcyBPRGF0YUF0dHJpYnV0ZUJhc2Uge1xyXG4gICAgYXNGaWx0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBOdW1iZXJPRGF0YUF0dHJpYnV0ZUZpbHRlcih0aGlzKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBMb29rdXBPRGF0YUF0dHJpYnV0ZSBleHRlbmRzIE9EYXRhQXR0cmlidXRlQmFzZSB7XHJcbiAgICBnZXQgc2VsZWN0b3IoKSB7XHJcbiAgICAgICAgcmV0dXJuIGBfJHtzdXBlci5zZWxlY3Rvcn1fdmFsdWVgO1xyXG4gICAgfVxyXG4gICAgY29udmVydCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShcIntcIiwgXCJcIikucmVwbGFjZShcIn1cIiwgXCJcIik7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgU3RhdHVzT0RhdGFBdHRyaWJ1dGUgZXh0ZW5kcyBPRGF0YUF0dHJpYnV0ZUJhc2Uge1xyXG59XG5cbmNsYXNzIFN0cmluZ09EYXRhQXR0cmlidXRlIGV4dGVuZHMgT0RhdGFBdHRyaWJ1dGVCYXNlIHtcclxuICAgIGNvbnZlcnQodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gYCcke3ZhbHVlfSdgO1xyXG4gICAgfVxyXG4gICAgYXNGaWx0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdPRGF0YUF0dHJpYnV0ZUZpbHRlcih0aGlzKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBCb29sZWFuT0RhdGFBdHRyaWJ1dGUgZXh0ZW5kcyBPRGF0YUF0dHJpYnV0ZUJhc2Uge1xyXG59XG5cbmNsYXNzIERlY2ltYWxPRGF0YUF0dHJpYnV0ZSBleHRlbmRzIE9EYXRhQXR0cmlidXRlQmFzZSB7XHJcbiAgICBhc0ZpbHRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE51bWJlck9EYXRhQXR0cmlidXRlRmlsdGVyKHRoaXMpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEludGVnZXJPRGF0YUF0dHJpYnV0ZSBleHRlbmRzIE9EYXRhQXR0cmlidXRlQmFzZSB7XHJcbiAgICBhc0ZpbHRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE51bWJlck9EYXRhQXR0cmlidXRlRmlsdGVyKHRoaXMpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEN1c3RvbWVyT0RhdGFBdHRyaWJ1dGUgZXh0ZW5kcyBPRGF0YUF0dHJpYnV0ZUJhc2Uge1xyXG4gICAgZ2V0IHNlbGVjdG9yKCkge1xyXG4gICAgICAgIHJldHVybiBgXyR7c3VwZXIuc2VsZWN0b3J9X3ZhbHVlYDtcclxuICAgIH1cclxuICAgIGNvbnZlcnQodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwgfHwgdmFsdWUgPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoXCJ7XCIsIFwiXCIpLnJlcGxhY2UoXCJ9XCIsIFwiXCIpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIERhdGVUaW1lT0RhdGFBdHRyaWJ1dGVGaWx0ZXIgZXh0ZW5kcyBPRGF0YUF0dHJpYnV0ZUZpbHRlckJhc2Uge1xyXG4gICAgZ3JlYXRlclRoYW4odmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9idWlsZEZpbHRlclZhbHVlKFwiZ3RcIiwgdmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgbGVzc1RoYW4odmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9idWlsZEZpbHRlclZhbHVlKFwibHRcIiwgdmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgbGVzc1RoYW5PckVxdWFsKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fYnVpbGRGaWx0ZXJWYWx1ZShcImxlXCIsIHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGdyZWF0ZXJUaGFuT3JFcXVhbCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX2J1aWxkRmlsdGVyVmFsdWUoXCJnZVwiLCB2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRGF0ZVRpbWVPRGF0YUF0dHJpYnV0ZSBleHRlbmRzIE9EYXRhQXR0cmlidXRlQmFzZSB7XHJcbiAgICBjb252ZXJ0KHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlLnRvSVNPU3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICBhc0ZpbHRlcigpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERhdGVUaW1lT0RhdGFBdHRyaWJ1dGVGaWx0ZXIodGhpcyk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgUGlja2xpc3RPRGF0YUF0dHJpYnV0ZSBleHRlbmRzIE9EYXRhQXR0cmlidXRlQmFzZSB7XHJcbn1cblxuY2xhc3MgTXVsdGlTZWxlY3RQaWNrbGlzdE9EYXRhQXR0cmlidXRlIGV4dGVuZHMgT0RhdGFBdHRyaWJ1dGVCYXNlIHtcclxufVxuXG5jbGFzcyBQYXJ0eUxpc3RPRGF0YUF0dHJpYnV0ZSBleHRlbmRzIE9EYXRhQXR0cmlidXRlQmFzZSB7XHJcbiAgICBjb252ZXJ0KHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsIHx8IHZhbHVlID09PSB1bmRlZmluZWQpXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKFwie1wiLCBcIlwiKS5yZXBsYWNlKFwifVwiLCBcIlwiKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBVbmlxdWVpZGVudGlmaWVyT0RhdGFBdHRyaWJ1dGUgZXh0ZW5kcyBPRGF0YUF0dHJpYnV0ZUJhc2Uge1xyXG4gICAgY29udmVydCh2YWx1ZSkge1xyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICByZXR1cm4gdmFsdWUucmVwbGFjZShcIntcIiwgXCJcIikucmVwbGFjZShcIn1cIiwgXCJcIik7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRW50aXR5TmFtZU9EYXRhQXR0cmlidXRlIGV4dGVuZHMgT0RhdGFBdHRyaWJ1dGVCYXNlIHtcclxuICAgIGNvbnZlcnQodmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gYCcke3ZhbHVlfSdgO1xyXG4gICAgfVxyXG4gICAgYXNGaWx0ZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdPRGF0YUF0dHJpYnV0ZUZpbHRlcih0aGlzKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBPRGF0YUVudGl0eSB7XHJcbiAgICBfcmVsYXRpb247XHJcbiAgICBFbnRpdHlTZXROYW1lID0gXCJcIjtcclxuICAgIGNvbnN0cnVjdG9yKHJlbGF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fcmVsYXRpb24gPSByZWxhdGlvbjtcclxuICAgIH1cclxufVxuXG5jbGFzcyBMb29rdXBDb252ZXJ0ZXIge1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZUxvb2t1cChpZCwgbG9naWNhbE5hbWUsIG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gW3tcclxuICAgICAgICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgICAgICAgZW50aXR5VHlwZTogbG9naWNhbE5hbWUsXHJcbiAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICB9XTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVhdGVBdHRyaWJ1dGVMb29rdXBGcm9tT0RhdGFSZXNwb25zZShvZGF0YVJlc3BvbnNlLCBhdHRyaWJ1dGVTZWxlY3Rvcikge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiBvZGF0YVJlc3BvbnNlW2F0dHJpYnV0ZVNlbGVjdG9yXSxcclxuICAgICAgICAgICAgZW50aXR5VHlwZTogb2RhdGFSZXNwb25zZVtgJHthdHRyaWJ1dGVTZWxlY3Rvcn1ATWljcm9zb2Z0LkR5bmFtaWNzLkNSTS5sb29rdXBsb2dpY2FsbmFtZWBdLFxyXG4gICAgICAgICAgICBuYW1lOiBvZGF0YVJlc3BvbnNlW2Ake2F0dHJpYnV0ZVNlbGVjdG9yfUBPRGF0YS5Db21tdW5pdHkuRGlzcGxheS5WMS5Gb3JtYXR0ZWRWYWx1ZWBdLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgUGlja2xpc3RDb252ZXJ0ZXIge1xyXG4gICAgc3RhdGljIGNyZWF0ZUF0dHJpYnV0ZUxvb2t1cEZyb21PRGF0YVJlc3BvbnNlKG9kYXRhUmVzcG9uc2UsIGF0dHJpYnV0ZVNlbGVjdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdmFsdWU6IG9kYXRhUmVzcG9uc2VbYXR0cmlidXRlU2VsZWN0b3JdLFxyXG4gICAgICAgICAgICBuYW1lOiBvZGF0YVJlc3BvbnNlW2Ake2F0dHJpYnV0ZVNlbGVjdG9yfUBPRGF0YS5Db21tdW5pdHkuRGlzcGxheS5WMS5Gb3JtYXR0ZWRWYWx1ZWBdLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRmlsdGVyR3JvdXAge1xyXG4gICAgX2V4cHJlc3Npb25zO1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PEZpbHRlclZhbHVlPn0gZXhwcmVzc2lvbnMgVGhlIGZpbHRlciB2YWx1ZXNcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhwcmVzc2lvbnMpIHtcclxuICAgICAgICB0aGlzLl9leHByZXNzaW9ucyA9IGV4cHJlc3Npb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGZpbHRlclZhbHVlKCkge1xyXG4gICAgICAgIGxldCB2YWx1ZSA9IFwiKFwiO1xyXG4gICAgICAgIGZvciAoY29uc3QgZXhwIG9mIHRoaXMuX2V4cHJlc3Npb25zKSB7XHJcbiAgICAgICAgICAgIHZhbHVlICs9IGV4cC5maWx0ZXJWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGAke3ZhbHVlfSlgO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEZpbHRlclZhbHVlIHtcclxuICAgIGdldCBmaWx0ZXJWYWx1ZSgpIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxufVxuXG4vLyBSZVNoYXJwZXIgZGlzYWJsZSBvbmNlIEluY29uc2lzdGVudE5hbWluZ1xyXG5jbGFzcyBBbmRRdWVyeU9wZXJhdG9yIGV4dGVuZHMgRmlsdGVyVmFsdWUge1xyXG4gICAgZ2V0IGZpbHRlclZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiBcIiBhbmQgXCI7XHJcbiAgICB9XHJcbn1cclxuLy8gUmVTaGFycGVyIGRpc2FibGUgb25jZSBJbmNvbnNpc3RlbnROYW1pbmdcclxuY2xhc3MgT3JRdWVyeU9wZXJhdG9yIGV4dGVuZHMgRmlsdGVyVmFsdWUge1xyXG4gICAgZ2V0IGZpbHRlclZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiBcIiBvciBcIjtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQHJlYWRvbmx5XHJcbiAqL1xyXG5jb25zdCBRdWVyeU9wZXJhdG9ycyA9IHtcclxuICAgIEFuZDogbmV3IEFuZFF1ZXJ5T3BlcmF0b3IoKSxcclxuICAgIE9yOiBuZXcgT3JRdWVyeU9wZXJhdG9yKCksXHJcbn07XG5cbmNsYXNzIEVudGl0eSB7XHJcbiAgICByZWxhdGlvbiA9IFwiXCI7XHJcbiAgICBFbnRpdHlMb2dpY2FsTmFtZSA9IFwiXCI7XHJcbiAgICBFbnRpdHlTY2hlbWFOYW1lID0gXCJcIjtcclxuICAgIEVudGl0eVNldE5hbWUgPSBcIlwiO1xyXG4gICAgUHJpbWFyeUlkQXR0cmlidXRlID0gXCJcIjtcclxuICAgIFByaW1hcnlOYW1lQXR0cmlidXRlID0gXCJcIjtcclxuICAgIGNvbnN0cnVjdG9yKHJlbGF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5yZWxhdGlvbiA9IHJlbGF0aW9uO1xyXG4gICAgfVxyXG59XG5cbnZhciBPRGF0YVF1ZXJ5QnVpbGRlck1vZGU7XHJcbihmdW5jdGlvbiAoT0RhdGFRdWVyeUJ1aWxkZXJNb2RlKSB7XHJcbiAgICBPRGF0YVF1ZXJ5QnVpbGRlck1vZGVbT0RhdGFRdWVyeUJ1aWxkZXJNb2RlW1wiVW5kZWZpbmVkXCJdID0gMF0gPSBcIlVuZGVmaW5lZFwiO1xyXG4gICAgT0RhdGFRdWVyeUJ1aWxkZXJNb2RlW09EYXRhUXVlcnlCdWlsZGVyTW9kZVtcIlNlbGVjdFNpbmdsZVwiXSA9IDFdID0gXCJTZWxlY3RTaW5nbGVcIjtcclxuICAgIE9EYXRhUXVlcnlCdWlsZGVyTW9kZVtPRGF0YVF1ZXJ5QnVpbGRlck1vZGVbXCJTZWxlY3RNdWx0aXBsZVwiXSA9IDJdID0gXCJTZWxlY3RNdWx0aXBsZVwiO1xyXG59KShPRGF0YVF1ZXJ5QnVpbGRlck1vZGUgfHwgKE9EYXRhUXVlcnlCdWlsZGVyTW9kZSA9IHt9KSk7XG5cbmNsYXNzIE9EYXRhUXVlcnlCdWlsZGVyTG9naWMge1xyXG4gICAgX3F1ZXJ5UGFyYW1ldGVycztcclxuICAgIF9xdWVyeTtcclxuICAgIF9pc1ByaW1hcnlTZWxlY3RvcjtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBJbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihxdWVyeVBhcmFtZXRlcnMpIHtcclxuICAgICAgICB0aGlzLl9xdWVyeVBhcmFtZXRlcnMgPSBxdWVyeVBhcmFtZXRlcnM7XHJcbiAgICAgICAgdGhpcy5fcXVlcnkgPSB0aGlzLl9idWlsZEJhc2VRdWVyeSgpO1xyXG4gICAgICAgIHRoaXMuX2lzUHJpbWFyeVNlbGVjdG9yID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGRzIHRoZSBPRGF0YSBRdWVyeSBTdHJpbmdcclxuICAgICAqL1xyXG4gICAgYnVpbGRRdWVyeVN0cmluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5fcXVlcnlQYXJhbWV0ZXJzLmlzU2VsZWN0U2luZ2xlKCkpXHJcbiAgICAgICAgICAgIHRoaXMuX2FkZEVudGl0eUlkVG9RdWVyeSgpO1xyXG4gICAgICAgIHRoaXMuX2FkZFNlbGVjdFRvUXVlcnkoKTtcclxuICAgICAgICB0aGlzLl9hZGRFeHBhbmRlcnNUb1F1ZXJ5KCk7XHJcbiAgICAgICAgdGhpcy5fYWRkRmlsdGVyc1RvUXVlcnkoKTtcclxuICAgICAgICB0aGlzLl9hZGRPcmRlckJ5VG9RdWVyeSgpO1xyXG4gICAgICAgIHRoaXMuX2FkZFRvcFRvUXVlcnkoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnk7XHJcbiAgICB9XHJcbiAgICBfYWRkRW50aXR5SWRUb1F1ZXJ5KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9xdWVyeVBhcmFtZXRlcnMuZW50aXR5SWQgPT0gbnVsbClcclxuICAgICAgICAgICAgdGhyb3cgXCJFbnRpdHkgSWQgbm90IGF2YWlsYWJsZSBvbiBxdWVyeSBwYXJhbWFldGVyc1wiO1xyXG4gICAgICAgIGNvbnN0IGNsZWFuZWRFbnRpdHlJZCA9IHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5lbnRpdHlJZC5yZXBsYWNlKFwie1wiLCBcIlwiKS5yZXBsYWNlKFwifVwiLCBcIlwiKTtcclxuICAgICAgICB0aGlzLl9xdWVyeSArPSBgKCR7Y2xlYW5lZEVudGl0eUlkfSlgO1xyXG4gICAgfVxyXG4gICAgX2FkZFNlbGVjdFRvUXVlcnkoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9xdWVyeVBhcmFtZXRlcnMuaGFzUHJpbWFyeUF0dHJpYnV0ZXMoKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9xdWVyeSArPSBgJHt0aGlzLl9nZXROZXh0VXJsU2VsZWN0b3IoKX0kc2VsZWN0PSpgO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlbGF0aW9uQXR0cmlidXRlcyA9IHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5wcmltYXJ5QXR0cmlidXRlc1xyXG4gICAgICAgICAgICAuZmlsdGVyKGF0dHIgPT4gYXR0ci5yZWxhdGlvbiAhPSBudWxsKTtcclxuICAgICAgICBmb3IgKGNvbnN0IGF0dHIgb2YgcmVsYXRpb25BdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbE5hbWUgPSBhdHRyLnJlbGF0aW9uO1xyXG4gICAgICAgICAgICBpZiAocmVsTmFtZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5leHBhbmRlcnMuaGFzT3duUHJvcGVydHkocmVsTmFtZSkpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcXVlcnlQYXJhbWV0ZXJzLmV4cGFuZGVycy5zZXQocmVsTmFtZSwgW10pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcXVlcnlQYXJhbWV0ZXJzLmV4cGFuZGVycy5nZXQocmVsTmFtZSkucHVzaChhdHRyLnNlbGVjdG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsb2NhbEF0dHJpYnV0ZXMgPSB0aGlzLl9xdWVyeVBhcmFtZXRlcnMucHJpbWFyeUF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgLmZpbHRlcihhdHRyID0+IGF0dHIucmVsYXRpb24gPT0gbnVsbCk7XHJcbiAgICAgICAgdGhpcy5fcXVlcnkgKz0gYCR7dGhpcy5fZ2V0TmV4dFVybFNlbGVjdG9yKCl9JHNlbGVjdD1gO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9jYWxBdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3F1ZXJ5ICs9IGxvY2FsQXR0cmlidXRlc1tpXS5zZWxlY3RvcjtcclxuICAgICAgICAgICAgaWYgKGkgPCBsb2NhbEF0dHJpYnV0ZXMubGVuZ3RoIC0gMSlcclxuICAgICAgICAgICAgICAgIHRoaXMuX3F1ZXJ5ICs9IFwiLFwiO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9hZGRPcmRlckJ5VG9RdWVyeSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5oYXNPcmRlckJ5QXR0cmlidXRlcygpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgdGhpcy5fcXVlcnkgKz0gYCR7dGhpcy5fZ2V0TmV4dFVybFNlbGVjdG9yKCl9JG9yZGVyYnk9YDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5vcmRlckJ5QXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGUgPSB0aGlzLl9xdWVyeVBhcmFtZXRlcnMub3JkZXJCeUF0dHJpYnV0ZXNbaV07XHJcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgaW5zdGFuY2VvZiBPRGF0YUF0dHJpYnV0ZU9yZGVyKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcXVlcnkgKz0gYXR0cmlidXRlLmJ1aWxkT3JkZXJTdHJpbmcoKTtcclxuICAgICAgICAgICAgZWxzZSBpZiAoYXR0cmlidXRlIGluc3RhbmNlb2YgT0RhdGFBdHRyaWJ1dGVCYXNlICYmIGF0dHJpYnV0ZS5yZWxhdGlvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcXVlcnkgKz0gYXR0cmlidXRlLnNlbGVjdG9yO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9yZGVyYnkgdXNhZ2UhXCIpO1xyXG4gICAgICAgICAgICBpZiAoaSAhPT0gdGhpcy5fcXVlcnlQYXJhbWV0ZXJzLm9yZGVyQnlBdHRyaWJ1dGVzLmxlbmd0aCAtIDEpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9xdWVyeSArPSBcIixcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfYWRkRXhwYW5kZXJzVG9RdWVyeSgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5oYXNFeHBhbmRlcnMoKSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuX3F1ZXJ5ICs9IGAke3RoaXMuX2dldE5leHRVcmxTZWxlY3RvcigpfSRleHBhbmQ9YDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IE9iamVjdC5rZXlzKHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5leHBhbmRlcnMpLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlbGF0aW9uID0gT2JqZWN0LmtleXModGhpcy5fcXVlcnlQYXJhbWV0ZXJzLmV4cGFuZGVycylbaV07XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSB0aGlzLl9xdWVyeVBhcmFtZXRlcnMuZXhwYW5kZXJzLmdldChyZWxhdGlvbik7XHJcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVzICE9IG51bGwpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9xdWVyeSArPSBgJHtyZWxhdGlvbn0oJHNlbGVjdD0ke2F0dHJpYnV0ZXMuam9pbihcIixcIil9KWA7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBObyBhdHRyaWJ1dGVzIG9mIHJlbGF0aW9uICR7cmVsYXRpb259IGZvdW5kIGluIGV4cGFuZGVyIG9iamVjdGApO1xyXG4gICAgICAgICAgICBpZiAoaSA8IHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5leHBhbmRlcnMuc2l6ZSAtIDEpXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9xdWVyeSArPSBcIixcIjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfYWRkRmlsdGVyc1RvUXVlcnkoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9xdWVyeVBhcmFtZXRlcnMuaGFzRmlsdGVycygpKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5zZWxlY3Rpb25Nb2RlID09PSBPRGF0YVF1ZXJ5QnVpbGRlck1vZGUuU2VsZWN0U2luZ2xlKVxyXG4gICAgICAgICAgICB0aHJvdyBcIkNhbm5vdCBhcHBseSBmaWx0ZXJzIHdoZW4gc2VsZWN0aW5nIGEgc2luZ2xlIHJlY29yZFwiO1xyXG4gICAgICAgIHRoaXMuX3F1ZXJ5ICs9IGAke3RoaXMuX2dldE5leHRVcmxTZWxlY3RvcigpfSRmaWx0ZXI9YDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5maWx0ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5maWx0ZXJzW2ldO1xyXG4gICAgICAgICAgICB0aGlzLl9xdWVyeSArPSBmaWx0ZXIuZmlsdGVyVmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2FkZFRvcFRvUXVlcnkoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5oYXNMaW1pdCgpKVxyXG4gICAgICAgICAgICB0aGlzLl9xdWVyeSArPSBgJHt0aGlzLl9nZXROZXh0VXJsU2VsZWN0b3IoKX0kdG9wPSR7dGhpcy5fcXVlcnlQYXJhbWV0ZXJzLmxpbWl0fWA7XHJcbiAgICB9XHJcbiAgICBfZ2V0TmV4dFVybFNlbGVjdG9yKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1ByaW1hcnlTZWxlY3RvciA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pc1ByaW1hcnlTZWxlY3RvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICByZXR1cm4gXCI/XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBcIiZcIjtcclxuICAgIH1cclxuICAgIF9idWlsZEJhc2VRdWVyeSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnlQYXJhbWV0ZXJzLmVudGl0eS5FbnRpdHlTZXROYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgU3RvcmFnZSB7XHJcbiAgICBfZGI7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBpZiAod2luZG93LmluZGV4ZWREQilcclxuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvcGVuKCkge1xyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RiKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZGJSZXF1ZXN0ID0gd2luZG93LmluZGV4ZWREQi5vcGVuKFwiZHNzLWNhY2hlXCIpO1xyXG4gICAgICAgICAgICBkYlJlcXVlc3Qub25lcnJvciA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoXCJDYW4ndCBvcGVuIGluZGV4IGRiIGRhdGFiYXNlXCIpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkYlJlcXVlc3Qub25ibG9ja2VkID0gKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChcIkNhbid0IG9wZW4gaW5kZXggZGIgZGF0YWJhc2VcIik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRiUmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RiID0gZXZlbnQ/LnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRiUmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gZXZlbnQ/LnRhcmdldC5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoJ2Rzcy1jYWNoZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoJ2Rzcy1jYWNoZScsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogZmFsc2VcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIGFkZChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RiID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdHggPSB0aGlzLl9kYi50cmFuc2FjdGlvbihbJ2Rzcy1jYWNoZSddLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgICAgIGxldCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdkc3MtY2FjaGUnKTtcclxuICAgICAgICAgICAgdmFyIHB1dFJlcXVlc3QgPSBzdG9yZS5wdXQodmFsdWUsIGtleSk7XHJcbiAgICAgICAgICAgIHB1dFJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yYWdlXSBTdG9yZWQgb2JqZWN0IGluICR7a2V5fWApO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBwdXRSZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtTdG9yYWdlXSBDYW4ndCBzdG9yZSB2YWx1ZSBpbiBjYWNoZTpgLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXQoa2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RiID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdHggPSB0aGlzLl9kYi50cmFuc2FjdGlvbihbJ2Rzcy1jYWNoZSddLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgICAgIGxldCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdkc3MtY2FjaGUnKTtcclxuICAgICAgICAgICAgdmFyIGdldFJlcXVlc3QgPSBzdG9yZS5nZXQoa2V5KTtcclxuICAgICAgICAgICAgZ2V0UmVxdWVzdC5vbnN1Y2Nlc3MgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoZXZlbnQ/LnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBnZXRSZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtTdG9yYWdlXSBDYW4ndCByZXRyaWV2ZSAke2tleX0gZnJvbSBjYWNoZWAsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBkZWxldGUoa2V5KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RiID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgdHggPSB0aGlzLl9kYi50cmFuc2FjdGlvbihbJ2Rzcy1jYWNoZSddLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgICAgIGxldCBzdG9yZSA9IHR4Lm9iamVjdFN0b3JlKCdkc3MtY2FjaGUnKTtcclxuICAgICAgICAgICAgbGV0IGRlbGV0ZVJlcXVlc3QgPSBzdG9yZS5kZWxldGUoa2V5KTtcclxuICAgICAgICAgICAgZGVsZXRlUmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1N0b3JhZ2VdIERlbGV0ZWQga2V5ICR7a2V5fWApO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBkZWxldGVSZXF1ZXN0Lm9uZXJyb3IgPSAoZXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtTdG9yYWdlXSBDYW4ndCBkZWxldGUgJHtrZXl9IGZyb20gY2FjaGVgLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBjbGVhcigpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0eCA9IHRoaXMuX2RiLnRyYW5zYWN0aW9uKFsnZHNzLWNhY2hlJ10sICdyZWFkd3JpdGUnKTtcclxuICAgICAgICAgICAgbGV0IHN0b3JlID0gdHgub2JqZWN0U3RvcmUoJ2Rzcy1jYWNoZScpO1xyXG4gICAgICAgICAgICBjb25zdCBjbGVhclJlcXVlc3QgPSBzdG9yZS5jbGVhcigpO1xyXG4gICAgICAgICAgICBjbGVhclJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtTdG9yYWdlXSBDbGVhcmVkIEluZGV4ZWREQiB0YWJsZWApO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjbGVhclJlcXVlc3Qub25lcnJvciA9IChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW1N0b3JhZ2VdIENhbid0IGNsZWFyIHN0b3JhZ2VgLCBldmVudCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRGVmYXVsdENhY2hlIHtcclxuICAgIHN0b3JhZ2U7XHJcbiAgICBwZW5kaW5nT2RhdGFSZXF1ZXN0O1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gbmV3IFN0b3JhZ2UoKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdPZGF0YVJlcXVlc3QgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyB3aGV0aGVyIGEgcGVuZGluZyByZXNwb25zZSBpcyByZWdpc3RlcmVkIGZvciB0aGUgZ2l2ZW4gcmVxdWVzdFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpdGVtIFRoZSByZXF1ZXN0IGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIFRydWUgaWYgYSBwZW5kaW5nIHJlc3BvbnNlIGlzIHJlZ2lzdGVyZWRcclxuICAgICAqL1xyXG4gICAgaGFzUGVuZGluZ1Jlc3BvbnNlKGl0ZW0pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nT2RhdGFSZXF1ZXN0LmhhcyhpdGVtLmhhc2gpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBwZW5kaW5nIHJlc3BvbnNlIGZvciB0aGUgZ2l2ZW4gcmVxdWVzdFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpdGVtIFRoZSBpdGVtIGZvciB3aGljaCB0aGUgcHJvbWlzZSByZXNwb25zZSBzaG91bGQgYmUgcmV0dXJuZWRcclxuICAgICAqIEByZXR1cm5zIFRoZSBwZW5kaW5nIHJlc3BvbnNlIHByb21pc2VcclxuICAgICAqL1xyXG4gICAgZ2V0UGVuZGluZ1Jlc3BvbnNlKGl0ZW0pIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZW5kaW5nT2RhdGFSZXF1ZXN0LmdldChpdGVtLmhhc2gpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGRzIHRoZSByZXNwb25zZSBwcm9taXNlIHRvIHRoZSBwZW5kaW5nIHJlc3BvbnNlIGRpY3Rpb25hcnlcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaXRlbSBUaGUgdW5pcXVlIGlkZW50aWZpZXJcclxuICAgICAqIEBwYXJhbSBwcm9taXNlIEFzc29jaWF0ZWQgcHJvbWlzZSBvZiB0aGUgdW5pcXVlIGlkZW50aWZpZXJcclxuICAgICAqL1xyXG4gICAgcmVnaXN0ZXJQZW5kaW5nUmVxdWVzdChpdGVtLCBwcm9taXNlKSB7XHJcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtGcm9udGVuZENhY2hlXSBEZWxldGluZyBwZW5kaW5nIHJlc3BvbnNlOiBcIiR7aXRlbS5pZGVudGlmaWVyfVwiYCk7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ09kYXRhUmVxdWVzdC5kZWxldGUoaXRlbS5oYXNoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdPZGF0YVJlcXVlc3Quc2V0KGl0ZW0uaGFzaCwgcHJvbWlzZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYSBnaXZlbiBAc2VlIENhY2hlSXRlbSB0byB0aGUgQHNlZSBTZXNzaW9uU3RvcmFnZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpdGVtIFRoZSBpdGVtIHRoYXQgc2hhbGwgYmUgY2FjaGVkXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGFkZFRvQ2FjaGUoaXRlbSkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX3NldEl0ZW0oaXRlbS5oYXNoLCBpdGVtKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2hlY2tzIGlmIGEgZ2l2ZW4gQHNlZSBDYWNoZUl0ZW0gaXMgcHJlc2VudCBpbiB0aGUgc2Vzc2lvbiBzdG9yYWdlIGFuZCBpcyBub3QgZXhwaXJlZFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpdGVtIFRoZSBjYWNoZSBpdGVtXHJcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBjYWNoZSBpdGVtIGV4aXN0cyBhbmQgaXMgbm90IGV4cGlyZWQgeWV0LiBPdGhlcndpc2UgZmFsc2UuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldENhY2hlZChpdGVtKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgdGhpcy5nZXRJdGVtQnlLZXkoaXRlbS5oYXNoKTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUuZXhwaXJlT24gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZS5leHBpcmVPbiA+IGN1cnJlbnRUaW1lc3RhbXApXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYFtGcm9udGVuZENhY2hlXSBJdGVtIEV4cGlyZWQ6IFwiJHtpdGVtLmlkZW50aWZpZXJ9XCJgKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc3RvcmFnZS5kZWxldGUoaXRlbS5oYXNoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBjbGVhcigpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyBhIHZhbHVlIGZyb20gdGhlIHNlc3Npb24gc3RvcmFnZSB3aXRoIHRoZSBnaXZlbiBAc2VlIGtleVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBrZXkgVGhlIGNhY2hlIGtleVxyXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBpdGVtXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEl0ZW1CeUtleShrZXkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHRoaXMuc3RvcmFnZS5nZXQoa2V5KTtcclxuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB0aGUgc2Vzc2lvbiBzdG9yYWdlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGtleSBUaGUgY2FjaGUgaXRlbSBrZXlcclxuICAgICAqIEBwYXJhbSB2YWx1ZSBUaGUgaXRlbSB0byBjYWNoZVxyXG4gICAgICovXHJcbiAgICBhc3luYyBfc2V0SXRlbShrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zdG9yYWdlLmFkZChrZXksIHZhbHVlKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhgW0Zyb250ZW5kQ2FjaGVdIFNhdmVkIHRvIENhY2hlOiBcIiR7dmFsdWUuaWRlbnRpZmllcn1cImApO1xyXG4gICAgfVxyXG59XHJcbnZhciBjYWNoZVdpbmRvdyA9IHdpbmRvdztcclxudHJ5IHtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGNhY2hlV2luZG93LnRvcC5kZWZhdWx0RFNTQ2FjaGVJbnN0YW5jZSA9IGNhY2hlV2luZG93LnRvcC5kZWZhdWx0RFNTQ2FjaGVJbnN0YW5jZTtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGNhY2hlV2luZG93ID0gd2luZG93LnRvcDtcclxufVxyXG5jYXRjaCAoZXJyb3IpIHtcclxuICAgIC8vIHN3YWxsb3dcclxufVxyXG4vLyBXZSBuZWVkIGFuIG9iamVjdCB0aGF0IGlzIHNpbmdsZXRvbiBmb3IgUmliYm9uIGFuZCBGb3JtIGNvZGUuIFRoYXQncyB3aHkgd2UgYXJlIGF0dGFjaGluZyBpdCB0byB0aGUgd2luZG93IG9iamVjdC5cclxuaWYgKGNhY2hlV2luZG93LmRlZmF1bHREU1NDYWNoZUluc3RhbmNlID09PSB1bmRlZmluZWQpIHtcclxuICAgIGNhY2hlV2luZG93LmRlZmF1bHREU1NDYWNoZUluc3RhbmNlID0gbmV3IERlZmF1bHRDYWNoZSgpO1xyXG59XHJcbmNvbnN0IENhY2hlSW5zdGFuY2UgPSBjYWNoZVdpbmRvdy5kZWZhdWx0RFNTQ2FjaGVJbnN0YW5jZTtcblxuLyoqXHJcbiAqIEVudW0gZm9yIE9EYXRhUmVzcG9uc2UgdHlwZVxyXG4gKlxyXG4gKi9cclxudmFyIE9EYXRhUmVzcG9uc2VUeXBlcztcclxuKGZ1bmN0aW9uIChPRGF0YVJlc3BvbnNlVHlwZXMpIHtcclxuICAgIE9EYXRhUmVzcG9uc2VUeXBlc1tPRGF0YVJlc3BvbnNlVHlwZXNbXCJDcmVhdGVkRW50aXR5XCJdID0gMF0gPSBcIkNyZWF0ZWRFbnRpdHlcIjtcclxuICAgIE9EYXRhUmVzcG9uc2VUeXBlc1tPRGF0YVJlc3BvbnNlVHlwZXNbXCJSZXRyaWV2ZUVudGl0aWVzXCJdID0gMV0gPSBcIlJldHJpZXZlRW50aXRpZXNcIjtcclxuICAgIE9EYXRhUmVzcG9uc2VUeXBlc1tPRGF0YVJlc3BvbnNlVHlwZXNbXCJEZWxldGVkRW50aXR5XCJdID0gMl0gPSBcIkRlbGV0ZWRFbnRpdHlcIjtcclxuICAgIE9EYXRhUmVzcG9uc2VUeXBlc1tPRGF0YVJlc3BvbnNlVHlwZXNbXCJVcGRhdGVkRW50aXR5XCJdID0gM10gPSBcIlVwZGF0ZWRFbnRpdHlcIjtcclxuICAgIE9EYXRhUmVzcG9uc2VUeXBlc1tPRGF0YVJlc3BvbnNlVHlwZXNbXCJBc3NvY2lhdGVkRW50aXR5XCJdID0gNF0gPSBcIkFzc29jaWF0ZWRFbnRpdHlcIjtcclxuICAgIE9EYXRhUmVzcG9uc2VUeXBlc1tPRGF0YVJlc3BvbnNlVHlwZXNbXCJEaXNhc3NvY2lhdGVkRW50aXR5XCJdID0gNV0gPSBcIkRpc2Fzc29jaWF0ZWRFbnRpdHlcIjtcclxufSkoT0RhdGFSZXNwb25zZVR5cGVzIHx8IChPRGF0YVJlc3BvbnNlVHlwZXMgPSB7fSkpO1xuXG5jbGFzcyBPRGF0YVF1ZXJ5UmVzcG9uc2VNYXBwZXIge1xyXG4gICAgX3Jhd1Jlc3BvbnNlO1xyXG4gICAgX3NlbGVjdEF0dHJpYnV0ZXM7XHJcbiAgICBfc2VsZWN0aW9uTW9kZTtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbnN0YW5jZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSByYXdSZXNwb25zZSBUaGUgcmF3IG9kYXRhIHJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0QXR0cmlidXRlcyBUaGUgYXR0cmlidXRlcyByZXF1ZXN0ZWQgaW4gdGhlIHF1ZXJ5XHJcbiAgICAgKiBAcGFyYW0gc2VsZWN0aW9uTW9kZSBUaGUgc2VsZWN0aW9uIG1vZGUgdXNlZCAoU2VsZWN0U2luZ2xlfFNlbGVjdE11bHRpcGxlKVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihyYXdSZXNwb25zZSwgc2VsZWN0QXR0cmlidXRlcywgc2VsZWN0aW9uTW9kZSkge1xyXG4gICAgICAgIHRoaXMuX3Jhd1Jlc3BvbnNlID0gcmF3UmVzcG9uc2U7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0QXR0cmlidXRlcyA9IHNlbGVjdEF0dHJpYnV0ZXM7XHJcbiAgICAgICAgdGhpcy5fc2VsZWN0aW9uTW9kZSA9IHNlbGVjdGlvbk1vZGU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgdGhlIHJlc3BvbnNlLiBXb3JrcyBmb3IgW1NlbGVjdFNpbmdsZXxTZWxlY3RNdWx0aXBsZV1cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0TWFwcGVkRW50aXR5KCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9zZWxlY3Rpb25Nb2RlID09PSBPRGF0YVF1ZXJ5QnVpbGRlck1vZGUuU2VsZWN0TXVsdGlwbGUpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9yYXdSZXNwb25zZS52YWx1ZS5tYXAoKGFyZ3MpID0+IHRoaXMuX21hcEVudGl0eShhcmdzKSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21hcEVudGl0eSh0aGlzLl9yYXdSZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYSBnaXZlbiBlbnRpdHlcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZW50aXR5IFRoZSBvZGF0YSBqc29uIHJlc3BvbnNlXHJcbiAgICAgKi9cclxuICAgIF9tYXBFbnRpdHkoZW50aXR5KSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XHJcbiAgICAgICAgY29uc3QgbG9jYWxBdHRyaWJ1dGVzID0gdGhpcy5fc2VsZWN0QXR0cmlidXRlcy5maWx0ZXIoYSA9PiAhYS5yZWxhdGlvbik7XHJcbiAgICAgICAgY29uc3QgcmVsYXRpb25BdHRyaWJ1dGVzID0gdGhpcy5fc2VsZWN0QXR0cmlidXRlcy5maWx0ZXIoYSA9PiBhLnJlbGF0aW9uKTtcclxuICAgICAgICBjb25zdCBncm91cGVkUmVsYXRpb25zID0gdGhpcy5fZ3JvdXBSZWxhdGlvbnMocmVsYXRpb25BdHRyaWJ1dGVzKTtcclxuICAgICAgICB0aGlzLl9tYXBBdHRyaWJ1dGVzKGxvY2FsQXR0cmlidXRlcywgZW50aXR5LCByZXN1bHQpO1xyXG4gICAgICAgIHRoaXMuX21hcFJlbGF0aW9ucyhncm91cGVkUmVsYXRpb25zLCBlbnRpdHksIHJlc3VsdCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR3JvdXBzIHRoZSBnaXZlbiByZWxhdGlvbiBhdHRyaWJ1dGVzIGJ5IHRoZSByZWxhdGlvbiBuYW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSByZWxhdGlvbkF0dHJpYnV0ZXNcclxuICAgICAqL1xyXG4gICAgX2dyb3VwUmVsYXRpb25zKHJlbGF0aW9uQXR0cmlidXRlcykge1xyXG4gICAgICAgIGNvbnN0IGdyb3VwZWRSZWxhdGlvbnMgPSB7fTtcclxuICAgICAgICBmb3IgKGNvbnN0IGF0dHIgb2YgcmVsYXRpb25BdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgIGlmIChhdHRyLnJlbGF0aW9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZ3JvdXBlZFJlbGF0aW9uc1thdHRyLnJlbGF0aW9uXSlcclxuICAgICAgICAgICAgICAgICAgICBncm91cGVkUmVsYXRpb25zW2F0dHIucmVsYXRpb25dID0gW107XHJcbiAgICAgICAgICAgICAgICBncm91cGVkUmVsYXRpb25zW2F0dHIucmVsYXRpb25dLnB1c2goYXR0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGdyb3VwZWRSZWxhdGlvbnM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEl0ZXJhdGVzIG92ZXIgdGhlIHJlbGF0aW9ucyBhbmQgbWFwIHRoZSB1c2luZyAgQHNlZSB7X21hcFJlbGF0aW9ufVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7T2JqZWN0Ljw+fSBncm91cGVkUmVsYXRpb25zIFRoZSBncm91cGVkIHJlbGF0aW9ucyByZXR1cm5lZCBieSBAc2VlIHtfZ3JvdXBSZWxhdGlvbnN9XHJcbiAgICAgKiBAcGFyYW0geyp9IGVudGl0eSBUaGUganNvbiBvZGF0YSByZXNwb25zZVxyXG4gICAgICogQHBhcmFtIHsqfSByZXN1bHQgVGhlIG1hcHBlZCByZXN1bHQgb2JqZWN0XHJcbiAgICAgKi9cclxuICAgIF9tYXBSZWxhdGlvbnMoZ3JvdXBlZFJlbGF0aW9ucywgZW50aXR5LCByZXN1bHQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IHJlbE5hbWUgaW4gZ3JvdXBlZFJlbGF0aW9ucy5rZXlzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUxpc3QgPSBncm91cGVkUmVsYXRpb25zW3JlbE5hbWVdO1xyXG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlTGlzdCA9PSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgYFtPRGF0YVF1ZXJ5QnVpbGRlci5fbWFwUmVsYXRpb25zXSBObyBhdHRyaWJ1dGVzIGZvdW5kIGZvciByZWxhdGlvbiAke3JlbE5hbWV9YDtcclxuICAgICAgICAgICAgdGhpcy5fbWFwUmVsYXRpb24oYXR0cmlidXRlTGlzdCwgcmVsTmFtZSwgZW50aXR5LCByZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTWFwcyBhIHNpbmdsZSByZWxhdGlvbi4gV29ya3Mgd2l0aCBbT25lVG9NYW55fE1hbnlUb09uZXxNYW55VG9NYW55XSByZWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHt9IGF0dHJpYnV0ZUxpc3QgVGhlIGF0dHJpYnV0ZXMgdG8gbWFwXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsTmFtZSBUaGUgcmVsYXRpb24gbmFtZVxyXG4gICAgICogQHBhcmFtIHsqfSBlbnRpdHkgVGhlIG9kYXRhIGpzb24gcmVzcG9uc2VcclxuICAgICAqIEBwYXJhbSB7Kn0gcmVzdWx0IFRoZSBtYXBwZWQgcmVzdWx0IG9iamVjdFxyXG4gICAgICovXHJcbiAgICBfbWFwUmVsYXRpb24oYXR0cmlidXRlTGlzdCwgcmVsTmFtZSwgZW50aXR5LCByZXN1bHQpIHtcclxuICAgICAgICBjb25zdCBzb3VyY2VWYWx1ZXMgPSBlbnRpdHlbcmVsTmFtZV07XHJcbiAgICAgICAgaWYgKHNvdXJjZVZhbHVlcyBpbnN0YW5jZW9mIEFycmF5KVxyXG4gICAgICAgICAgICB0aGlzLl9tYXBNYW55VG9NYW55UmVsYXRpb25zaGlwKHJlc3VsdCwgcmVsTmFtZSwgYXR0cmlidXRlTGlzdCwgc291cmNlVmFsdWVzKTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuX21hcE9uZVRvTWFueVJlbGF0aW9uc2hpcChyZXN1bHQsIHJlbE5hbWUsIGF0dHJpYnV0ZUxpc3QsIHNvdXJjZVZhbHVlcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYSBPbmVUb01hbnkgcmVsYXRpb25zaGlwXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHsqfSByZXN1bHQgVGhlIG1hcHBlZCByZXN1bHQgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcmVsTmFtZSBUaGUgcmVsYXRpb24gbmFtZVxyXG4gICAgICogQHBhcmFtIHtBcnJheTxPRGF0YUF0dHJpYnV0ZUJhc2U+fSBhdHRyaWJ1dGVMaXN0IFRoZSBhdHRyaWJ1dGVzIHRvIG1hcFxyXG4gICAgICogQHBhcmFtIHsqfSBzb3VyY2VWYWx1ZXMgVGhlIG9kYXRhIHZhbHVlcyBmb3IgdGhpcyByZWxhdGlvblxyXG4gICAgICovXHJcbiAgICBfbWFwT25lVG9NYW55UmVsYXRpb25zaGlwKHJlc3VsdCwgcmVsTmFtZSwgYXR0cmlidXRlTGlzdCwgc291cmNlVmFsdWVzKSB7XHJcbiAgICAgICAgcmVzdWx0W3JlbE5hbWVdID0ge307XHJcbiAgICAgICAgdGhpcy5fbWFwQXR0cmlidXRlcyhhdHRyaWJ1dGVMaXN0LCBzb3VyY2VWYWx1ZXMsIHJlc3VsdC5nZXQocmVsTmFtZSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGEgTWFueVRvTWFueSByZWxhdGlvbnNoaXBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0geyp9IHJlc3VsdCBUaGUgbWFwcGVkIHJlc3VsdCBvYmplY3RcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSByZWxOYW1lIFRoZSByZWxhdGlvbiBuYW1lXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PE9EYXRhQXR0cmlidXRlQmFzZT59IGF0dHJpYnV0ZUxpc3QgVGhlIGF0dHJpYnV0ZXMgdG8gbWFwXHJcbiAgICAgKiBAcGFyYW0geyp9IHNvdXJjZVZhbHVlcyBUaGUgb2RhdGEgdmFsdWVzIGZvciB0aGlzIHJlbGF0aW9uXHJcbiAgICAgKi9cclxuICAgIF9tYXBNYW55VG9NYW55UmVsYXRpb25zaGlwKHJlc3VsdCwgcmVsTmFtZSwgYXR0cmlidXRlTGlzdCwgc291cmNlVmFsdWVzKSB7XHJcbiAgICAgICAgY29uc3QgcmVsYXRpb25zID0gbmV3IEFycmF5KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCBzb3VyY2VWYWx1ZSBvZiBzb3VyY2VWYWx1ZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVsYXRpb24gPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcEF0dHJpYnV0ZXMoYXR0cmlidXRlTGlzdCwgc291cmNlVmFsdWUsIHJlbGF0aW9uKTtcclxuICAgICAgICAgICAgcmVsYXRpb25zLnB1c2gocmVsYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXN1bHRbcmVsTmFtZV0gPSByZWxhdGlvbnM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgdGhlIGdpdmVuIGF0dHJpYnV0ZXMgb250byB0aGUgcmVzdWx0IG9iamVjdFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsb2NhbEF0dHJpYnV0ZXMgVGhlIGF0dHJpYnV0ZXMgdG8gbWFwXHJcbiAgICAgKiBAcGFyYW0gZW50aXR5IFRoZSBvZGF0YSBqc29uIHJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gcmVzdWx0IFRoZSByZXN1bHQgb2JqZWN0IHRvIHdoaWNoIHRoZSBwcm9wZXJ0aWVzIHdpbGwgYmUgbWFwcGVkXHJcbiAgICAgKi9cclxuICAgIF9tYXBBdHRyaWJ1dGVzKGxvY2FsQXR0cmlidXRlcywgZW50aXR5LCByZXN1bHQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGF0dHJpYnV0ZSBvZiBsb2NhbEF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udmVydGVkID0gdGhpcy5fY29udmVydChhdHRyaWJ1dGUsIGVudGl0eSk7XHJcbiAgICAgICAgICAgIGlmIChhdHRyaWJ1dGUgaW5zdGFuY2VvZiBQaWNrbGlzdE9EYXRhQXR0cmlidXRlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRoaXMgYmxvY2sgdG8gYmUgYmFja3dhcmRzIGNvbXBhdGlibGUhXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBSZW1vdmUgd2l0aCBuZXh0IG1ham9yIHJlbGVhc2VcclxuICAgICAgICAgICAgICAgIHJlc3VsdFtgJHthdHRyaWJ1dGUuYXR0cmlidXRlTmFtZX1fRm9ybWF0dGVkVmFsdWVgXSA9IGNvbnZlcnRlZC5uYW1lO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0W2F0dHJpYnV0ZS5hdHRyaWJ1dGVOYW1lXSA9IGNvbnZlcnRlZC52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJlc3VsdFthdHRyaWJ1dGUuYXR0cmlidXRlTmFtZV0gPSBjb252ZXJ0ZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnRzIHRoZSBnaXZlbiBhdHRyaWJ1dGUgb2YgdGhlIG9kYXRhIGVudGl0eSBpbnRvIHRoZSB0YXJnZXQgZm9ybWF0XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGF0dHJpYnV0ZSBUaGUgb2RhdGEgYXR0cmlidXRlXHJcbiAgICAgKiBAcGFyYW0gZW50aXR5IFRoZSBvZGF0YSBqc29uIGVudGl0eVxyXG4gICAgICovXHJcbiAgICBfY29udmVydChhdHRyaWJ1dGUsIGVudGl0eSkge1xyXG4gICAgICAgIGNvbnN0IG1haW5Bbm5vdGF0aW9uID0gYXR0cmlidXRlLnNlbGVjdG9yO1xyXG4gICAgICAgIGlmIChhdHRyaWJ1dGUgaW5zdGFuY2VvZiBMb29rdXBPRGF0YUF0dHJpYnV0ZSB8fFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGUgaW5zdGFuY2VvZiBPd25lck9EYXRhQXR0cmlidXRlIHx8XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZSBpbnN0YW5jZW9mIEN1c3RvbWVyT0RhdGFBdHRyaWJ1dGUpXHJcbiAgICAgICAgICAgIHJldHVybiBMb29rdXBDb252ZXJ0ZXIuY3JlYXRlQXR0cmlidXRlTG9va3VwRnJvbU9EYXRhUmVzcG9uc2UoZW50aXR5LCBtYWluQW5ub3RhdGlvbik7XHJcbiAgICAgICAgaWYgKGF0dHJpYnV0ZSBpbnN0YW5jZW9mIFBpY2tsaXN0T0RhdGFBdHRyaWJ1dGUpXHJcbiAgICAgICAgICAgIHJldHVybiBQaWNrbGlzdENvbnZlcnRlci5jcmVhdGVBdHRyaWJ1dGVMb29rdXBGcm9tT0RhdGFSZXNwb25zZShlbnRpdHksIG1haW5Bbm5vdGF0aW9uKTtcclxuICAgICAgICBpZiAoYXR0cmlidXRlIGluc3RhbmNlb2YgRGF0ZVRpbWVPRGF0YUF0dHJpYnV0ZSlcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGVudGl0eVttYWluQW5ub3RhdGlvbl0pO1xyXG4gICAgICAgIGlmIChlbnRpdHlbbWFpbkFubm90YXRpb25dICE9IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybiBlbnRpdHlbbWFpbkFubm90YXRpb25dO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIE9EYXRhUmVzcG9uc2Uge1xyXG4gICAgdHlwZTtcclxuICAgIGhlYWRlcnM7XHJcbiAgICBqc29uO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE9EYXRhUmVzcG9uc2UgY2xhc3NcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHlwZSBUaGUgb2RhdGEgcmVzcG9uc2UgdHlwZVxyXG4gICAgICogQHBhcmFtIGhlYWRlcnMgVGhlIG9kYXRhIHJlc3BvbnNlIGhlYWRlcnNcclxuICAgICAqIEBwYXJhbSBqc29uIFRoZSBqc29uIHZhbHVlIG9mIHRoZSByZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBoZWFkZXJzLCBqc29uKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzO1xyXG4gICAgICAgIHRoaXMuanNvbiA9IGpzb247XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgY3JlYXRlKHR5cGUsIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gcmVzcG9uc2UuaGVhZGVycztcclxuICAgICAgICByZXR1cm4gbmV3IE9EYXRhUmVzcG9uc2UodHlwZSwgaGVhZGVycywganNvbik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgZmV0Y2ggcmVzcG9uc2UgcmVzdWx0IGFzIGpzb25cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxPYmplY3Q+fSBUaGUgcmVzcG9uc2UganNvbiBvYmplY3RcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0SnNvbigpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuanNvbik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgbWFwcGVkIHJlc3BvbnNlIGVudGl0eVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzZWxlY3RBdHRyaWJ1dGVzIFRoZSBhdHRyaWJ1dGVzIHJlcXVlc3RlZCBpbiB0aGUgcXVlcnlcclxuICAgICAqIEBwYXJhbSBzZWxlY3Rpb25Nb2RlIFRoZSBzZWxlY3Rpb24gbW9kZSB1c2VkIChTZWxlY3RTaW5nbGV8U2VsZWN0TXVsdGlwbGUpXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgbWFwcGVkIHJlc3BvbnNlXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldE1hcHBlZChzZWxlY3RBdHRyaWJ1dGVzLCBzZWxlY3Rpb25Nb2RlKSB7XHJcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHRoaXMuZ2V0SnNvbigpO1xyXG4gICAgICAgIGNvbnN0IG1hcHBlciA9IG5ldyBPRGF0YVF1ZXJ5UmVzcG9uc2VNYXBwZXIoanNvbiwgc2VsZWN0QXR0cmlidXRlcywgc2VsZWN0aW9uTW9kZSk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IG1hcHBlci5nZXRNYXBwZWRFbnRpdHkoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW4gY2FzZSBvZiBhIENyZWF0ZWRFbnRpdHkgcmVzcG9uc2UgdGhpcyB3aWxsIHJldHVybiB0aGUgaWQgb2YgdGhlIGVudGl0eVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIHtzdHJpbmd9IFRoZSBndWlkIHdpdGhvdXQgXCJ7XCIgYW5kIFwifVwiXHJcbiAgICAgKi9cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBPRGF0YVJlc3BvbnNlVHlwZXMuQ3JlYXRlZEVudGl0eSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlIGlkIGNhbiBvbmx5IGJlIHJldHJpZXZlZCBmb3IgQ3JlYXRlZEVudGl0eSByZXNwb25zZSFcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldEVudGl0eUlkRnJvbVJlc3BvbnNlSGVhZGVyKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGVudGl0eSBpZCBmcm9tIHRoZSByZXNwb25zZSBoZWFkZXJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcmVzcG9uc2UgT2RhdGEgcmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgX2dldEVudGl0eUlkRnJvbVJlc3BvbnNlSGVhZGVyKCkge1xyXG4gICAgICAgIGNvbnN0IGhlYWRlciA9IHRoaXMuaGVhZGVycy5nZXQoXCJPRGF0YS1FbnRpdHlJZFwiKTtcclxuICAgICAgICBpZiAoaGVhZGVyID09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xyXG4gICAgICAgIGNvbnN0IHJlZ0V4cCA9IC9cXCgoW14pXSspXFwpLztcclxuICAgICAgICBjb25zdCBtYXRjaGVzID0gcmVnRXhwLmV4ZWMoaGVhZGVyKTtcclxuICAgICAgICBpZiAobWF0Y2hlcyA9PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICBMb2dnZXIubG9nKGBDcmVhdGVkIEVudGl0eSBJZDogJHttYXRjaGVzWzFdfWAsIExvZ0xldmVsLkluZm9ybWF0aW9uKTtcclxuICAgICAgICByZXR1cm4gbWF0Y2hlc1sxXTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBPRGF0YUVycm9yIHtcclxuICAgIGVycm9yO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE9EYXRhRXJyb3IgY2xhc3NcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXJyb3IgVGhlIGVycm9yIHRocm93biBmcm9tIGZldGNoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGVycm9yKSB7XHJcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgU3RyaW5nKVxyXG4gICAgICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5jbGFzcyBPRGF0YUZhaWx1cmUge1xyXG4gICAgdHlwZTtcclxuICAgIHJlc3BvbnNlO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE9EYXRhUmVzcG9uc2UgY2xhc3NcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdHlwZSBUaGUgb2RhdGEgcmVzcG9uc2UgdHlwZVxyXG4gICAgICogQHBhcmFtIHJlc3BvbnNlIFRoZSByZXNwb25zZSBmcm9tIGZldGNoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHR5cGUsIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgQ2FjaGVJdGVtIHtcclxuICAgIGV4cGlyZU9uO1xyXG4gICAgcmVzdWx0O1xyXG4gICAgaGFzaDtcclxuICAgIGlkZW50aWZpZXI7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBDYWNoZUl0ZW0gd2l0aCB0aGUgZ2l2ZW4gcGFyYW1ldGVyc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSByZXF1ZXN0IFRoZSBmZXRjaCByZXF1ZXN0XHJcbiAgICAgKiBAcGFyYW0gZXhwaXJlT24gVGhlIGNhY2hlIGV4cGlyZSB0aW1lIGluIG1zIHNpbmNlIGVwb2NoZVxyXG4gICAgICogQHBhcmFtIHJlc3VsdCBUamVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocmVxdWVzdCwgZXhwaXJlT24sIHJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMuZXhwaXJlT24gPSBleHBpcmVPbjtcclxuICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDtcclxuICAgICAgICB0aGlzLmhhc2ggPSB0aGlzLl9jYWxjdWxhdGVSZXF1ZXN0SGFzaChyZXF1ZXN0KTtcclxuICAgICAgICB0aGlzLmlkZW50aWZpZXIgPSB0aGlzLl9idWlsZElkZW50aWZpZXIocmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICBfYnVpbGRJZGVudGlmaWVyKHJlcXVlc3QpIHtcclxuICAgICAgICBpZiAocmVxdWVzdC5ib2R5ID09PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gYEhBU0g6ICR7dGhpcy5oYXNofSwgVVJMOiAke3JlcXVlc3QudXJsfWA7XHJcbiAgICAgICAgcmV0dXJuIGBIQVNIOiAke3RoaXMuaGFzaH0sIFVSTDogXCIke3JlcXVlc3QudXJsfVwiLCBEYXRhOiBcIiR7cmVxdWVzdC5ib2R5fVwiYDtcclxuICAgIH1cclxuICAgIF9jYWxjdWxhdGVSZXF1ZXN0SGFzaChyZXF1ZXN0KSB7XHJcbiAgICAgICAgbGV0IHN0ciA9IHJlcXVlc3QudXJsO1xyXG4gICAgICAgIGlmIChyZXF1ZXN0LmJvZHkgIT09IG51bGwpXHJcbiAgICAgICAgICAgIHN0ciA9IGAke3N0cn18fCR7cmVxdWVzdC5ib2R5fWA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhc2goc3RyKTtcclxuICAgIH1cclxuICAgIF9oYXNoKHZhbHVlKSB7XHJcbiAgICAgICAgbGV0IGhhc2ggPSAwO1xyXG4gICAgICAgIGxldCBpID0gdmFsdWUubGVuZ3RoO1xyXG4gICAgICAgIHdoaWxlIChpID4gMCkge1xyXG4gICAgICAgICAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgdmFsdWUuY2hhckNvZGVBdCgtLWkpIHwgMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhc2gudG9TdHJpbmcoKTtcclxuICAgIH1cclxufVxuXG4vLyBnbG9iYWwgUmVxdWVzdCwgZmV0Y2hcclxuY2xhc3MgT0RhdGFSZXF1ZXN0IHtcclxuICAgIHdlYkFwaVVybDtcclxuICAgIHN0YXRpYyBPRGF0YUFwaVZlcnNpb24gPSBcInY5LjFcIjtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIG5ldyBPRGF0YVJlcXVlc3RcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZ2xvYmFsQ29udGV4dCBUaGUgWHJtIGNvbnRleHRcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZ2xvYmFsQ29udGV4dCkge1xyXG4gICAgICAgIHRoaXMud2ViQXBpVXJsID0gYCR7Z2xvYmFsQ29udGV4dC5nZXRDbGllbnRVcmwoKX0vYXBpL2RhdGEvJHtPRGF0YVJlcXVlc3QuT0RhdGFBcGlWZXJzaW9ufS9gO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBCdWlsZHMgYSBuZXcgT0RhdGFSZXF1ZXN0XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGdsb2JhbENvbnRleHQgVGhlIFhybSBjb250ZXh0XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBidWlsZChnbG9iYWxDb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPRGF0YVJlcXVlc3QoZ2xvYmFsQ29udGV4dCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gZW50aXR5XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVudGl0eSBUaGUgZW50aXR5IG9iamVjdFxyXG4gICAgICogQHBhcmFtIHBsdXJhbEVudGl0eVNjaGVtYU5hbWUgVGhlIHBsdXJhbCBlbnRpdHkgc2NoZW1hIG5hbWVcclxuICAgICAqIEBwYXJhbSBleHBpcmVPbiBUaGUgY2FjaGUgZXhwaXJlIHRpbWUgaW4gbXMgZnJvbSBlcG9jaGVcclxuICAgICAqIEBwYXJhbSByZXR1cm5SZXByZXNlbnRhdGlvbiBJZiB0cnVlIHRoZSBjcmVhdGVkIGVudGl0eSB3aWxsIGJlIHJldHVybmVkXHJcbiAgICAgKiBAcGFyYW0gcmV0dXJuUXVlcnkgVGhlIHF1ZXJ5IHRvIGRldGVybWluZSB3aGljaCBpdGVtcyB0byByZXR1cm4gKHN0YXJ0aW5nIHdpdGggXCI/XCIpXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBhIE9EYXRhUmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgYXN5bmMgY3JlYXRlKGVudGl0eSwgcGx1cmFsRW50aXR5U2NoZW1hTmFtZSwgZXhwaXJlT24sIHJldHVyblJlcHJlc2VudGF0aW9uLCByZXR1cm5RdWVyeSkge1xyXG4gICAgICAgIGNvbnN0IGpzb25FbnRpdHkgPSBKU09OLnN0cmluZ2lmeShlbnRpdHkpO1xyXG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSB0aGlzLndlYkFwaVVybCArIHBsdXJhbEVudGl0eVNjaGVtYU5hbWUgKyByZXR1cm5RdWVyeTtcclxuICAgICAgICBsZXQgcHJlZmVyID0gXCJcIjtcclxuICAgICAgICBpZiAocmV0dXJuUmVwcmVzZW50YXRpb24pXHJcbiAgICAgICAgICAgIHByZWZlciA9IFwicmV0dXJuPXJlcHJlc2VudGF0aW9uXCI7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKCk7XHJcbiAgICAgICAgaGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xyXG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKFwiQWNjZXB0XCIsIFwiYXBwbGljYXRpb24vanNvblwiKTtcclxuICAgICAgICBoZWFkZXJzLmFwcGVuZChcIlByZWZlclwiLCBwcmVmZXIpO1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgUmVxdWVzdChjb21tYW5kLCB7XHJcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCIsXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgIGJvZHk6IGpzb25FbnRpdHksXHJcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnNcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fZ2V0Q2FjaGVkUmVzdWx0T3JFeGVjdXRlUmVxdWVzdChyZXF1ZXN0LCBPRGF0YVJlc3BvbnNlVHlwZXMuQ3JlYXRlZEVudGl0eSwgcGx1cmFsRW50aXR5U2NoZW1hTmFtZSwgZXhwaXJlT24pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZXMgZW50aXRpZXNcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcXVlcnkgVGhlIG9kYXRhIHF1ZXJ5XHJcbiAgICAgKiBAcGFyYW0gZXhwaXJlT24gVGhlIGNhY2hlIGV4cGlyZSB0aW1lIGluIG1zIGZyb20gZXBvY2hlXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBhIE9EYXRhUmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmV0cmlldmUocXVlcnksIGV4cGlyZU9uKSB7XHJcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IHRoaXMud2ViQXBpVXJsICsgcXVlcnk7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGNvbW1hbmQsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgICBQcmVmZXI6IFwib2RhdGEuaW5jbHVkZS1hbm5vdGF0aW9ucz1cXFwiKlxcXCJcIixcclxuICAgICAgICAgICAgfSksXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2dldENhY2hlZFJlc3VsdE9yRXhlY3V0ZVJlcXVlc3QocmVxdWVzdCwgT0RhdGFSZXNwb25zZVR5cGVzLlJldHJpZXZlRW50aXRpZXMsIHF1ZXJ5LCBleHBpcmVPbik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIERlbGV0ZXMgYW4gZW50aXR5IGJ5IGlkXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkIFRoZSBpZCBvZiB0aGUgZW50aXRpeSB0byBkZWxldGVcclxuICAgICAqIEBwYXJhbSBwbHVyYWxFbnRpdHlTY2hlbWFOYW1lIFRoZSBwbHVyYWwgZW50aXRpeSBzY2hlbWEgbmFtZVxyXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gYSBPRGF0YVJlc3BvbnNlXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRlbGV0ZUVudGl0eShpZCwgcGx1cmFsRW50aXR5U2NoZW1hTmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBgJHt0aGlzLndlYkFwaVVybCArIHBsdXJhbEVudGl0eVNjaGVtYU5hbWV9KCR7aWR9KWA7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjb21tYW5kLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoe1xyXG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJYLUhUVFAtTWV0aG9kXCI6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB0aGlzLl9wcm9jZXNzUmVzdWx0KHJlc3BvbnNlLCBPRGF0YVJlc3BvbnNlVHlwZXMuRGVsZXRlZEVudGl0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBPRGF0YUVycm9yKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXBkYXRlcyBhbiBlbnRpdHlcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZW50aXR5IFRoZSBlbnRpdHkgb2JqZWN0XHJcbiAgICAgKiBAcGFyYW0gaWQgVGhlIGlkIG9mIHRoZSBlbnRpdGl5IHRvIHVwZGF0ZVxyXG4gICAgICogQHBhcmFtIHBsdXJhbEVudGl0eVNjaGVtYU5hbWUgVGhlIHBsdXJhbCBlbnRpdGl5IHNjaGVtYSBuYW1lXHJcbiAgICAgKiBAcmV0dXJucyBSZXR1cm5zIGEgcHJvbWlzZSB3aGljaCByZXNvbHZlcyB0byBhIE9EYXRhUmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdXBkYXRlKGVudGl0eSwgaWQsIHBsdXJhbEVudGl0eVNjaGVtYU5hbWUpIHtcclxuICAgICAgICBjb25zdCBqc29uRW50aXR5ID0gSlNPTi5zdHJpbmdpZnkoZW50aXR5KTtcclxuICAgICAgICBjb25zdCBjb21tYW5kID0gYCR7dGhpcy53ZWJBcGlVcmwgKyBwbHVyYWxFbnRpdHlTY2hlbWFOYW1lfSgke2lkfSlgO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY29tbWFuZCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiLFxyXG4gICAgICAgICAgICAgICAgYm9keToganNvbkVudGl0eSxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcHJvY2Vzc1Jlc3VsdChyZXNwb25zZSwgT0RhdGFSZXNwb25zZVR5cGVzLlVwZGF0ZWRFbnRpdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgT0RhdGFFcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFzc29jaWF0ZSB0d28gZW50aXRpZXNcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGFyZW50SWQgVGhlIGlkIG9mIHRoZSBwYXJlbnQgZW50aXR5XHJcbiAgICAgKiBAcGFyYW0gcGx1cmFsUGFyZW50VHlwZSBUaGUgcGx1cmFsIG5hbWUgb2YgdGhlIHBhcmVudCBlbnRpdHlcclxuICAgICAqIEBwYXJhbSByZWxhdGlvbnNoaXBOYW1lIFRoZSByZWxhdGlvbnNoaXAgbmFtZVxyXG4gICAgICogQHBhcmFtIGNoaWxkSWQgVGhlIGlkIG9mIHRoZSBjaGlsZCBlbnRpdHlcclxuICAgICAqIEBwYXJhbSBwbHVyYWxDaGlsZFR5cGUgVGhlIHBsdXJhbCBuYW1lIG9mIHRoZSBjaGlsZCBlbnRpdHlcclxuICAgICAqIEByZXR1cm5zIFJldHVybnMgYSBwcm9taXNlIHdoaWNoIHJlc29sdmVzIHRvIGEgT0RhdGFSZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBhc3luYyBhc3NvY2lhdGUocGFyZW50SWQsIHBsdXJhbFBhcmVudFR5cGUsIHJlbGF0aW9uc2hpcE5hbWUsIGNoaWxkSWQsIHBsdXJhbENoaWxkVHlwZSkge1xyXG4gICAgICAgIGNvbnN0IGpzb25FbnRpdHkgPSBKU09OLnN0cmluZ2lmeSh7IFwiQG9kYXRhLmlkXCI6IGAke3RoaXMud2ViQXBpVXJsICsgcGx1cmFsQ2hpbGRUeXBlfSgke2NoaWxkSWR9KWAgfSk7XHJcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IGAke3RoaXMud2ViQXBpVXJsICsgcGx1cmFsUGFyZW50VHlwZX0oJHtwYXJlbnRJZH0pLyR7cmVsYXRpb25zaGlwTmFtZX0vJHJlZmA7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChjb21tYW5kLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcclxuICAgICAgICAgICAgICAgIGJvZHk6IGpzb25FbnRpdHksXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgQWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX3Byb2Nlc3NSZXN1bHQocmVzcG9uc2UsIE9EYXRhUmVzcG9uc2VUeXBlcy5Bc3NvY2lhdGVkRW50aXR5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IE9EYXRhRXJyb3IoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNhc3NvY2lhdGVzIHR3byBlbnRpdGllc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJlbnRJZCBUaGUgaWQgb2YgdGhlIHBhcmVudCBlbnRpdHlcclxuICAgICAqIEBwYXJhbSBwbHVyYWxQYXJlbnRUeXBlIFRoZSBwbHVyYWwgbmFtZSBvZiB0aGUgcGFyZW50IGVudGl0eVxyXG4gICAgICogQHBhcmFtIHJlbGF0aW9uc2hpcE5hbWUgVGhlIHJlbGF0aW9uc2hpcCBuYW1lXHJcbiAgICAgKiBAcGFyYW0gY2hpbGRJZCBUaGUgaWQgb2YgdGhlIGNoaWxkIGVudGl0eVxyXG4gICAgICogQHJldHVybnMgUmV0dXJucyBhIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gYSBPRGF0YVJlc3BvbnNlXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpc2Fzc29jaWF0ZShwYXJlbnRJZCwgcGx1cmFsUGFyZW50VHlwZSwgcmVsYXRpb25zaGlwTmFtZSwgY2hpbGRJZCkge1xyXG4gICAgICAgIGNvbnN0IGNvbW1hbmQgPSBgJHt0aGlzLndlYkFwaVVybCArIHBsdXJhbFBhcmVudFR5cGV9KCR7cGFyZW50SWR9KS8ke3JlbGF0aW9uc2hpcE5hbWV9KCR7Y2hpbGRJZH0pLyRyZWZgO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goY29tbWFuZCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgICAgICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHtcclxuICAgICAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgICAgICAgICAgICAgICBBY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5fcHJvY2Vzc1Jlc3VsdChyZXNwb25zZSwgT0RhdGFSZXNwb25zZVR5cGVzLkRpc2Fzc29jaWF0ZWRFbnRpdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgT0RhdGFFcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZXMgYSBmZXRjaCByZXNwb25zZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSByZXNwb25zZSBUaGUgZmV0Y2ggcmVzcG9uc2VcclxuICAgICAqIEBwYXJhbSB0eXBlIFRoZSBvZGF0YSByZXNwb25zZSB0eXBlXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgY29ycmVjdCBvZGF0YSByZXN1bHRcclxuICAgICAqL1xyXG4gICAgYXN5bmMgX3Byb2Nlc3NSZXN1bHQocmVzcG9uc2UsIHR5cGUpIHtcclxuICAgICAgICBpZiAocmVzcG9uc2Uub2spXHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBPRGF0YVJlc3BvbnNlLmNyZWF0ZSh0eXBlLCByZXNwb25zZSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IE9EYXRhRmFpbHVyZSh0eXBlLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGVzIHRoZSBnaXZlbiBmZXRjaCByZXF1ZXN0cyBhbmQgYWRkcyB0aGUgcmVzdWx0IHRvIHRoZSBjYWNoZSBpZiBhIGV4cGlyZU9uIHZhbHVlIGlzIHNldFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSByZXF1ZXN0IFRoZSBmZXRjaCByZXF1ZXN0IHRvIGV4ZWN1dGVcclxuICAgICAqIEBwYXJhbSByZXF1ZXN0VHlwZSBUaGUgcmVzcG9uc2UgdHlwZVxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQW4gaWRlbnRpZmllciBvZiB0aGUgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIGV4cGlyZU9uIFRoZSBjYWNoZSBleHBpcmUgdGltZSBpbiBtcyBzaW5jZSBlcG9jaGVcclxuICAgICAqIEByZXR1cm5zIFRoZSBPRGF0YSByZXN1bHRcclxuICAgICAqL1xyXG4gICAgYXN5bmMgX2V4ZWN1dGVSZXF1ZXN0KHJlcXVlc3QsIHJlcXVlc3RUeXBlLCBpZGVudGlmaWVyLCBleHBpcmVPbikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGZldGNoKHJlcXVlc3QudXJsLCByZXF1ZXN0KTtcclxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkUmVzdWx0ID0gYXdhaXQgdGhpcy5fcHJvY2Vzc1Jlc3VsdChyZXN1bHQsIHJlcXVlc3RUeXBlKTtcclxuICAgICAgICAgICAgaWYgKGV4cGlyZU9uICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlSXRlbSA9IG5ldyBDYWNoZUl0ZW0ocmVxdWVzdCwgZXhwaXJlT24sIHByb2Nlc3NlZFJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBDYWNoZUluc3RhbmNlLmFkZFRvQ2FjaGUoY2FjaGVJdGVtKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBbRnJvbnRlbmRDYWNoZV0gU2F2ZWQgXCIke2lkZW50aWZpZXJ9XCIgdG8gY2FjaGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvY2Vzc2VkUmVzdWx0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgT0RhdGFFcnJvcihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENoZWNrcyBpZiB0aGUgZ2l2ZW4gcmVxdWVzdCBpcyBhbHJlYWR5IGNhY2hlZC4gSWYgaXQgaXQgdGhlIGNhY2hlZCByZXN1bHQgd2lsbCBiZSByZXR1cm5lZC4gT3RoZXJ3aXNlIHRoZSByZXF1ZXN0IHdpbGwgYmUgZXhlY3V0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHJlcXVlc3QgVGhlIGZldGNoIHJlcXVlc3RfZXhlY3V0ZVJlcXVlc3RcclxuICAgICAqIEBwYXJhbSByZXF1ZXN0VHlwZSBUaGUgcmVzcG9uc2UgdHlwZVxyXG4gICAgICogQHBhcmFtIGlkZW50aWZpZXIgQW4gaWRlbnRpZmllciBvZiB0aGUgcmVxdWVzdFxyXG4gICAgICogQHBhcmFtIGV4cGlyZU9uIFRoZSBjYWNoZSBleHBpcmUgdGltZSBpbiBtcyBzaW5jZSBlcG9jaGVcclxuICAgICAqIEByZXR1cm5zIFRoZSBPRGF0YSByZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBhc3luYyBfZ2V0Q2FjaGVkUmVzdWx0T3JFeGVjdXRlUmVxdWVzdChyZXF1ZXN0LCByZXF1ZXN0VHlwZSwgaWRlbnRpZmllciwgZXhwaXJlT24pIHtcclxuICAgICAgICBpZiAoZXhwaXJlT24gPT09IHVuZGVmaW5lZClcclxuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2V4ZWN1dGVSZXF1ZXN0KHJlcXVlc3QsIHJlcXVlc3RUeXBlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBjYWNoZUl0ZW0gPSBuZXcgQ2FjaGVJdGVtKHJlcXVlc3QsIGV4cGlyZU9uKTtcclxuICAgICAgICBpZiAoQ2FjaGVJbnN0YW5jZS5oYXNQZW5kaW5nUmVzcG9uc2UoY2FjaGVJdGVtKSkge1xyXG4gICAgICAgICAgICBMb2dnZXIubG9nKGBbRnJvbnRlbmRDYWNoZV0gXCIke2lkZW50aWZpZXJ9XCIgaGFzIGEgcGVuZGluZyByZXNwb25zZS4gUmV0dXJuaW5nIFByb21pc2UhYCwgTG9nTGV2ZWwuVmVyYm9zZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBDYWNoZUluc3RhbmNlLmdldFBlbmRpbmdSZXNwb25zZShjYWNoZUl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjYWNoZWRJdGVtID0gYXdhaXQgQ2FjaGVJbnN0YW5jZS5nZXRDYWNoZWQoY2FjaGVJdGVtKTtcclxuICAgICAgICBpZiAoY2FjaGVkSXRlbT8ucmVzdWx0KSB7XHJcbiAgICAgICAgICAgIExvZ2dlci5sb2coYFtGcm9udGVuZENhY2hlXSBTZXJ2aW5nIFwiJHtpZGVudGlmaWVyfVwiIGZyb20gY2FjaGVgLCBMb2dMZXZlbC5JbmZvcm1hdGlvbik7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgT0RhdGFSZXNwb25zZShjYWNoZWRJdGVtLnJlc3VsdC50eXBlLCBjYWNoZWRJdGVtLnJlc3VsdC5oZWFkZXJzLCBjYWNoZWRJdGVtLnJlc3VsdC5qc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2V4ZWN1dGVSZXF1ZXN0KHJlcXVlc3QsIHJlcXVlc3RUeXBlLCBpZGVudGlmaWVyLCBleHBpcmVPbik7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgT0RhdGFRdWVyeVBhcmFtZXRlcnMge1xyXG4gICAgc2VsZWN0aW9uTW9kZTtcclxuICAgIGVudGl0eUlkO1xyXG4gICAgZW50aXR5O1xyXG4gICAgZXhwYW5kZXJzO1xyXG4gICAgbGltaXQ7XHJcbiAgICBwcmltYXJ5QXR0cmlidXRlcztcclxuICAgIG9yZGVyQnlBdHRyaWJ1dGVzO1xyXG4gICAgZmlsdGVycztcclxuICAgIGNvbnN0cnVjdG9yKGVudGl0eSkge1xyXG4gICAgICAgIHRoaXMuZW50aXR5ID0gZW50aXR5O1xyXG4gICAgICAgIHRoaXMuZXhwYW5kZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZSA9IE9EYXRhUXVlcnlCdWlsZGVyTW9kZS5VbmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5saW1pdCA9IDA7XHJcbiAgICAgICAgdGhpcy5wcmltYXJ5QXR0cmlidXRlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub3JkZXJCeUF0dHJpYnV0ZXMgPSBbXTtcclxuICAgICAgICB0aGlzLmZpbHRlcnMgPSBbXTtcclxuICAgIH1cclxuICAgIGlzU2VsZWN0U2luZ2xlKCkgeyByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2RlID09PSBPRGF0YVF1ZXJ5QnVpbGRlck1vZGUuU2VsZWN0U2luZ2xlOyB9XHJcbiAgICBpc1NlbGVjdE11bHRpcGxlKCkgeyByZXR1cm4gdGhpcy5zZWxlY3Rpb25Nb2RlID09PSBPRGF0YVF1ZXJ5QnVpbGRlck1vZGUuU2VsZWN0TXVsdGlwbGU7IH1cclxuICAgIGhhc1ByaW1hcnlBdHRyaWJ1dGVzKCkgeyByZXR1cm4gdGhpcy5wcmltYXJ5QXR0cmlidXRlcyBpbnN0YW5jZW9mIEFycmF5ICYmIHRoaXMucHJpbWFyeUF0dHJpYnV0ZXMubGVuZ3RoID4gMDsgfVxyXG4gICAgaGFzT3JkZXJCeUF0dHJpYnV0ZXMoKSB7IHJldHVybiB0aGlzLm9yZGVyQnlBdHRyaWJ1dGVzIGluc3RhbmNlb2YgQXJyYXkgJiYgdGhpcy5vcmRlckJ5QXR0cmlidXRlcy5sZW5ndGggPiAwOyB9XHJcbiAgICBoYXNFeHBhbmRlcnMoKSB7IHJldHVybiB0aGlzLmV4cGFuZGVycy5rZXlzLmxlbmd0aCA+IDA7IH1cclxuICAgIGhhc0ZpbHRlcnMoKSB7IHJldHVybiB0aGlzLmZpbHRlcnMgaW5zdGFuY2VvZiBBcnJheSAmJiB0aGlzLmZpbHRlcnMubGVuZ3RoID4gMDsgfVxyXG4gICAgaGFzTGltaXQoKSB7IHJldHVybiB0aGlzLmxpbWl0ICE9PSBudWxsICYmIHRoaXMubGltaXQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmxpbWl0ICE9PSAwOyB9XHJcbn1cblxuY2xhc3MgT0RhdGFRdWVyeUJ1aWxkZXIge1xyXG4gICAgX3F1ZXJ5UGFyYW1ldGVycztcclxuICAgIF9lbnRpdHlJbnN0YW5jZTtcclxuICAgIC8qKlxyXG4gICAgICogUFJJVkFURSBDT05TVFJVQ1RPUiEgVXNlIFwiT0RhdGFRdWVyeUJ1aWxkZXIuZm9yKGVudGl0eSlcIiBpbnN0ZWFkIVxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0gZW50aXR5IFRoZSBwcmltYXJ5IGVudGl0eSB0eXBlIGZvciB0aGUgcXVlcnlcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZW50aXR5KSB7XHJcbiAgICAgICAgdGhpcy5fcXVlcnlQYXJhbWV0ZXJzID0gbmV3IE9EYXRhUXVlcnlQYXJhbWV0ZXJzKGVudGl0eSk7XHJcbiAgICAgICAgdGhpcy5fZW50aXR5SW5zdGFuY2UgPSBlbnRpdHk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGVzIGEgUmV0cmlldmVBbGwgb2RhdGEgY2FsbFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBnbG9iYWxDb250ZXh0IFRoZSB4cm0gY29udGV4dFxyXG4gICAgICogQHBhcmFtIGV4cGlyZU9uIFx0XHRUaGUgY2FjaGUgZXhwaXJlIHRpbWUgaW4gbXMgZnJvbSBlcG9jaGVcclxuICAgICAqIEByZXR1cm5zIFRoZSBvZGF0YSByZXN1bHRcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZXhlY3V0ZShnbG9iYWxDb250ZXh0LCBleHBpcmVPbikge1xyXG4gICAgICAgIGlmICh0aGlzLl9xdWVyeVBhcmFtZXRlcnMuc2VsZWN0aW9uTW9kZSA9PT0gT0RhdGFRdWVyeUJ1aWxkZXJNb2RlLlVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLl9xdWVyeVBhcmFtZXRlcnMuc2VsZWN0aW9uTW9kZSA9IE9EYXRhUXVlcnlCdWlsZGVyTW9kZS5TZWxlY3RNdWx0aXBsZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgb2RhdGFSZXF1ZXN0ID0gT0RhdGFSZXF1ZXN0LmJ1aWxkKGdsb2JhbENvbnRleHQpO1xyXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5idWlsZCgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgb2RhdGFSZXF1ZXN0LnJldHJpZXZlKHF1ZXJ5LCBleHBpcmVPbik7XHJcbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmdldE1hcHBlZCh0aGlzLl9xdWVyeVBhcmFtZXRlcnMucHJpbWFyeUF0dHJpYnV0ZXMsIHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5zZWxlY3Rpb25Nb2RlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQnVpbGRzIGFuZCByZXR1cm5zIHRoZSBxdWVyeSBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgYnVpbGQoKSB7XHJcbiAgICAgICAgY29uc3QgbG9naWMgPSBuZXcgT0RhdGFRdWVyeUJ1aWxkZXJMb2dpYyh0aGlzLl9xdWVyeVBhcmFtZXRlcnMpO1xyXG4gICAgICAgIHJldHVybiBsb2dpYy5idWlsZFF1ZXJ5U3RyaW5nKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldCBTZWxlY3RTaW5nbGUgbW9kZSBhbmQgdGhlIGVudGl0eSBndWlkXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGd1aWQgVGhlIGlkIG9mIHRoZSBlbnRpdHkgdG8gcmV0cmlldmVcclxuICAgICAqL1xyXG4gICAgc2VsZWN0U2luZ2xlKGd1aWQpIHtcclxuICAgICAgICB0aGlzLl92YWxpZGF0ZVVzYWdlKE9EYXRhUXVlcnlCdWlsZGVyTW9kZS5TZWxlY3RTaW5nbGUpO1xyXG4gICAgICAgIHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5saW1pdCA9IDA7XHJcbiAgICAgICAgdGhpcy5fcXVlcnlQYXJhbWV0ZXJzLmVudGl0eUlkID0gZ3VpZDtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgZmlsdGVycyBmb3IgdGhlIHF1ZXJ5XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHdoZXJlRnVuY3Rpb24gVGhlIGZpbHRlcnMgdG8gYXBwbHkgdG8gdGhlIHF1ZXJ5XHJcbiAgICAgKiBAcmV0dXJucyBDdXJyZW50IHF1ZXJ5IGJ1aWxkZXIgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgd2hlcmUod2hlcmVGdW5jdGlvbikge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlcnMgPSB3aGVyZUZ1bmN0aW9uKHRoaXMuX2VudGl0eUluc3RhbmNlKTtcclxuICAgICAgICB0aGlzLl92YWxpZGF0ZVVzYWdlKE9EYXRhUXVlcnlCdWlsZGVyTW9kZS5TZWxlY3RNdWx0aXBsZSk7XHJcbiAgICAgICAgdGhpcy5fdmFsaWRhdGVBdHRyaWJ1dGVzSW5wdXQoZmlsdGVycywgXCJ3aGVyZVwiKTtcclxuICAgICAgICB0aGlzLl9xdWVyeVBhcmFtZXRlcnMuZmlsdGVycyA9IGZpbHRlcnM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIG1heGltdW0gYW1vdW50IG9mIGVudGl0aWVzIHRvIHJldHJpZXZlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxpbWl0IFRoZSBtYXhpbXVtIGFtb3VudCBvZiBlbnRpdGllcyB0byByZXRyaWV2ZVxyXG4gICAgICogQHJldHVybnMgQ3VycmVudCBxdWVyeSBidWlsZGVyIGluc3RhbmNlXHJcbiAgICAgKi9cclxuICAgIHRha2UobGltaXQpIHtcclxuICAgICAgICB0aGlzLl92YWxpZGF0ZVVzYWdlKE9EYXRhUXVlcnlCdWlsZGVyTW9kZS5TZWxlY3RNdWx0aXBsZSk7XHJcbiAgICAgICAgdGhpcy5fcXVlcnlQYXJhbWV0ZXJzLmxpbWl0ID0gbGltaXQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIG9yZGVyYnkgYXR0cmlidXRlc1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBvcmRlckZ1bmN0aW9uIFRoZSBhdHRyaWJ1dGVzIHVzZWQgZm9yIG9yZGVyaW5nXHJcbiAgICAgKiBAcmV0dXJucyBDdXJyZW50IHF1ZXJ5IGJ1aWxkZXIgaW5zdGFuY2VcclxuICAgICAqL1xyXG4gICAgb3JkZXJieShvcmRlckZ1bmN0aW9uKSB7XHJcbiAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IG9yZGVyRnVuY3Rpb24odGhpcy5fZW50aXR5SW5zdGFuY2UpO1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlVXNhZ2UoT0RhdGFRdWVyeUJ1aWxkZXJNb2RlLlNlbGVjdE11bHRpcGxlKTtcclxuICAgICAgICB0aGlzLl92YWxpZGF0ZUF0dHJpYnV0ZXNJbnB1dChhdHRyaWJ1dGVzLCBcIm9yZGVyYnlcIik7XHJcbiAgICAgICAgdGhpcy5fcXVlcnlQYXJhbWV0ZXJzLm9yZGVyQnlBdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgYXR0cmlidXRlcyB0byByZXRyaWV2ZVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzZWxlY3RGdW5jdGlvbiBUaGUgYXR0cmlidXRlcyB0byBzZWxlY3RcclxuICAgICAqIEByZXR1cm5zIEN1cnJlbnQgcXVlcnkgYnVpbGRlciBpbnN0YW5jZVxyXG4gICAgICovXHJcbiAgICBzZWxlY3Qoc2VsZWN0RnVuY3Rpb24pIHtcclxuICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gc2VsZWN0RnVuY3Rpb24odGhpcy5fZW50aXR5SW5zdGFuY2UpO1xyXG4gICAgICAgIHRoaXMuX3ZhbGlkYXRlQXR0cmlidXRlc0lucHV0KGF0dHJpYnV0ZXMsIFwic2VsZWN0XCIpO1xyXG4gICAgICAgIHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5wcmltYXJ5QXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBfdmFsaWRhdGVVc2FnZShzZWxlY3Rpb25Nb2RlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5zZWxlY3Rpb25Nb2RlID09PSBzZWxlY3Rpb25Nb2RlKVxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgaWYgKHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5zZWxlY3Rpb25Nb2RlID09PSBPRGF0YVF1ZXJ5QnVpbGRlck1vZGUuVW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3F1ZXJ5UGFyYW1ldGVycy5zZWxlY3Rpb25Nb2RlID0gc2VsZWN0aW9uTW9kZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBcIkl0IGlzIG5vdCBhbGxvd2VkIHRvIG1peCBtZXRob2RzIG9mIGRpZmZlcmVudCBvcGVyYXRpb24gbW9kZXMhXCI7XHJcbiAgICB9XHJcbiAgICBfdmFsaWRhdGVBdHRyaWJ1dGVzSW5wdXQocG9zc2libGVBcnJheSwgZnVuY05hbWUpIHtcclxuICAgICAgICBjb25zdCBhcnJMZW5ndGggPSB0aGlzLl9nZXRBcnJheUxlbmd0aChwb3NzaWJsZUFycmF5KTtcclxuICAgICAgICBpZiAoYXJyTGVuZ3RoIDwgMSlcclxuICAgICAgICAgICAgdGhyb3cgYEVycm9yIHdoaWxlIHVzaW5nIFF1ZXJ5QnVpbGRlcjogTWV0aG9kICcke2Z1bmNOYW1lfSgpJyBuZWVkcyBhIG5vdCBlbXB0eSBhcnJheSBhcyBpbnB1dCFgO1xyXG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBwb3NzaWJsZUFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5faXNBdHRyaWJ1dGUoaXRlbSkgJiYgIXRoaXMuX2lzRmlsdGVyKGl0ZW0pICYmICF0aGlzLl9pc09yZGVyKGl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBgRXJyb3Igd2hpbGUgdXNpbmcgUXVlcnlCdWlsZGVyOiBUaGUgaW5wdXQgYXJyYXkgb2YgJyR7ZnVuY05hbWV9KCknIGRvZXMgbm90IGNvbnRhaW4gdGhlIHJpZ2h0IHR5cGUhYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9pc0F0dHJpYnV0ZShhdHRyaWJ1dGUpIHtcclxuICAgICAgICByZXR1cm4gYXR0cmlidXRlIGluc3RhbmNlb2YgT0RhdGFBdHRyaWJ1dGVCYXNlO1xyXG4gICAgfVxyXG4gICAgX2lzRmlsdGVyKGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGUgaW5zdGFuY2VvZiBPRGF0YUF0dHJpYnV0ZUZpbHRlckJhc2UgfHxcclxuICAgICAgICAgICAgYXR0cmlidXRlIGluc3RhbmNlb2YgRmlsdGVyVmFsdWUgfHxcclxuICAgICAgICAgICAgYXR0cmlidXRlIGluc3RhbmNlb2YgRmlsdGVyR3JvdXA7XHJcbiAgICB9XHJcbiAgICBfaXNPcmRlcihhdHRyaWJ1dGUpIHtcclxuICAgICAgICByZXR1cm4gYXR0cmlidXRlIGluc3RhbmNlb2YgT0RhdGFBdHRyaWJ1dGVPcmRlcjtcclxuICAgIH1cclxuICAgIF9nZXRBcnJheUxlbmd0aChvYmopIHtcclxuICAgICAgICByZXR1cm4gb2JqPy5sZW5ndGggPyBvYmoubGVuZ3RoIDogLTE7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgcXVlcnkgYnVpbGRlciBmb3IgYSBnaXZlbiBlbnRpdHlcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgcXVlcnkgYnVpbGRlclxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZm9yKHR5cGUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9EYXRhUXVlcnlCdWlsZGVyKG5ldyB0eXBlKCkpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIE9EYXRhQ29tbWFuZFJlc3BvbnNlIHtcclxuICAgIGNvbW1hbmROYW1lO1xyXG4gICAgcGFybWV0ZXI7XHJcbiAgICByZXN1bHQ7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb21tYW5kTmFtZSwgY29tbWFuZFBhcmFtZXRlciwgY29tbWFuZFJlc3VsdCkge1xyXG4gICAgICAgIHRoaXMuY29tbWFuZE5hbWUgPSBjb21tYW5kTmFtZTtcclxuICAgICAgICB0aGlzLnBhcm1ldGVyID0gY29tbWFuZFBhcmFtZXRlcjtcclxuICAgICAgICB0aGlzLnJlc3VsdCA9IGNvbW1hbmRSZXN1bHQ7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgT0RhdGFDb21tYW5kIHtcclxuICAgIHJlcXVlc3Q7XHJcbiAgICBjb25zdHJ1Y3RvcihnbG9iYWxDb250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0ID0gbmV3IE9EYXRhUmVxdWVzdChnbG9iYWxDb250ZXh0KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlcyB0aGUgcmVzdWx0XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9oYW5kbGVSZXN1bHQocmVzcG9uc2UpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuZ2V0SnNvbigpO1xyXG4gICAgICAgIGNvbnN0IHBhcmFtSnNvbiA9IEpTT04ucGFyc2UoZGF0YS5hZHNzZl9wYXJhbWV0ZXIpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdEpzb24gPSBKU09OLnBhcnNlKGRhdGEuYWRzc2ZfcmVzdWx0KTtcclxuICAgICAgICByZXR1cm4gbmV3IE9EYXRhQ29tbWFuZFJlc3BvbnNlKGRhdGEuYWRzc2ZfY29tbWFuZG5hbWUsIHBhcmFtSnNvbiwgcmVzdWx0SnNvbik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGVzIHRoZSBjb21tYW5kIGFuZCByZXR1cm5zIHRoZSByZXN1bHRcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZXhlY3V0ZShjb21tYW5kTmFtZSwgcGFyYW1ldGVyLCBleHBpcmVPbikge1xyXG4gICAgICAgIGNvbnN0IGpzb25QYXJhbWV0ZXIgPSBKU09OLnN0cmluZ2lmeShwYXJhbWV0ZXIpO1xyXG4gICAgICAgIGNvbnN0IGVudGl0eSA9IHtcclxuICAgICAgICAgICAgYWRzc2ZfY29tbWFuZG5hbWU6IGNvbW1hbmROYW1lLFxyXG4gICAgICAgICAgICBhZHNzZl9wYXJhbWV0ZXI6IGpzb25QYXJhbWV0ZXIsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMucmVxdWVzdC5jcmVhdGUoZW50aXR5LCBcImFkc3NmX2NvbW1hbmRzXCIsIGV4cGlyZU9uLCB0cnVlLCBcIj8kc2VsZWN0PWFkc3NmX2NvbW1hbmRuYW1lLGFkc3NmX3BhcmFtZXRlcixhZHNzZl9yZXN1bHRcIik7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuX2hhbmRsZVJlc3VsdChyZXNwb25zZSk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRXhwaXJlcyB7XHJcbiAgICBzdGF0aWMgaW5EYXlzKGRheXMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q3VycmVudFRpbWVzdGFtcCgpICsgZGF5cyAqIDI0ICogNjAgKiA2MCAqIDEwMDA7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaW5Ib3Vycyhob3Vycykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRDdXJyZW50VGltZXN0YW1wKCkgKyBob3VycyAqIDYwICogNjAgKiAxMDAwO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGluTWludXRlcyhtaW51dGVzKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dldEN1cnJlbnRUaW1lc3RhbXAoKSArIG1pbnV0ZXMgKiA2MCAqIDEwMDA7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaW5TZWNvbmRzKHNlY29uZHMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q3VycmVudFRpbWVzdGFtcCgpICsgc2Vjb25kcyAqIDEwMDA7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXRNaWRuaWdodCgpIHtcclxuICAgICAgICBjb25zdCBjRGF0ZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgY29uc3QgY0RheSA9IGNEYXRlLmdldERhdGUoKTtcclxuICAgICAgICBjRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcclxuICAgICAgICBjRGF0ZS5zZXREYXRlKGNEYXkgKyAxKTtcclxuICAgICAgICByZXR1cm4gY0RhdGUuZ2V0VGltZSgpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9nZXRDdXJyZW50VGltZXN0YW1wKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBDYWNoZWRSaWJib25SdWxlRW50cnkge1xyXG4gICAgX2ZpbmlzaGVkSGFuZGxlcjtcclxuICAgIF9mdW5jdGlvbklkO1xyXG4gICAgX2lzRXhlY3V0aW5nO1xyXG4gICAgX3Jlc3VsdDtcclxuICAgIGNvbnN0cnVjdG9yKGZ1bmN0aW9uSWQsIHJlc3VsdFByb21pc2UsIGZpbmlzaGVkSGFuZGxlcikge1xyXG4gICAgICAgIHRoaXMuX2ZpbmlzaGVkSGFuZGxlciA9IGZpbmlzaGVkSGFuZGxlcjtcclxuICAgICAgICB0aGlzLl9mdW5jdGlvbklkID0gZnVuY3Rpb25JZDtcclxuICAgICAgICB0aGlzLl9pc0V4ZWN1dGluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICByZXN1bHRQcm9taXNlXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLl9zZXRSZXN1bHQocmVzdWx0KSwgZXJyb3IgPT4gdGhpcy5fc2V0RXJyb3IoZXJyb3IpKTtcclxuICAgIH1cclxuICAgIGdldCByZXN1bHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3VsdDtcclxuICAgIH1cclxuICAgIGdldCBpc0V4ZWN1dGluZygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faXNFeGVjdXRpbmc7XHJcbiAgICB9XHJcbiAgICBnZXQgZnVuY3Rpb25JZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZnVuY3Rpb25JZDtcclxuICAgIH1cclxuICAgIF9zZXRFcnJvcihlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtSaWJib25dIHJ1bGUgXCIke3RoaXMuX2Z1bmN0aW9uSWR9XCIgdGhyZXcgYW4gZXhjZXB0aW9uIWAsIGVycm9yKTtcclxuICAgICAgICB0aGlzLl9yZXN1bHQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9pc0V4ZWN1dGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2ZpbmlzaGVkSGFuZGxlcigpO1xyXG4gICAgfVxyXG4gICAgX3NldFJlc3VsdChyZXN1bHQpIHtcclxuICAgICAgICB0aGlzLl9yZXN1bHQgPSByZXN1bHQ7XHJcbiAgICAgICAgdGhpcy5faXNFeGVjdXRpbmcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9maW5pc2hlZEhhbmRsZXIoKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBDYWNoZWRSaWJib25SdWxlRXhlY3V0b3Ige1xyXG4gICAgX2VudHJpZXM7XHJcbiAgICBfcmVmcmVzaEFsbFJpYmJvbnM7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKiogQHR5cGUge0NhY2hlZFJpYmJvblJ1bGVFbnRyeVtdfSAqL1xyXG4gICAgICAgIHRoaXMuX2VudHJpZXMgPSBbXTtcclxuICAgICAgICB0aGlzLl9yZWZyZXNoQWxsUmliYm9ucyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgYWxsIGNhY2hlZCBlbmFibGUgcnVsZXNcclxuICAgICAqL1xyXG4gICAgY2xlYXJDYWNoZSgpIHtcclxuICAgICAgICB0aGlzLl9lbnRyaWVzID0gW107XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGVzIGFuIGFzeW5jIEVuYWJsZSBSdWxlIGFuZCBjYWNoZXMgdGhlIHJlc3VsdFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkeW5hbWljc0NvbnRleHQgVGhlIGR5bmFtaWNzIGNvbnRleHRcclxuICAgICAqIEBwYXJhbSBydWxlRnVuY3Rpb24gVGhlIGFzeW5jIGVuYWJsZSBydWxlIGZ1bmN0aW9uIHRvIGV4ZWN1dGVcclxuICAgICAqIEBwYXJhbSBmdW5jdGlvbklkIEFuIHVuaXF1ZSBuYW1lIGZvciB0aGUgZnVuY3Rpb25cclxuICAgICAqIEBwYXJhbSBBIHN5bmNocm9ub3VzIHByZS1jb25kaXRpb24gdGhhdCBkZXRlcm1pbmVzIGlmIHRoZSBjYWNoZSBzaG91bGQgYmUgaW52YWxpZGF0ZWQuIFJldHVybmluZyB0cnVlIGludmFsaWRhdGVzIHRoZSBjYWNoZS5cclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSB0aGUgY2FjaGVkIHJlc3VsdFxyXG4gICAgICovXHJcbiAgICBleGVjdXRlUnVsZShkeW5hbWljc0NvbnRleHQsIHJ1bGVGdW5jdGlvbiwgZnVuY3Rpb25JZCwgcHJlY29uZGl0aW9uID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAocHJlY29uZGl0aW9uID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5fZW50cmllc1xyXG4gICAgICAgICAgICAgICAgLmZpbmQoZSA9PiBlLmZ1bmN0aW9uSWQgPT09IGZ1bmN0aW9uSWQpO1xyXG4gICAgICAgICAgICBpZiAoZW50cnkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fZW50cmllcy5pbmRleE9mKGVudHJ5KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VudHJpZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBleGlzdGluZ0VudHJ5T3JOdWxsID0gdGhpcy5fZ2V0RXhpc3RpbmdFbnRyeShmdW5jdGlvbklkKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdFbnRyeU9yTnVsbCkge1xyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdFbnRyeU9yTnVsbC5yZXN1bHQpXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdFbnRyeU9yTnVsbC5yZXN1bHQ7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcmVzdWx0UHJvbWlzZSA9IHJ1bGVGdW5jdGlvbigpO1xyXG4gICAgICAgIGlmIChyZXN1bHRQcm9taXNlICYmIHR5cGVvZiByZXN1bHRQcm9taXNlLnRoZW4gIT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgZW5hYmxlIHJ1bGUgXCIke2Z1bmN0aW9uSWR9XCIgZGlkIG5vdCByZXR1cm4gYSBQcm9taXNlIWApO1xyXG4gICAgICAgIGlmICghcmVzdWx0UHJvbWlzZSlcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgZW5hYmxlIHJ1bGUgXCIke2Z1bmN0aW9uSWR9XCIgZGlkIHJldHVybiBhIG51bGwgdmFsdWUhYCk7XHJcbiAgICAgICAgY29uc3QgZW50cnkgPSB0aGlzLl9hZGRFbnRyeShkeW5hbWljc0NvbnRleHQsIGZ1bmN0aW9uSWQsIHJlc3VsdFByb21pc2UpO1xyXG4gICAgICAgIGlmIChlbnRyeS5pc0V4ZWN1dGluZyA9PT0gZmFsc2UpXHJcbiAgICAgICAgICAgIHJldHVybiBlbnRyeS5yZXN1bHQ7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2dldEV4aXN0aW5nRW50cnkoZnVuY3Rpb25JZCkge1xyXG4gICAgICAgIGNvbnN0IG1hdGNoaW5nID0gdGhpcy5fZW50cmllc1xyXG4gICAgICAgICAgICAuZmlsdGVyKGUgPT4gZS5mdW5jdGlvbklkID09PSBmdW5jdGlvbklkKTtcclxuICAgICAgICBpZiAobWF0Y2hpbmcubGVuZ3RoID4gMClcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nWzBdO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgX2FkZEVudHJ5KGR5bmFtaWNzQ29udGV4dCwgZnVuY3Rpb25JZCwgcmVzdWx0UHJvbWlzZSkge1xyXG4gICAgICAgIGNvbnN0IGVudHJ5ID0gbmV3IENhY2hlZFJpYmJvblJ1bGVFbnRyeShmdW5jdGlvbklkLCByZXN1bHRQcm9taXNlLCAoKSA9PiB0aGlzLl9oYW5kbGVQcm9taXNlUmVzdWx0KGR5bmFtaWNzQ29udGV4dCkpO1xyXG4gICAgICAgIHRoaXMuX2VudHJpZXMucHVzaChlbnRyeSk7XHJcbiAgICAgICAgcmV0dXJuIGVudHJ5O1xyXG4gICAgfVxyXG4gICAgX2hhbmRsZVByb21pc2VSZXN1bHQoZHluYW1pY3NDb250ZXh0KSB7XHJcbiAgICAgICAgY29uc3QgcGVuZGluZ0VudHJpZXMgPSB0aGlzLl9lbnRyaWVzLmZpbHRlcihlID0+IGUuaXNFeGVjdXRpbmcpO1xyXG4gICAgICAgIGlmIChwZW5kaW5nRW50cmllcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgaWYgKGR5bmFtaWNzQ29udGV4dCAmJlxyXG4gICAgICAgICAgICAgICAgZHluYW1pY3NDb250ZXh0LmZvcm1Db250ZXh0ICYmXHJcbiAgICAgICAgICAgICAgICBkeW5hbWljc0NvbnRleHQuZm9ybUNvbnRleHQudWkgJiZcclxuICAgICAgICAgICAgICAgIGR5bmFtaWNzQ29udGV4dC5mb3JtQ29udGV4dC51aS5yZWZyZXNoUmliYm9uKSB7XHJcbiAgICAgICAgICAgICAgICBkeW5hbWljc0NvbnRleHQuZm9ybUNvbnRleHQudWkucmVmcmVzaFJpYmJvbih0aGlzLl9yZWZyZXNoQWxsUmliYm9ucyk7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAod2luZG93LnRvcC5yZWZyZXNoUmliYm9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgICAgICB3aW5kb3cudG9wLnJlZnJlc2hSaWJib24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5hYmxlIHRvIHJlZnJlc2ggcmliYm9uIGFzIGZvcm1Db250ZXh0LnVpLnJlZnJlc2hSaWJib24gYW5kIHdpbmRvdy50b3AucmVmcmVzaFJpYmJvbiBhcmUgbnVsbCFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgUmliYm9uQ29udGV4dCB7XHJcbiAgICByaWJib25UeXBlO1xyXG4gICAgY29tbWFuZElkO1xyXG4gICAgcHJpbWFyeUVudGl0eVR5cGVDb2RlO1xyXG4gICAgcHJpbWFyeUVudGl0eVR5cGVOYW1lO1xyXG4gICAgZmlyc3RQcmltYXJ5RW50aXR5SWQ7XHJcbiAgICBzZWxlY3RlZEVudGl0eVR5cGVDb2RlO1xyXG4gICAgc2VsZWN0ZWRFbnRpdHlUeXBlTmFtZTtcclxuICAgIHNlbGVjdGVkRW50aXR5SWRzO1xyXG4gICAgY29tbWFuZFByb3BlcnRpZXM7XHJcbiAgICBzZWxlY3RlZENvbnRyb2w7XHJcbiAgICBwcmltYXJ5Q29udHJvbDtcclxuICAgIGNvbnN0cnVjdG9yKHJpYmJvblR5cGUsIGNvbW1hbmRJZCwgcHJpbWFyeUVudGl0eVR5cGVDb2RlLCBwcmltYXJ5RW50aXR5VHlwZU5hbWUsIGZpcnN0UHJpbWFyeUVudGl0eUlkLCBzZWxlY3RlZEVudGl0eVR5cGVDb2RlLCBzZWxlY3RlZEVudGl0eVR5cGVOYW1lLCBzZWxlY3RlZEVudGl0eUlkcywgY29tbWFuZFByb3BlcnRpZXMsIHNlbGVjdGVkQ29udHJvbCwgcHJpbWFyeUNvbnRyb2wpIHtcclxuICAgICAgICB0aGlzLnJpYmJvblR5cGUgPSByaWJib25UeXBlO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZElkID0gY29tbWFuZElkO1xyXG4gICAgICAgIHRoaXMucHJpbWFyeUVudGl0eVR5cGVDb2RlID0gcHJpbWFyeUVudGl0eVR5cGVDb2RlO1xyXG4gICAgICAgIHRoaXMucHJpbWFyeUVudGl0eVR5cGVOYW1lID0gcHJpbWFyeUVudGl0eVR5cGVOYW1lO1xyXG4gICAgICAgIHRoaXMuZmlyc3RQcmltYXJ5RW50aXR5SWQgPSBmaXJzdFByaW1hcnlFbnRpdHlJZDtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkRW50aXR5VHlwZUNvZGUgPSBzZWxlY3RlZEVudGl0eVR5cGVDb2RlO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRFbnRpdHlUeXBlTmFtZSA9IHNlbGVjdGVkRW50aXR5VHlwZU5hbWU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZEVudGl0eUlkcyA9IHNlbGVjdGVkRW50aXR5SWRzO1xyXG4gICAgICAgIHRoaXMuY29tbWFuZFByb3BlcnRpZXMgPSBjb21tYW5kUHJvcGVydGllcztcclxuICAgICAgICB0aGlzLnNlbGVjdGVkQ29udHJvbCA9IHNlbGVjdGVkQ29udHJvbDtcclxuICAgICAgICB0aGlzLnByaW1hcnlDb250cm9sID0gcHJpbWFyeUNvbnRyb2w7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgUmliYm9uQ29udHJhY3RCYXNlIHtcclxuICAgIGNhY2hlZFJpYmJvblJ1bGVFeGVjdXRvcjtcclxuICAgIF9yZWdpc3RlcmVkQWN0aW9ucztcclxuICAgIF9yZWdpc3RlcmVkUnVsZXM7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLmNhY2hlZFJpYmJvblJ1bGVFeGVjdXRvciA9IG5ldyBDYWNoZWRSaWJib25SdWxlRXhlY3V0b3IoKTtcclxuICAgICAgICB0aGlzLl9yZWdpc3RlcmVkQWN0aW9ucyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLl9yZWdpc3RlcmVkUnVsZXMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGVzIGEgUmliYm9uIFJ1bGVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1JpYmJvbkNvbnRleHR9IHJpYmJvbkNvbnRleHRcclxuICAgICAqIEBwYXJhbSB7RHluYW1pY3NDb250ZXh0fSBkeW5hbWljc0NvbnRleHRcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBleGVjdXRlUnVsZUludGVybmFsKHJpYmJvbkNvbnRleHQsIGR5bmFtaWNzQ29udGV4dCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZ2lzdGVyZWRSdWxlTmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLl9yZWdpc3RlcmVkUnVsZXMpO1xyXG4gICAgICAgICAgICBjb25zdCBjb21tYW5kTmFtZSA9IHJpYmJvbkNvbnRleHQuY29tbWFuZElkPy50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiByZWdpc3RlcmVkUnVsZU5hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09IGNvbW1hbmROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGVNYXRjaGluZ1J1bGUocmliYm9uQ29udGV4dCwgZHluYW1pY3NDb250ZXh0LCBrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIExvZ2dlci5sb2coYFJpYmJvbjogUnVsZSAke3JpYmJvbkNvbnRleHQuY29tbWFuZElkfSBpcyBub3QgcmVnaXN0ZXJlZCFgLCBMb2dMZXZlbC5FcnJvcik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIExvZ2dlci5sb2coZXgsIExvZ0xldmVsLkVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRXhlY3V0ZXMgYSBzaW5nbGUgbWF0Y2hpbmcgcnVsZVxyXG4gICAgICovXHJcbiAgICBfZXhlY3V0ZU1hdGNoaW5nUnVsZShyaWJib25Db250ZXh0LCBkeW5hbWljc0NvbnRleHQsIGtleSkge1xyXG4gICAgICAgIExvZ2dlci5sb2coYFtSaWJib25dIEV4ZWN1dGluZyBydWxlIFwiJHtyaWJib25Db250ZXh0LmNvbW1hbmRJZH1cImApO1xyXG4gICAgICAgIGlmIChyaWJib25Db250ZXh0LmNvbW1hbmRJZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIExvZ2dlci5sb2coYFtSaWJib25dIENvbW1hbmQgaWQgaXMgbnVsbC4gRXhpdGluZy5cImApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJ1bGUgPSB0aGlzLl9yZWdpc3RlcmVkUnVsZXMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKHJ1bGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBMb2dnZXIubG9nKGBbUmliYm9uXSBObyBydWxlIGZvdW5kIGZvciBrZXkgXCIke2tleX0uIFJldHVybmluZyBmYWxzZS5cImApO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByZWNvbmRpdGlvbnMgPSBydWxlLnByZWNvbmRpdGlvbiAhPT0gdW5kZWZpbmVkXHJcbiAgICAgICAgICAgID8gcnVsZS5wcmVjb25kaXRpb24ocmliYm9uQ29udGV4dCkgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKHJ1bGUudXNlQ2FjaGUpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvbWlzZUZ1bmN0aW9uID0gKCgpID0+IHJ1bGUuYWN0aW9uKHJpYmJvbkNvbnRleHQpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkUmliYm9uUnVsZUV4ZWN1dG9yXHJcbiAgICAgICAgICAgICAgICAuZXhlY3V0ZVJ1bGUoZHluYW1pY3NDb250ZXh0LCBwcm9taXNlRnVuY3Rpb24sIHJpYmJvbkNvbnRleHQuY29tbWFuZElkLCBwcmVjb25kaXRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi8gKHJ1bGUuYWN0aW9uKHJpYmJvbkNvbnRleHQpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRXhlY3V0ZXMgYSBSaWJib24gQWN0aW9uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHJpYmJvbkNvbnRleHQgVGhlIHJpYmJvbiBjb250ZXh0XHJcbiAgICAgKiBAcmV0dXJucyB7Kn1cclxuICAgICAqL1xyXG4gICAgZXhlY3V0ZUFjdGlvbkludGVybmFsKHJpYmJvbkNvbnRleHQpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZWdpc3RlcmVkQWN0aW9uTmFtZXMgPSBPYmplY3Qua2V5cyh0aGlzLl9yZWdpc3RlcmVkQWN0aW9ucyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmROYW1lID0gcmliYm9uQ29udGV4dC5jb21tYW5kSWQ/LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHJlZ2lzdGVyZWRBY3Rpb25OYW1lcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleS50b0xvd2VyQ2FzZSgpID09PSBjb21tYW5kTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIExvZ2dlci5sb2coYFtSaWJib25dIEV4ZWN1dGluZyBhY3Rpb25cIiR7cmliYm9uQ29udGV4dC5jb21tYW5kSWR9XCJgLCBMb2dMZXZlbC5WZXJib3NlKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVnaXN0ZXJlZEFjdGlvbnMuZ2V0KGtleSkocmliYm9uQ29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgTG9nZ2VyLmxvZyhgW1JpYmJvbl0gQWN0aW9uICR7cmliYm9uQ29udGV4dC5jb21tYW5kSWR9IGlzIG5vdCByZWdpc3RlcmVkIWAsIExvZ0xldmVsLkVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgIExvZ2dlci5sb2coZXgsIExvZ0xldmVsLkVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgUmliYm9uQ29udHJvbGxlckJhc2Uge1xyXG4gICAgZHluYW1pY3NDb250ZXh0O1xyXG4gICAgY2FjaGVkUmliYm9uUnVsZUV4ZWN1dG9yO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFJpYmJvbkNvbnRyb2xsZXJCYXNlIGluc3RhbmNlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGR5bmFtaWNzQ29udGV4dFxyXG4gICAgICogQHBhcmFtIGNhY2hlZFJpYmJvblJ1bGVFeGVjdXRvclxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihkeW5hbWljc0NvbnRleHQsIGNhY2hlZFJpYmJvblJ1bGVFeGVjdXRvcikge1xyXG4gICAgICAgIHRoaXMuZHluYW1pY3NDb250ZXh0ID0gZHluYW1pY3NDb250ZXh0O1xyXG4gICAgICAgIHRoaXMuY2FjaGVkUmliYm9uUnVsZUV4ZWN1dG9yID0gY2FjaGVkUmliYm9uUnVsZUV4ZWN1dG9yO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIFJ1bGVEZWZpbml0aW9uIHtcclxuICAgIF91c2VDYWNoZSA9IGZhbHNlO1xyXG4gICAgX3ByZUNvbmRpdGlvbjtcclxuICAgIF9hY3Rpb247XHJcbiAgICBnZXQgdXNlQ2FjaGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZUNhY2hlO1xyXG4gICAgfVxyXG4gICAgc2V0IHVzZUNhY2hlKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlQ2FjaGUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGdldCBwcmVjb25kaXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZUNvbmRpdGlvbjtcclxuICAgIH1cclxuICAgIHNldCBwcmVjb25kaXRpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9wcmVDb25kaXRpb24gPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGdldCBhY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGlvbjtcclxuICAgIH1cclxuICAgIHNldCBhY3Rpb24odmFsdWUpIHtcclxuICAgICAgICB0aGlzLl9hY3Rpb24gPSB2YWx1ZTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBFeGVjdXRpb25Db250ZXh0TW9jayB7XHJcbiAgICBfZ2xvYmFsQ29udGV4dDtcclxuICAgIF9mb3JtQ29udGV4dDtcclxuICAgIGNvbnN0cnVjdG9yKGdsb2JhbENvbnRleHQsIGZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgdGhpcy5fZ2xvYmFsQ29udGV4dCA9IGdsb2JhbENvbnRleHQ7XHJcbiAgICAgICAgdGhpcy5fZm9ybUNvbnRleHQgPSBmb3JtQ29udGV4dDtcclxuICAgIH1cclxuICAgIGdldENvbnRleHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dsb2JhbENvbnRleHQ7XHJcbiAgICB9XHJcbiAgICBnZXRGb3JtQ29udGV4dCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybUNvbnRleHQ7XHJcbiAgICB9XHJcbiAgICBnZXREZXB0aCgpIHtcclxuICAgICAgICByZXR1cm4gMDtcclxuICAgIH1cclxuICAgIGdldEV2ZW50U291cmNlKCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBnZXRTaGFyZWRWYXJpYWJsZShrZXkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgc2V0U2hhcmVkVmFyaWFibGUoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgSXRlbUNvbGxlY3Rpb24ge1xyXG4gICAgX2FycmF5O1xyXG4gICAgY29uc3RydWN0b3IoYXJyYXkpIHtcclxuICAgICAgICB0aGlzLl9hcnJheSA9IGFycmF5O1xyXG4gICAgfVxyXG4gICAgZ2V0KGlucHV0KSB7XHJcbiAgICAgICAgaWYgKGlucHV0ID09PSB1bmRlZmluZWQgfHwgaW5wdXQgPT09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcnJheTtcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0ID09PSBcIm51bWJlclwiKVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXJyYXlbaW5wdXRdO1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgbGV0IGl0ZW1zID0gdGhpcy5fYXJyYXkuZmlsdGVyKChhKSA9PiAoKHR5cGVvZiBhLmdldE5hbWUgPT09IFwiZnVuY3Rpb25cIikgJiYgYS5nZXROYW1lKCkgPT09IGlucHV0KVxyXG4gICAgICAgICAgICAgICAgfHwgKCh0eXBlb2YgYS5nZXRLZXkgPT09IFwiZnVuY3Rpb25cIikgJiYgYS5nZXRLZXkoKSA9PT0gaW5wdXQpKTtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW1zLmxlbmd0aCA+IDAgPyBpdGVtc1swXSA6IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaChkZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2FycmF5LmZvckVhY2goZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgZ2V0TGVuZ3RoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9hcnJheS5sZW5ndGg7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBpbXBsZW1lbnRzIHtYcm0uQ29udHJvbHMuU3RhbmRhcmRDb250cm9sfVxyXG4gKiBAaW1wbGVtZW50cyB7WHJtLkNvbnRyb2xzLkNvbnRyb2x9XHJcbiAqIEBpbXBsZW1lbnRzIHtYcm0uQ29udHJvbHMuVWlMYWJlbEVsZW1lbnR9XHJcbiAqIEBpbXBsZW1lbnRzIHtYcm0uQ29udHJvbHMuVWlDYW5HZXRWaXNpYmxlRWxlbWVudH1cclxuICogQGltcGxlbWVudHMge1hybS5Db250cm9scy5VaUNhblNldFZpc2libGVFbGVtZW50fVxyXG4gKi9cclxuY2xhc3MgQ29udHJvbE1vY2sge1xyXG4gICAgX2NvbnRyb2xUeXBlO1xyXG4gICAgX25hbWU7XHJcbiAgICBfbGFiZWw7XHJcbiAgICBfdmlzaWJsZTtcclxuICAgIF9kaXNhYmxlZDtcclxuICAgIF9jb250cm9sTm90aWZpY2F0aW9ucztcclxuICAgIF9ub3RpZmljYXRpb25zO1xyXG4gICAgYXR0cmlidXRlO1xyXG4gICAgcGFyZW50O1xyXG4gICAgY29uc3RydWN0b3IoYXR0cmlidXRlKSB7XHJcbiAgICAgICAgdGhpcy5fY29udHJvbFR5cGUgPSBcInN0YW5kYXJkXCI7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IFwidGVzdF9jb250cm9sXCI7XHJcbiAgICAgICAgdGhpcy5fbGFiZWwgPSBcInRlc3RfY29udHJvbFwiO1xyXG4gICAgICAgIHRoaXMuX3Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZTtcclxuICAgICAgICB0aGlzLl9jb250cm9sTm90aWZpY2F0aW9ucyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX25vdGlmaWNhdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICBnZXRWaXNpYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl92aXNpYmxlO1xyXG4gICAgfVxyXG4gICAgc2V0VmlzaWJsZSh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuX3Zpc2libGUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHNldERpc2FibGVkKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIGdldERpc2FibGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcclxuICAgIH1cclxuICAgIGdldENvbnRyb2xUeXBlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250cm9sVHlwZTtcclxuICAgIH1cclxuICAgIGdldE5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XHJcbiAgICB9XHJcbiAgICBnZXRQYXJlbnQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50O1xyXG4gICAgfVxyXG4gICAgZ2V0TGFiZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhYmVsO1xyXG4gICAgfVxyXG4gICAgc2V0TGFiZWwobGFiZWwpIHtcclxuICAgICAgICB0aGlzLl9sYWJlbCA9IGxhYmVsO1xyXG4gICAgfVxyXG4gICAgYWRkTm90aWZpY2F0aW9uKG5vdGlmaWNhdGlvbikge1xyXG4gICAgICAgIGlmICghdGhpcy5fY29udHJvbE5vdGlmaWNhdGlvbnMuaW5jbHVkZXMobm90aWZpY2F0aW9uKSlcclxuICAgICAgICAgICAgdGhpcy5fY29udHJvbE5vdGlmaWNhdGlvbnMucHVzaChub3RpZmljYXRpb24pO1xyXG4gICAgfVxyXG4gICAgY2xlYXJOb3RpZmljYXRpb24odW5pcXVlSWQpIHtcclxuICAgICAgICB0aGlzLl9ub3RpZmljYXRpb25zLmNsZWFyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBzZXROb3RpZmljYXRpb24obWVzc2FnZSwgdW5pcXVlSWQpIHtcclxuICAgICAgICB0aGlzLl9ub3RpZmljYXRpb25zLnNldCh1bmlxdWVJZCwgbWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBzZXRGb2N1cygpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBnZXRBdHRyaWJ1dGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEF0dHJpYnV0ZU1vY2sge1xyXG4gICAgX25hbWU7XHJcbiAgICBfYXR0cmlidXRlRm9ybWF0O1xyXG4gICAgX2F0dHJpYnV0ZVR5cGU7XHJcbiAgICBfaXNEaXJ0eTtcclxuICAgIF9yZXF1aXJlZExldmVsO1xyXG4gICAgX3N1Ym1pdE1vZGU7XHJcbiAgICBfdmFsdWU7XHJcbiAgICBfcHJpdmlsZWdlO1xyXG4gICAgX2FkZFByZVNlYXJjaDtcclxuICAgIF9pc1ZhbGlkO1xyXG4gICAgX2V2ZW50SGFuZGxlcnM7XHJcbiAgICBjb250cm9scztcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZURhdGEpIHtcclxuICAgICAgICBjb25zdCB7IG5hbWUgPSBcIm5vX25hbWVcIiwgZm9ybWF0ID0gXCJ0ZXh0XCIsIGluaXRpYWxWYWx1ZSA9IG51bGwsIGlzRGlydHkgPSBmYWxzZSwgcmVxdWlyZWRMZXZlbCA9IFwibm9uZVwiLCBzdWJtaXRNb2RlID0gXCJkaXJ0eVwiLCB0eXBlID0gXCJzdHJpbmdcIiwgaXNWYWxpZCA9IGZhbHNlLCBjb250cm9scyA9IFtdLCBwcml2aWxlZ2UgPSB7XHJcbiAgICAgICAgICAgIGNhbkNyZWF0ZTogdHJ1ZSxcclxuICAgICAgICAgICAgY2FuUmVhZDogdHJ1ZSxcclxuICAgICAgICAgICAgY2FuVXBkYXRlOiB0cnVlLFxyXG4gICAgICAgIH0sIH0gPSBhdHRyaWJ1dGVEYXRhO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2F0dHJpYnV0ZUZvcm1hdCA9IGZvcm1hdDtcclxuICAgICAgICB0aGlzLl9hdHRyaWJ1dGVUeXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLl9pc0RpcnR5ID0gaXNEaXJ0eTtcclxuICAgICAgICB0aGlzLl9yZXF1aXJlZExldmVsID0gcmVxdWlyZWRMZXZlbDtcclxuICAgICAgICB0aGlzLl9zdWJtaXRNb2RlID0gc3VibWl0TW9kZTtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IGluaXRpYWxWYWx1ZTtcclxuICAgICAgICB0aGlzLl9wcml2aWxlZ2UgPSBwcml2aWxlZ2U7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZCA9IGlzVmFsaWQ7XHJcbiAgICAgICAgdGhpcy5fZXZlbnRIYW5kbGVycyA9IFtdO1xyXG4gICAgICAgIGNvbnRyb2xzLmZvckVhY2goYyA9PiBjLmF0dHJpYnV0ZSA9IHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY29udHJvbHMgPSBuZXcgSXRlbUNvbGxlY3Rpb24oY29udHJvbHMpO1xyXG4gICAgfVxyXG4gICAgYWRkT25DaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIGlmICghdGhpcy5fZXZlbnRIYW5kbGVycy5pbmNsdWRlcyhoYW5kbGVyKSlcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlT25DaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fZXZlbnRIYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKVxyXG4gICAgICAgICAgICB0aGlzLl9ldmVudEhhbmRsZXJzLnNsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICAgIGZpcmVPbkNoYW5nZSgpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgdGhpcy5fZXZlbnRIYW5kbGVycylcclxuICAgICAgICAgICAgaGFuZGxlcihudWxsKTtcclxuICAgIH1cclxuICAgIGdldEF0dHJpYnV0ZVR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F0dHJpYnV0ZVR5cGU7XHJcbiAgICB9XHJcbiAgICBnZXRGb3JtYXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F0dHJpYnV0ZUZvcm1hdDtcclxuICAgIH1cclxuICAgIGdldElzRGlydHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGlydHk7XHJcbiAgICB9XHJcbiAgICBnZXROYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0UGFyZW50KCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVxdWlyZWRMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWlyZWRMZXZlbDtcclxuICAgIH1cclxuICAgIGdldFN1Ym1pdE1vZGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N1Ym1pdE1vZGU7XHJcbiAgICB9XHJcbiAgICBnZXRVc2VyUHJpdmlsZWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wcml2aWxlZ2U7XHJcbiAgICB9XHJcbiAgICBzZXRSZXF1aXJlZExldmVsKHJlcXVpcmVtZW50TGV2ZWwpIHtcclxuICAgICAgICB0aGlzLl9yZXF1aXJlZExldmVsID0gcmVxdWlyZW1lbnRMZXZlbDtcclxuICAgIH1cclxuICAgIHNldFN1Ym1pdE1vZGUoc3VibWl0TW9kZSkge1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdE1vZGUgPSBzdWJtaXRNb2RlO1xyXG4gICAgfVxyXG4gICAgZ2V0VmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xyXG4gICAgfVxyXG4gICAgc2V0VmFsdWUodmFsdWUpIHtcclxuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuX3ZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzRGlydHkgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmZpcmVPbkNoYW5nZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFkZFByZVNlYXJjaCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWRkUHJlU2VhcmNoO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlTmV3Q29udHJvbCgpIHtcclxuICAgICAgICBjb25zdCBjb250ciA9IG5ldyBDb250cm9sTW9jayh0aGlzKTtcclxuICAgICAgICBjb250ci5zZXRMYWJlbChgJHt0aGlzLl9uYW1lfV9jb250cm9sYCk7XHJcbiAgICAgICAgdGhpcy5jb250cm9scy5fYXJyYXkucHVzaChjb250cik7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyO1xyXG4gICAgfVxyXG4gICAgc2V0SXNWYWxpZChpc1ZhbGlkLCBtZXNzYWdlKSB7XHJcbiAgICAgICAgdGhpcy5faXNWYWxpZCA9IGlzVmFsaWQ7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgTG9va3VwQ29udHJvbE1vY2sgZXh0ZW5kcyBDb250cm9sTW9jayB7XHJcbiAgICBhZGRPbkxvb2t1cFRhZ0NsaWNrKGhhbmRsZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIHJlbW92ZU9uTG9va3VwVGFnQ2xpY2soaGFuZGxlcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgYWRkUHJlU2VhcmNoKGhhbmRsZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIGFkZEN1c3RvbUZpbHRlcihmaWx0ZXIsIGVudGl0eUxvZ2ljYWxOYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBhZGRDdXN0b21WaWV3KHZpZXdJZCwgZW50aXR5TmFtZSwgdmlld0Rpc3BsYXlOYW1lLCBmZXRjaFhtbCwgbGF5b3V0WG1sLCBpc0RlZmF1bHQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIGdldERlZmF1bHRWaWV3KCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlUHJlU2VhcmNoKGhhbmRsZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIHNldERlZmF1bHRWaWV3KHZpZXdHdWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBnZXRFbnRpdHlUeXBlcygpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIHNldEVudGl0eVR5cGVzKGVudGl0eUxvZ2ljYWxOYW1lcykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgZ2V0QXR0cmlidXRlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmF0dHJpYnV0ZTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBMb29rdXBBdHRyaWJ1dGVNb2NrIGV4dGVuZHMgQXR0cmlidXRlTW9jayB7XHJcbiAgICBjb250cm9scztcclxuICAgIGNvbnN0cnVjdG9yKGF0dHJpYnV0ZURhdGEpIHtcclxuICAgICAgICBzdXBlcihhdHRyaWJ1dGVEYXRhKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzID0gbmV3IEl0ZW1Db2xsZWN0aW9uKFtdKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZU5ld0NvbnRyb2woKSB7XHJcbiAgICAgICAgY29uc3QgY29udHIgPSBuZXcgTG9va3VwQ29udHJvbE1vY2sodGhpcyk7XHJcbiAgICAgICAgY29udHIuc2V0TGFiZWwoYCR7dGhpcy5nZXROYW1lKCl9X2NvbnRyb2xgKTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzLl9hcnJheS5wdXNoKGNvbnRyKTtcclxuICAgICAgICByZXR1cm4gY29udHI7XHJcbiAgICB9XHJcbiAgICBnZXRJc1BhcnR5TGlzdCgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgT3B0aW9uU2V0Q29udHJvbE1vY2sgZXh0ZW5kcyBDb250cm9sTW9jayB7XHJcbiAgICBhZGRPcHRpb24ob3B0aW9uLCBpbmRleCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgY2xlYXJPcHRpb25zKCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlT3B0aW9uKHZhbHVlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBnZXRBdHRyaWJ1dGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIE9wdGlvblNldEF0dHJpYnV0ZU1vY2sgZXh0ZW5kcyBBdHRyaWJ1dGVNb2NrIHtcclxuICAgIF9mb3JtYXQ7XHJcbiAgICBfaW5pdGlhbFZhbHVlO1xyXG4gICAgY29udHJvbHM7XHJcbiAgICBvcHRpb25zO1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICAgIHN1cGVyKGRhdGEpO1xyXG4gICAgICAgIGNvbnN0IHsgaW5pdGlhbFZhbHVlID0gMCwgZm9ybWF0ID0gXCJsYW5ndWFnZVwiLCB9ID0gZGF0YTtcclxuICAgICAgICB0aGlzLmNvbnRyb2xzID0gbmV3IEl0ZW1Db2xsZWN0aW9uKFtdKTtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBbXTtcclxuICAgICAgICB0aGlzLl9pbml0aWFsVmFsdWUgPSBpbml0aWFsVmFsdWU7XHJcbiAgICAgICAgdGhpcy5fZm9ybWF0ID0gZm9ybWF0O1xyXG4gICAgfVxyXG4gICAgZ2V0SW5pdGlhbFZhbHVlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pbml0aWFsVmFsdWU7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb24oaW5wdXQpIHtcclxuICAgICAgICBsZXQgdmFsdWVzO1xyXG4gICAgICAgIGlmICh0eXBlb2YgaW5wdXQgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgdmFsdWVzID0gdGhpcy5vcHRpb25zLmZpbHRlcihvID0+IG8udmFsdWUgPT09IGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgIHZhbHVlcyA9IHRoaXMub3B0aW9ucy5maWx0ZXIobyA9PiBvLnRleHQgPT09IGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlcyAmJiB2YWx1ZXMubGVuZ3RoICYmIHZhbHVlcy5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgID8gdmFsdWVzWzBdXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH1cclxuICAgIGdldE9wdGlvbnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucztcclxuICAgIH1cclxuICAgIGdldFNlbGVjdGVkT3B0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmdldE9wdGlvbih0aGlzLmdldFZhbHVlKCkpO1xyXG4gICAgfVxyXG4gICAgZ2V0VGV4dCgpIHtcclxuICAgICAgICBjb25zdCBjT3B0aW9uID0gdGhpcy5nZXRTZWxlY3RlZE9wdGlvbigpO1xyXG4gICAgICAgIGlmIChjT3B0aW9uID09PSBudWxsKVxyXG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgICAgICByZXR1cm4gY09wdGlvbi50ZXh0O1xyXG4gICAgfVxyXG4gICAgYWRkT25DaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIHN1cGVyLmFkZE9uQ2hhbmdlKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlT25DaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIHN1cGVyLnJlbW92ZU9uQ2hhbmdlKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0Rm9ybWF0KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtYXQ7XHJcbiAgICB9XHJcbiAgICBjcmVhdGVOZXdDb250cm9sKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRyID0gbmV3IE9wdGlvblNldENvbnRyb2xNb2NrKHRoaXMpO1xyXG4gICAgICAgIGNvbnRyLnNldExhYmVsKGAke3RoaXMuZ2V0TmFtZSgpfV9jb250cm9sYCk7XHJcbiAgICAgICAgdGhpcy5jb250cm9scy5fYXJyYXkucHVzaChjb250cik7XHJcbiAgICAgICAgcmV0dXJuIGNvbnRyO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEZvcm1Db250ZXh0RW50aXR5TW9jayB7XHJcbiAgICBfbW9ja0RhdGE7XHJcbiAgICBfcHJpbWFyeUF0dHJpYnV0ZU5hbWU7XHJcbiAgICBfaXNEaXJ0eTtcclxuICAgIF9pZDtcclxuICAgIF9sb2dpY2FsTmFtZTtcclxuICAgIF9jaGFuZ2VIYW5kbGVycztcclxuICAgIF9wb3N0U2F2ZUV2ZW50cztcclxuICAgIGF0dHJpYnV0ZXM7XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2NrRGF0YSkge1xyXG4gICAgICAgIHRoaXMuX21vY2tEYXRhID0gbW9ja0RhdGE7XHJcbiAgICAgICAgdGhpcy5fcHJpbWFyeUF0dHJpYnV0ZU5hbWUgPSBcImlkXCI7XHJcbiAgICAgICAgdGhpcy5faXNEaXJ0eSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2lkID0gR3VpZC5nZW5lcmF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2xvZ2ljYWxOYW1lID0gXCJhY2NvdW50XCI7XHJcbiAgICAgICAgdGhpcy5fY2hhbmdlSGFuZGxlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLl9wb3N0U2F2ZUV2ZW50cyA9IFtdO1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IChuZXcgSXRlbUNvbGxlY3Rpb24odGhpcy5fbW9ja0RhdGEuYXR0cmlidXRlcykpO1xyXG4gICAgfVxyXG4gICAgYWRkT25TYXZlKGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2NoYW5nZUhhbmRsZXJzLmluY2x1ZGVzKGhhbmRsZXIpKVxyXG4gICAgICAgICAgICB0aGlzLl9jaGFuZ2VIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlT25TYXZlKGhhbmRsZXIpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2NoYW5nZUhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDApXHJcbiAgICAgICAgICAgIHRoaXMuX2NoYW5nZUhhbmRsZXJzLnNsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICAgIGFkZE9uUG9zdFNhdmUoaGFuZGxlcikge1xyXG4gICAgICAgIGlmICghdGhpcy5fcG9zdFNhdmVFdmVudHMuaW5jbHVkZXMoaGFuZGxlcikpXHJcbiAgICAgICAgICAgIHRoaXMuX3Bvc3RTYXZlRXZlbnRzLnB1c2goaGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBmaXJlT25DaGFuZ2UoZXZlbnQpIHtcclxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgdGhpcy5fY2hhbmdlSGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgaGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0RGF0YVhtbCgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIGdldEVudGl0eU5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ2ljYWxOYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0RW50aXR5UmVmZXJlbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkOiB0aGlzLl9pZCxcclxuICAgICAgICAgICAgZW50aXR5VHlwZTogdGhpcy5fbG9naWNhbE5hbWUsXHJcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdldElkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcclxuICAgIH1cclxuICAgIGdldElzRGlydHkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGlydHk7XHJcbiAgICB9XHJcbiAgICBnZXRQcmltYXJ5QXR0cmlidXRlVmFsdWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByaW1hcnlBdHRyaWJ1dGVOYW1lO1xyXG4gICAgfVxyXG4gICAgaXNWYWxpZCgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHNhdmUoc2F2ZU1vZGUpIHtcclxuICAgICAgICB0aGlzLmZpcmVPbkNoYW5nZShudWxsKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBGb3JtQ29udGV4dERhdGFQcm9jZXNzTW9jayB7XHJcbiAgICBfbW9ja0RhdGE7XHJcbiAgICBfYWN0aXZlUHJvY2VzcztcclxuICAgIF9wcm9jZXNzSW5zdGFuY2VJZDtcclxuICAgIF9hY3RpdmVTdGFnZTtcclxuICAgIF9hY3RpdmVQYXRoO1xyXG4gICAgX3NlbGVjdGVkU3RhZ2U7XHJcbiAgICBfb25Qcm9jZXNzU3RhdHVzQ2hhbmdlSGFuZGxlcnM7XHJcbiAgICBfb25TdGFnZUNoYW5nZUhhbmRsZXJzO1xyXG4gICAgX29uU3RhZ2VTZWxlY3RlZEhhbmRsZXJzO1xyXG4gICAgX29uUHJlUHJvY2Vzc1N0YXR1c0NoYW5nZUhhbmRsZXJzO1xyXG4gICAgX2luc3RhbmNlSWQ7XHJcbiAgICBfc3RhdHVzO1xyXG4gICAgX29uUHJlU3RhZ2VDaGFuZ2VIYW5kbGVycztcclxuICAgIGNvbnN0cnVjdG9yKG1vY2tEYXRhKSB7XHJcbiAgICAgICAgdGhpcy5fbW9ja0RhdGEgPSBtb2NrRGF0YTtcclxuICAgICAgICB0aGlzLl9vblByZVN0YWdlQ2hhbmdlSGFuZGxlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLl9vblByZVByb2Nlc3NTdGF0dXNDaGFuZ2VIYW5kbGVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMuX29uUHJvY2Vzc1N0YXR1c0NoYW5nZUhhbmRsZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5fb25TdGFnZUNoYW5nZUhhbmRsZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5fb25TdGFnZVNlbGVjdGVkSGFuZGxlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLl9pbnN0YW5jZUlkID0gR3VpZC5nZW5lcmF0ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0QWN0aXZlUHJvY2VzcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlUHJvY2VzcztcclxuICAgIH1cclxuICAgIHNldEFjdGl2ZVByb2Nlc3MocHJvY2Vzc0lkLCBjYWxsYmFja0Z1bmN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fYWN0aXZlUHJvY2VzcyA9IHtcclxuICAgICAgICAgICAgZ2V0SWQoKSB7IHJldHVybiBwcm9jZXNzSWQ7IH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoY2FsbGJhY2tGdW5jdGlvbilcclxuICAgICAgICAgICAgY2FsbGJhY2tGdW5jdGlvbihcInN1Y2Nlc3NcIik7XHJcbiAgICB9XHJcbiAgICBnZXRQcm9jZXNzSW5zdGFuY2VzKGNhbGxiYWNrRnVuY3Rpb24pIHtcclxuICAgICAgICBpZiAoY2FsbGJhY2tGdW5jdGlvbilcclxuICAgICAgICAgICAgY2FsbGJhY2tGdW5jdGlvbihudWxsKTtcclxuICAgIH1cclxuICAgIHNldEFjdGl2ZVByb2Nlc3NJbnN0YW5jZShwcm9jZXNzSW5zdGFuY2VJZCwgY2FsbGJhY2tGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuX3Byb2Nlc3NJbnN0YW5jZUlkID0gcHJvY2Vzc0luc3RhbmNlSWQ7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrRnVuY3Rpb24pXHJcbiAgICAgICAgICAgIGNhbGxiYWNrRnVuY3Rpb24oXCJzdWNjZXNzXCIpO1xyXG4gICAgfVxyXG4gICAgZ2V0QWN0aXZlU3RhZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZVN0YWdlO1xyXG4gICAgfVxyXG4gICAgc2V0QWN0aXZlU3RhZ2Uoc3RhZ2VJZCwgY2FsbGJhY2tGdW5jdGlvbikge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2ZVN0YWdlID0ge1xyXG4gICAgICAgICAgICBnZXRJZCgpIHsgcmV0dXJuIHN0YWdlSWQ7IH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChjYWxsYmFja0Z1bmN0aW9uKVxyXG4gICAgICAgICAgICBjYWxsYmFja0Z1bmN0aW9uKFwic3VjY2Vzc1wiKTtcclxuICAgIH1cclxuICAgIGdldEFjdGl2ZVBhdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZVBhdGg7XHJcbiAgICB9XHJcbiAgICBzZXRBY3RpdmVQYXRoKHN0YWdlcykge1xyXG4gICAgICAgIHRoaXMuX2FjdGl2ZVBhdGggPSBuZXcgSXRlbUNvbGxlY3Rpb24oc3RhZ2VzKTtcclxuICAgIH1cclxuICAgIGdldEVuYWJsZWRQcm9jZXNzZXMoY2FsbGJhY2tGdW5jdGlvbikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgZ2V0U2VsZWN0ZWRTdGFnZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWRTdGFnZTtcclxuICAgIH1cclxuICAgIHNldFNlbGVjdGVkU3RhZ2Uoc3RhZ2VJZCwgZXZlbnQpIHtcclxuICAgICAgICB0aGlzLl9zZWxlY3RlZFN0YWdlID0ge1xyXG4gICAgICAgICAgICBnZXRJZCgpIHsgcmV0dXJuIHN0YWdlSWQ7IH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZmlyZU9uQ2hhbmdlQ29udGV4dEhhbmRsZXJzKHRoaXMuX29uU3RhZ2VTZWxlY3RlZEhhbmRsZXJzLCBldmVudCk7XHJcbiAgICB9XHJcbiAgICBhZGRPblByZVByb2Nlc3NTdGF0dXNDaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fb25QcmVQcm9jZXNzU3RhdHVzQ2hhbmdlSGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcclxuICAgICAgICBpZiAoaW5kZXggPCAwKVxyXG4gICAgICAgICAgICB0aGlzLl9vblByZVByb2Nlc3NTdGF0dXNDaGFuZ2VIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgYWRkT25QcmVTdGFnZUNoYW5nZShoYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9vblByZVN0YWdlQ2hhbmdlSGFuZGxlcnMuaW5jbHVkZXMoaGFuZGxlcikpXHJcbiAgICAgICAgICAgIHRoaXMuX29uUHJlU3RhZ2VDaGFuZ2VIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgYWRkT25Qcm9jZXNzU3RhdHVzQ2hhbmdlKGhhbmRsZXIpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX29uUHJvY2Vzc1N0YXR1c0NoYW5nZUhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XHJcbiAgICAgICAgaWYgKGluZGV4IDwgMClcclxuICAgICAgICAgICAgdGhpcy5fb25Qcm9jZXNzU3RhdHVzQ2hhbmdlSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGFkZE9uU3RhZ2VDaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fb25TdGFnZUNoYW5nZUhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XHJcbiAgICAgICAgaWYgKGluZGV4IDwgMClcclxuICAgICAgICAgICAgdGhpcy5fb25TdGFnZUNoYW5nZUhhbmRsZXJzLnB1c2goaGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBhZGRPblN0YWdlU2VsZWN0ZWQoaGFuZGxlcikge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fb25TdGFnZVNlbGVjdGVkSGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcclxuICAgICAgICBpZiAoaW5kZXggPCAwKVxyXG4gICAgICAgICAgICB0aGlzLl9vblN0YWdlU2VsZWN0ZWRIYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlT25QcmVQcm9jZXNzU3RhdHVzQ2hhbmdlKGhhbmRsZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJIYW5kbGVycyBjYW4ndCBiZSByZW1vdmVkIGhlcmUuXCIpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlT25QcmVTdGFnZUNoYW5nZShoYW5kbGVyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICByZW1vdmVPblByb2Nlc3NTdGF0dXNDaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkhhbmRsZXJzIGNhbid0IGJlIHJlbW92ZWQgaGVyZS5cIik7XHJcbiAgICB9XHJcbiAgICByZW1vdmVPblN0YWdlQ2hhbmdlKGhhbmRsZXIpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX29uU3RhZ2VDaGFuZ2VIYW5kbGVycy5pbmRleE9mKGhhbmRsZXIpO1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwKVxyXG4gICAgICAgICAgICB0aGlzLl9vblN0YWdlQ2hhbmdlSGFuZGxlcnMuc2xpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlT25TdGFnZVNlbGVjdGVkKGhhbmRsZXIpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX29uU3RhZ2VTZWxlY3RlZEhhbmRsZXJzLmluZGV4T2YoaGFuZGxlcik7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDApXHJcbiAgICAgICAgICAgIHRoaXMuX29uU3RhZ2VTZWxlY3RlZEhhbmRsZXJzLnNsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICAgIG1vdmVOZXh0KGNhbGxiYWNrRnVuY3Rpb24pIHtcclxuICAgICAgICBpZiAoY2FsbGJhY2tGdW5jdGlvbilcclxuICAgICAgICAgICAgY2FsbGJhY2tGdW5jdGlvbihcInN1Y2Nlc3NcIik7XHJcbiAgICB9XHJcbiAgICBtb3ZlUHJldmlvdXMoY2FsbGJhY2tGdW5jdGlvbikge1xyXG4gICAgICAgIGlmIChjYWxsYmFja0Z1bmN0aW9uKVxyXG4gICAgICAgICAgICBjYWxsYmFja0Z1bmN0aW9uKFwic3VjY2Vzc1wiKTtcclxuICAgIH1cclxuICAgIGdldEluc3RhbmNlSWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luc3RhbmNlSWQ7XHJcbiAgICB9XHJcbiAgICBnZXRJbnN0YW5jZU5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiVGVzdCBJbnN0YW5jZSBOYW1lXCI7XHJcbiAgICB9XHJcbiAgICBnZXRTdGF0dXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgIH1cclxuICAgIHNldFN0YXR1cyhzdGF0dXMsIGNhbGxiYWNrRnVuY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrRnVuY3Rpb24pXHJcbiAgICAgICAgICAgIGNhbGxiYWNrRnVuY3Rpb24oXCJmaW5pc2hlZFwiIC8qIEZpbmlzaGVkICovKTtcclxuICAgIH1cclxuICAgIGZpcmVPbkNoYW5nZUNvbnRleHRIYW5kbGVycyhoYW5kbGVycywgZSkge1xyXG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xyXG4gICAgICAgICAgICBoYW5kbGVyKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZpcmVPbkNoYW5nZVByb2Nlc3NIYW5kbGVycyhoYW5kbGVycywgZSkge1xyXG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlciBvZiBoYW5kbGVycykge1xyXG4gICAgICAgICAgICBoYW5kbGVyKGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5jbGFzcyBGb3JtQ29udGV4dERhdGFNb2NrIHtcclxuICAgIF9tb2NrRGF0YTtcclxuICAgIGF0dHJpYnV0ZXM7XHJcbiAgICBlbnRpdHk7XHJcbiAgICBwcm9jZXNzO1xyXG4gICAgY29uc3RydWN0b3IobW9ja0RhdGEpIHtcclxuICAgICAgICB0aGlzLl9tb2NrRGF0YSA9IG1vY2tEYXRhO1xyXG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IG5ldyBJdGVtQ29sbGVjdGlvbih0aGlzLl9tb2NrRGF0YS5hdHRyaWJ1dGVzKTtcclxuICAgICAgICB0aGlzLmVudGl0eSA9IG5ldyBGb3JtQ29udGV4dEVudGl0eU1vY2sodGhpcy5fbW9ja0RhdGEpO1xyXG4gICAgICAgIHRoaXMucHJvY2VzcyA9IG5ldyBGb3JtQ29udGV4dERhdGFQcm9jZXNzTW9jayh0aGlzLl9tb2NrRGF0YSk7XHJcbiAgICB9XHJcbiAgICBhZGRPbkxvYWQoaGFuZGxlcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgZ2V0SXNEaXJ0eSgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIGlzVmFsaWQoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICByZW1vdmVPbkxvYWQoaGFuZGxlcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG4gICAgcmVmcmVzaChzYXZlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gcmVzb2x2ZSh1bmRlZmluZWQpKTtcclxuICAgIH1cclxuICAgIHNhdmUoc2F2ZU9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiByZXNvbHZlKHVuZGVmaW5lZCkpO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEZvb3RlclNlY3Rpb25Nb2NrIHtcclxuICAgIGlzVmlzaWJsZTtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGdldFZpc2libGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWaXNpYmxlO1xyXG4gICAgfVxyXG4gICAgc2V0VmlzaWJsZShib29sKSB7XHJcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBib29sO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEhlYWRlclNlY3Rpb25Nb2NrIHtcclxuICAgIGlzQm9keVZpc2libGU7XHJcbiAgICBpc0NvbW1hbmRCYXJWaXNpYmxlO1xyXG4gICAgaXNUYWJOYXZpZ2F0b3JWaXNpYmxlO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5pc0JvZHlWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmlzQ29tbWFuZEJhclZpc2libGUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaXNUYWJOYXZpZ2F0b3JWaXNpYmxlID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGdldEJvZHlWaXNpYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQm9keVZpc2libGU7XHJcbiAgICB9XHJcbiAgICBzZXRCb2R5VmlzaWJsZShib29sKSB7XHJcbiAgICAgICAgdGhpcy5pc0JvZHlWaXNpYmxlID0gYm9vbDtcclxuICAgIH1cclxuICAgIGdldENvbW1hbmRCYXJWaXNpYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmlzQ29tbWFuZEJhclZpc2libGU7XHJcbiAgICB9XHJcbiAgICBzZXRDb21tYW5kQmFyVmlzaWJsZShib29sKSB7XHJcbiAgICAgICAgdGhpcy5pc0NvbW1hbmRCYXJWaXNpYmxlID0gYm9vbDtcclxuICAgIH1cclxuICAgIGdldFRhYk5hdmlnYXRvclZpc2libGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNUYWJOYXZpZ2F0b3JWaXNpYmxlO1xyXG4gICAgfVxyXG4gICAgc2V0VGFiTmF2aWdhdG9yVmlzaWJsZShib29sKSB7XHJcbiAgICAgICAgdGhpcy5pc1RhYk5hdmlnYXRvclZpc2libGUgPSBib29sO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEZvcm1Db250ZXh0VUlNb2NrIHtcclxuICAgIF9tb2NrRGF0YTtcclxuICAgIHByb2Nlc3M7XHJcbiAgICBmb3JtU2VsZWN0b3I7XHJcbiAgICBuYXZpZ2F0aW9uO1xyXG4gICAgcXVpY2tGb3JtcztcclxuICAgIGNvbnRyb2xzO1xyXG4gICAgdGFicztcclxuICAgIGZvcm1UeXBlO1xyXG4gICAgZm9vdGVyU2VjdGlvbjtcclxuICAgIGhlYWRlclNlY3Rpb247XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2NrRGF0YSkge1xyXG4gICAgICAgIHRoaXMuX21vY2tEYXRhID0gbW9ja0RhdGE7XHJcbiAgICAgICAgdGhpcy5mb3JtVHlwZSA9IHRoaXMuX21vY2tEYXRhLmZvcm1UeXBlO1xyXG4gICAgICAgIHRoaXMuZm9ybVNlbGVjdG9yID0gbmV3IEZvcm1TZWxlY3Rvck1vY2soKTtcclxuICAgICAgICB0aGlzLnRhYnMgPSBuZXcgSXRlbUNvbGxlY3Rpb24odGhpcy5fbW9ja0RhdGEudGFicyk7XHJcbiAgICAgICAgdGhpcy5jb250cm9scyA9IG5ldyBJdGVtQ29sbGVjdGlvbih0aGlzLl9tb2NrRGF0YS5jb250cm9scyk7XHJcbiAgICAgICAgdGhpcy5mb290ZXJTZWN0aW9uID0gbmV3IEZvb3RlclNlY3Rpb25Nb2NrKCk7XHJcbiAgICAgICAgdGhpcy5oZWFkZXJTZWN0aW9uID0gbmV3IEhlYWRlclNlY3Rpb25Nb2NrKCk7XHJcbiAgICB9XHJcbiAgICBjbGVhckZvcm1Ob3RpZmljYXRpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICB9XHJcbiAgICBnZXRGb3JtVHlwZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtVHlwZTtcclxuICAgIH1cclxuICAgIHNldEZvcm1UeXBlKHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JtVHlwZSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgZ2V0Vmlld1BvcnRIZWlnaHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIDUwMDtcclxuICAgIH1cclxuICAgIGdldFZpZXdQb3J0V2lkdGgoKSB7XHJcbiAgICAgICAgcmV0dXJuIDUwMDtcclxuICAgIH1cclxuICAgIHJlZnJlc2hSaWJib24oKSB7XHJcbiAgICB9XHJcbiAgICBzZXRGb3JtTm90aWZpY2F0aW9uKG1lc3NhZ2UsIGxldmVsLCB1bmlxdWVJZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBGb3JtU2VsZWN0b3JNb2NrIHtcclxuICAgIF9jdXJyZW50Rm9ybUl0ZW07XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50Rm9ybUl0ZW0gPSBuZXcgRm9ybUl0ZW1Nb2NrKCk7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IG5ldyBJdGVtQ29sbGVjdGlvbihbXSk7XHJcbiAgICB9XHJcbiAgICBnZXRDdXJyZW50SXRlbSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudEZvcm1JdGVtO1xyXG4gICAgfVxyXG4gICAgc2V0Q3VycmVudEl0ZW0oZm9ybUl0ZW0pIHtcclxuICAgICAgICB0aGlzLl9jdXJyZW50Rm9ybUl0ZW0gPSBmb3JtSXRlbTtcclxuICAgIH1cclxuICAgIGl0ZW1zO1xyXG59XHJcbmNsYXNzIEZvcm1JdGVtTW9jayB7XHJcbiAgICBzZXRWaXNpYmxlKGlzVmlzaWJsZSkge1xyXG4gICAgfVxyXG4gICAgZ2V0SWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgICBnZXRMYWJlbCgpIHtcclxuICAgICAgICByZXR1cm4gXCJcIjtcclxuICAgIH1cclxuICAgIG5hdmlnYXRlKCkge1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEZvcm1Db250ZXh0TW9jayB7XHJcbiAgICBfbW9ja0RhdGE7XHJcbiAgICBkYXRhO1xyXG4gICAgdWk7XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2NrRGF0YSkge1xyXG4gICAgICAgIHRoaXMuX21vY2tEYXRhID0gbW9ja0RhdGE7XHJcbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IEZvcm1Db250ZXh0RGF0YU1vY2sodGhpcy5fbW9ja0RhdGEpO1xyXG4gICAgICAgIHRoaXMudWkgPSBuZXcgRm9ybUNvbnRleHRVSU1vY2sodGhpcy5fbW9ja0RhdGEpO1xyXG4gICAgfVxyXG4gICAgZ2V0QXR0cmlidXRlKGlucHV0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5hdHRyaWJ1dGVzLmdldChpbnB1dCk7XHJcbiAgICB9XHJcbiAgICBnZXRDb250cm9sKGlucHV0KSB7XHJcbiAgICAgICAgaWYgKGlucHV0ID09PSB1bmRlZmluZWQgfHwgaW5wdXQgPT09IG51bGwpXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tb2NrRGF0YS5jb250cm9scztcclxuICAgICAgICBpZiAodHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiKVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPbmx5IGF0dHJpYnV0ZSBuYW1lIGFsbG93ZWRcIik7XHJcbiAgICAgICAgY29uc3QgeyBjb250cm9scyB9ID0gdGhpcy5fbW9ja0RhdGE7XHJcbiAgICAgICAgZm9yIChjb25zdCBjb250IG9mIGNvbnRyb2xzKSB7XHJcbiAgICAgICAgICAgIGlmIChjb250LmF0dHJpYnV0ZS5jb250cm9scy5nZXQoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxuXG5jbGFzcyBTZWN0aW9uTW9jayB7XHJcbiAgICBjb250cm9scztcclxuICAgIF9uYW1lO1xyXG4gICAgX3Zpc2libGU7XHJcbiAgICBfbGFiZWw7XHJcbiAgICBwYXJlbnQ7XHJcbiAgICBjb25zdHJ1Y3RvcihzZWN0aW9uRGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgbmFtZSA9IFwibm9fbmFtZVwiLCBwYXJlbnQgPSBudWxsLCBjb250cm9scyA9IFtdLCB9ID0gc2VjdGlvbkRhdGE7XHJcbiAgICAgICAgdGhpcy5jb250cm9scyA9IG5ldyBJdGVtQ29sbGVjdGlvbihjb250cm9scyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgdGhpcy5jb250cm9scy5mb3JFYWNoKGMgPT4gYy5wYXJlbnQgPSB0aGlzKTtcclxuICAgIH1cclxuICAgIHNldFZpc2libGUodmlzaWJsZSkge1xyXG4gICAgICAgIHRoaXMuX3Zpc2libGUgPSB2aXNpYmxlO1xyXG4gICAgfVxyXG4gICAgZ2V0VmlzaWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdmlzaWJsZSB8fCBmYWxzZTtcclxuICAgIH1cclxuICAgIGdldExhYmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sYWJlbCB8fCBcIlwiO1xyXG4gICAgfVxyXG4gICAgc2V0TGFiZWwobGFiZWwpIHtcclxuICAgICAgICB0aGlzLl9sYWJlbCA9IGxhYmVsO1xyXG4gICAgfVxyXG4gICAgZ2V0TmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuICAgIGdldFBhcmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgVGFiTW9jayB7XHJcbiAgICBzZWN0aW9ucztcclxuICAgIF9kaXNwbGF5U3RhdGU7XHJcbiAgICBfbmFtZTtcclxuICAgIF9wYXJlbnQ7XHJcbiAgICBfY2hhbmdlSGFuZGxlcnM7XHJcbiAgICBfdmlzaWJsZTtcclxuICAgIF9sYWJlbDtcclxuICAgIGNvbnN0cnVjdG9yKHRhYkRhdGEpIHtcclxuICAgICAgICBjb25zdCB7IG5hbWUgPSBcIm5vX25hbWVcIiwgZGlzcGxheVN0YXRlID0gXCJleHBhbmRlZFwiLCBwYXJlbnQgPSBudWxsLCBzZWN0aW9ucyA9IFtdLCB9ID0gdGFiRGF0YTtcclxuICAgICAgICB0aGlzLnNlY3Rpb25zID0gbmV3IEl0ZW1Db2xsZWN0aW9uKHNlY3Rpb25zKTtcclxuICAgICAgICB0aGlzLl9jaGFuZ2VIYW5kbGVycyA9IG5ldyBBcnJheSgpO1xyXG4gICAgICAgIHRoaXMuX3Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9sYWJlbCA9IFwiXCI7XHJcbiAgICAgICAgdGhpcy5fZGlzcGxheVN0YXRlID0gZGlzcGxheVN0YXRlO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLnNlY3Rpb25zLmZvckVhY2goYyA9PiBjLnBhcmVudCA9IHRoaXMpO1xyXG4gICAgfVxyXG4gICAgYWRkVGFiU3RhdGVDaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9jaGFuZ2VIYW5kbGVycy5pbmNsdWRlcyhoYW5kbGVyKSlcclxuICAgICAgICAgICAgdGhpcy5fY2hhbmdlSGFuZGxlcnMucHVzaChoYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGdldERpc3BsYXlTdGF0ZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGlzcGxheVN0YXRlO1xyXG4gICAgfVxyXG4gICAgZ2V0TmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuICAgIGdldFBhcmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlVGFiU3RhdGVDaGFuZ2UoaGFuZGxlcikge1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5fY2hhbmdlSGFuZGxlcnMuaW5kZXhPZihoYW5kbGVyKTtcclxuICAgICAgICBpZiAoaW5kZXggPj0gMClcclxuICAgICAgICAgICAgdGhpcy5fY2hhbmdlSGFuZGxlcnMuc2xpY2UoaW5kZXgsIDEpO1xyXG4gICAgfVxyXG4gICAgc2V0RGlzcGxheVN0YXRlKGRpc3BsYXlTdGF0ZSkge1xyXG4gICAgICAgIHRoaXMuX2Rpc3BsYXlTdGF0ZSA9IGRpc3BsYXlTdGF0ZTtcclxuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZXIgb2YgdGhpcy5fY2hhbmdlSGFuZGxlcnMpIHtcclxuICAgICAgICAgICAgaGFuZGxlcihudWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzZXRWaXNpYmxlKHZpc2libGUpIHtcclxuICAgICAgICB0aGlzLl92aXNpYmxlID0gdmlzaWJsZTtcclxuICAgIH1cclxuICAgIGdldFZpc2libGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Zpc2libGU7XHJcbiAgICB9XHJcbiAgICBnZXRMYWJlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbGFiZWw7XHJcbiAgICB9XHJcbiAgICBzZXRMYWJlbChsYWJlbCkge1xyXG4gICAgICAgIHRoaXMuX2xhYmVsID0gbGFiZWw7XHJcbiAgICB9XHJcbiAgICBzZXRGb2N1cygpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgQ2xpZW50Q29udGV4dE1vY2sge1xyXG4gICAgZ2V0Q2xpZW50KCkge1xyXG4gICAgICAgIHJldHVybiBcIldlYlwiO1xyXG4gICAgfVxyXG4gICAgZ2V0Q2xpZW50U3RhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiT25saW5lXCI7XHJcbiAgICB9XHJcbiAgICBnZXRGb3JtRmFjdG9yKCkge1xyXG4gICAgICAgIHJldHVybiAxIC8qIERlc2t0b3AgKi87XHJcbiAgICB9XHJcbiAgICBpc09mZmxpbmUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XG5cbmNvbnN0IEd1aWRzID0ge1xyXG4gICAgR3VpZEE6IEZvcm1VdGlscy5ub3JtYWxpemVJZChHdWlkLmdlbmVyYXRlKCkpLFxyXG4gICAgR3VpZEI6IEZvcm1VdGlscy5ub3JtYWxpemVJZChHdWlkLmdlbmVyYXRlKCkpLFxyXG4gICAgR3VpZEM6IEZvcm1VdGlscy5ub3JtYWxpemVJZChHdWlkLmdlbmVyYXRlKCkpLFxyXG4gICAgR3VpZEQ6IEZvcm1VdGlscy5ub3JtYWxpemVJZChHdWlkLmdlbmVyYXRlKCkpLFxyXG4gICAgR3VpZEU6IEZvcm1VdGlscy5ub3JtYWxpemVJZChHdWlkLmdlbmVyYXRlKCkpLFxyXG4gICAgR3VpZEY6IEZvcm1VdGlscy5ub3JtYWxpemVJZChHdWlkLmdlbmVyYXRlKCkpLFxyXG59O1xuXG5jbGFzcyBPcmdhbml6YXRpb25TZXR0aW5nc01vY2sge1xyXG4gICAgYmFzZUN1cnJlbmN5O1xyXG4gICAgYmFzZUN1cnJlbmN5SWQ7XHJcbiAgICBkZWZhdWx0Q291bnRyeUNvZGU7XHJcbiAgICBpc0F1dG9TYXZlRW5hYmxlZDtcclxuICAgIGxhbmd1YWdlSWQ7XHJcbiAgICBvcmdhbml6YXRpb25JZDtcclxuICAgIHVuaXF1ZU5hbWU7XHJcbiAgICB1c2VTa3lwZVByb3RvY29sO1xyXG4gICAgb3JnYW5pemF0aW9uR2VvO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5iYXNlQ3VycmVuY3kgPSB7XHJcbiAgICAgICAgICAgIGlkOiBHdWlkcy5HdWlkQSxcclxuICAgICAgICAgICAgbmFtZTogXCJcIixcclxuICAgICAgICAgICAgZW50aXR5VHlwZTogXCJcIlxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5iYXNlQ3VycmVuY3lJZCA9IEd1aWQuZ2VuZXJhdGUoKTtcclxuICAgICAgICB0aGlzLmRlZmF1bHRDb3VudHJ5Q29kZSA9IFwiZW5cIjtcclxuICAgICAgICB0aGlzLmlzQXV0b1NhdmVFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlSWQgPSAxMDMzO1xyXG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uSWQgPSBHdWlkLmdlbmVyYXRlKCk7XHJcbiAgICAgICAgdGhpcy51bmlxdWVOYW1lID0gXCJVTklRVUUgTkFNRVwiO1xyXG4gICAgICAgIHRoaXMudXNlU2t5cGVQcm90b2NvbCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub3JnYW5pemF0aW9uR2VvID0gXCJcIjtcclxuICAgIH1cclxufVxuXG5jbGFzcyBVc2VyU2V0dGluZ3NNb2NrIHtcclxuICAgIGRlZmF1bHREYXNoYm9hcmRJZDtcclxuICAgIGlzR3VpZGVkSGVscEVuYWJsZWQ7XHJcbiAgICBpc0hpZ2hDb250cmFzdEVuYWJsZWQ7XHJcbiAgICBpc1JUTDtcclxuICAgIGxhbmd1YWdlSWQ7XHJcbiAgICByb2xlcztcclxuICAgIHNlY3VyaXR5Um9sZVByaXZpbGVnZXM7XHJcbiAgICBzZWN1cml0eVJvbGVzO1xyXG4gICAgdHJhbnNhY3Rpb25DdXJyZW5jeTtcclxuICAgIHRyYW5zYWN0aW9uQ3VycmVuY3lJZDtcclxuICAgIHVzZXJJZDtcclxuICAgIHVzZXJOYW1lO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5kZWZhdWx0RGFzaGJvYXJkSWQgPSBHdWlkLmdlbmVyYXRlKCk7XHJcbiAgICAgICAgdGhpcy5pc0d1aWRlZEhlbHBFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5pc0hpZ2hDb250cmFzdEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzUlRMID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUlkID0gMTAzMztcclxuICAgICAgICB0aGlzLnJvbGVzID0gbmV3IEl0ZW1Db2xsZWN0aW9uKFtdKTtcclxuICAgICAgICB0aGlzLnNlY3VyaXR5Um9sZVByaXZpbGVnZXMgPSBbR3VpZC5nZW5lcmF0ZSgpLCBHdWlkLmdlbmVyYXRlKCldO1xyXG4gICAgICAgIHRoaXMuc2VjdXJpdHlSb2xlcyA9IFtHdWlkLmdlbmVyYXRlKCksIEd1aWQuZ2VuZXJhdGUoKV07XHJcbiAgICAgICAgdGhpcy50cmFuc2FjdGlvbkN1cnJlbmN5ID0geyBpZDogXCJcIiwgbmFtZTogXCJcIiwgZW50aXR5VHlwZTogXCJcIiB9O1xyXG4gICAgICAgIHRoaXMudHJhbnNhY3Rpb25DdXJyZW5jeUlkID0gR3VpZC5nZW5lcmF0ZSgpO1xyXG4gICAgICAgIHRoaXMudXNlcklkID0gR3VpZC5nZW5lcmF0ZSgpO1xyXG4gICAgICAgIHRoaXMudXNlck5hbWUgPSBcIlRFU1RfVVNFUlwiO1xyXG4gICAgICAgIHRoaXMuZGF0ZUZvcm1hdHRpbmdJbmZvID0ge307XHJcbiAgICB9XHJcbiAgICBkYXRlRm9ybWF0dGluZ0luZm87XHJcbiAgICBnZXRUaW1lWm9uZU9mZnNldE1pbnV0ZXMoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbn1cblxuLy8gbm9pbnNwZWN0aW9uIEpTQ2xvc3VyZUNvbXBpbGVyU3ludGF4XHJcbmNsYXNzIEdsb2JhbENvbnRleHRNb2NrIHtcclxuICAgIGNsaWVudDtcclxuICAgIG9yZ2FuaXphdGlvblNldHRpbmdzO1xyXG4gICAgdXNlclNldHRpbmdzO1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5jbGllbnQgPSBuZXcgQ2xpZW50Q29udGV4dE1vY2soKTtcclxuICAgICAgICB0aGlzLm9yZ2FuaXphdGlvblNldHRpbmdzID0gbmV3IE9yZ2FuaXphdGlvblNldHRpbmdzTW9jaygpO1xyXG4gICAgICAgIHRoaXMudXNlclNldHRpbmdzID0gbmV3IFVzZXJTZXR0aW5nc01vY2soKTtcclxuICAgIH1cclxuICAgIGdldEN1cnJlbnRBcHBTZXR0aW5nKHNldHRpbmdOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiXCI7XHJcbiAgICB9XHJcbiAgICBnZXRBZHZhbmNlZENvbmZpZ1NldHRpbmcoc2V0dGluZykge1xyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgZ2V0Q2xpZW50VXJsKCkge1xyXG4gICAgICAgIHJldHVybiBcImh0dHBzOi8vdW5pdC10ZXN0LW9yZy5keW5hbWljcy5jb20vXCI7XHJcbiAgICB9XHJcbiAgICBnZXRDdXJyZW50QXBwTmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFwiVGVzdCBBcHBcIik7XHJcbiAgICB9XHJcbiAgICBnZXRDdXJyZW50QXBwUHJvcGVydGllcygpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIGdldEN1cnJlbnRBcHBVcmwoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBnZXRDdXJyZW50VGhlbWUoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBnZXRJc0F1dG9TYXZlRW5hYmxlZCgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIGdldE9yZ0xjaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIDEwMzM7XHJcbiAgICB9XHJcbiAgICBnZXRPcmdVbmlxdWVOYW1lKCkge1xyXG4gICAgICAgIHJldHVybiBcIlRlc3RPcmdOYW1lXCI7XHJcbiAgICB9XHJcbiAgICBnZXRRdWVyeVN0cmluZ1BhcmFtZXRlcnMoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBnZXRUaW1lWm9uZU9mZnNldE1pbnV0ZXMoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBnZXRVc2VySWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlclNldHRpbmdzLnVzZXJJZDtcclxuICAgIH1cclxuICAgIGdldFVzZXJMY2lkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJTZXR0aW5ncy5sYW5ndWFnZUlkO1xyXG4gICAgfVxyXG4gICAgZ2V0VXNlck5hbWUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlclNldHRpbmdzLnVzZXJOYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0VXNlclJvbGVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVzZXJTZXR0aW5ncy5zZWN1cml0eVJvbGVQcml2aWxlZ2VzO1xyXG4gICAgfVxyXG4gICAgZ2V0VmVyc2lvbigpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNZXRob2Qgbm90IGltcGxlbWVudGVkLlwiKTtcclxuICAgIH1cclxuICAgIGlzT25QcmVtaXNlKCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHByZXBlbmRPcmdOYW1lKHNQYXRoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRHluYW1pY3NDb250ZXh0TW9ja0RhdGEge1xyXG4gICAgYXR0cmlidXRlcztcclxuICAgIGNvbnRyb2xzO1xyXG4gICAgdGFicztcclxuICAgIGZvcm1UeXBlO1xyXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IHsgYXR0cmlidXRlcyA9IFtdLCBjb250cm9scyA9IFtdLCB0YWJzID0gW10sIGZvcm1UeXBlID0gMiwgfSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcclxuICAgICAgICB0aGlzLmNvbnRyb2xzID0gY29udHJvbHM7XHJcbiAgICAgICAgdGhpcy50YWJzID0gdGFicztcclxuICAgICAgICB0aGlzLmZvcm1UeXBlID0gZm9ybVR5cGU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlYXRlRnJvbUZvcm0oZm9ybSkge1xyXG4gICAgICAgIGNvbnN0IGZvcm1JbnN0ID0gbmV3IGZvcm0oKTtcclxuICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZm9ybUluc3QpO1xyXG4gICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBbXTtcclxuICAgICAgICBjb25zdCB0YWJzID0gW107XHJcbiAgICAgICAgY29uc3QgY29udHJvbHMgPSBbXTtcclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3AgPSBmb3JtSW5zdFtrZXldO1xyXG4gICAgICAgICAgICBpZiAocHJvcCBpbnN0YW5jZW9mIEZvcm1BdHRyaWJ1dGVCYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGF0dHIsIGNvbnRyIH0gPSBjcmVhdGVBdHRyaWJ1dGVBbmRDb250cm9sTW9jayhwcm9wKTtcclxuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXMucHVzaChhdHRyKTtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xzLnB1c2goY29udHIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHByb3AgaW5zdGFuY2VvZiBUYWIpIHtcclxuICAgICAgICAgICAgICAgIHRhYnMucHVzaChjcmVhdGVUYWJNb2NrKHByb3ApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IER5bmFtaWNzQ29udGV4dE1vY2tEYXRhKHtcclxuICAgICAgICAgICAgYXR0cmlidXRlcywgdGFicywgY29udHJvbHMsXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlVGFiTW9jayhwcm9wKSB7XHJcbiAgICBjb25zdCBsb2NhbFNlY3Rpb25zID0gW107XHJcbiAgICBjb25zdCBzZWN0aW9uS2V5cyA9IE9iamVjdC5rZXlzKHByb3ApO1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2Ygc2VjdGlvbktleXMpIHtcclxuICAgICAgICBjb25zdCBzZWN0aW9uID0gcHJvcFtrZXldO1xyXG4gICAgICAgIGlmIChzZWN0aW9uIGluc3RhbmNlb2YgU2VjdGlvbikge1xyXG4gICAgICAgICAgICBsb2NhbFNlY3Rpb25zLnB1c2gobmV3IFNlY3Rpb25Nb2NrKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IHNlY3Rpb24uX3NlY3Rpb25OYW1lLFxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBUYWJNb2NrKHtcclxuICAgICAgICBuYW1lOiBwcm9wLl90YWJOYW1lLFxyXG4gICAgICAgIHNlY3Rpb25zOiBsb2NhbFNlY3Rpb25zLFxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlQW5kQ29udHJvbE1vY2socHJvcCkge1xyXG4gICAgbGV0IGluaXRpYWxWYWx1ZSA9IG51bGw7XHJcbiAgICBsZXQgYXR0ciA9IG51bGw7XHJcbiAgICBpZiAocHJvcCBpbnN0YW5jZW9mIEJvb2xlYW5Gb3JtQXR0cmlidXRlKSB7XHJcbiAgICAgICAgaW5pdGlhbFZhbHVlID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChwcm9wIGluc3RhbmNlb2YgRGVjaW1hbEZvcm1BdHRyaWJ1dGVcclxuICAgICAgICB8fCBwcm9wIGluc3RhbmNlb2YgRG91YmxlRm9ybUF0dHJpYnV0ZVxyXG4gICAgICAgIHx8IHByb3AgaW5zdGFuY2VvZiBNb25leUZvcm1BdHRyaWJ1dGUpIHtcclxuICAgICAgICBpbml0aWFsVmFsdWUgPSAwLjA7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChwcm9wIGluc3RhbmNlb2YgU3RyaW5nRm9ybUF0dHJpYnV0ZVxyXG4gICAgICAgIHx8IHByb3AgaW5zdGFuY2VvZiBFbnRpdHlOYW1lRm9ybUF0dHJpYnV0ZSkge1xyXG4gICAgICAgIGluaXRpYWxWYWx1ZSA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChwcm9wIGluc3RhbmNlb2YgRGF0ZVRpbWVGb3JtQXR0cmlidXRlKSB7XHJcbiAgICAgICAgaW5pdGlhbFZhbHVlID0gbmV3IERhdGUoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHByb3AgaW5zdGFuY2VvZiBJbnRlZ2VyRm9ybUF0dHJpYnV0ZVxyXG4gICAgICAgIHx8IHByb3AgaW5zdGFuY2VvZiBOdW1iZXJGb3JtQXR0cmlidXRlKSB7XHJcbiAgICAgICAgaW5pdGlhbFZhbHVlID0gMDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHByb3AgaW5zdGFuY2VvZiBMb29rdXBBdHRyaWJ1dGVNb2NrXHJcbiAgICAgICAgfHwgcHJvcCBpbnN0YW5jZW9mIFVuaXF1ZWlkZW50aWZpZXJGb3JtQXR0cmlidXRlXHJcbiAgICAgICAgfHwgcHJvcCBpbnN0YW5jZW9mIEN1c3RvbWVyRm9ybUF0dHJpYnV0ZVxyXG4gICAgICAgIHx8IHByb3AgaW5zdGFuY2VvZiBPd25lckZvcm1BdHRyaWJ1dGVcclxuICAgICAgICB8fCBwcm9wIGluc3RhbmNlb2YgUGFydHlMaXN0Rm9ybUF0dHJpYnV0ZVxyXG4gICAgICAgIHx8IHByb3AgaW5zdGFuY2VvZiBTdGF0ZUZvcm1BdHRyaWJ1dGVcclxuICAgICAgICB8fCBwcm9wIGluc3RhbmNlb2YgU3RhdHVzRm9ybUF0dHJpYnV0ZSkge1xyXG4gICAgICAgIGluaXRpYWxWYWx1ZSA9IFtdO1xyXG4gICAgICAgIGF0dHIgPSBuZXcgTG9va3VwQXR0cmlidXRlTW9jayh7XHJcbiAgICAgICAgICAgIG5hbWU6IHByb3AuYXR0cmlidXRlTmFtZSxcclxuICAgICAgICAgICAgdmFsdWU6IGluaXRpYWxWYWx1ZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAocHJvcCBpbnN0YW5jZW9mIE1lbW9Gb3JtQXR0cmlidXRlKSB7XHJcbiAgICAgICAgaW5pdGlhbFZhbHVlID0gbnVsbDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHByb3AgaW5zdGFuY2VvZiBQaWNrbGlzdEZvcm1BdHRyaWJ1dGVcclxuICAgICAgICB8fCBwcm9wIGluc3RhbmNlb2YgTXVsdGlTZWxlY3RQaWNrbGlzdEZvcm1BdHRyaWJ1dGUpIHtcclxuICAgICAgICBpbml0aWFsVmFsdWUgPSBbXTtcclxuICAgICAgICBhdHRyID0gbmV3IE9wdGlvblNldEF0dHJpYnV0ZU1vY2soe1xyXG4gICAgICAgICAgICBuYW1lOiBwcm9wLmF0dHJpYnV0ZU5hbWUsXHJcbiAgICAgICAgICAgIHZhbHVlOiBpbml0aWFsVmFsdWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChhdHRyID09PSBudWxsKSB7XHJcbiAgICAgICAgYXR0ciA9IG5ldyBBdHRyaWJ1dGVNb2NrKHtcclxuICAgICAgICAgICAgbmFtZTogcHJvcC5hdHRyaWJ1dGVOYW1lLFxyXG4gICAgICAgICAgICB2YWx1ZTogaW5pdGlhbFZhbHVlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29udHIgPSBhdHRyLmNyZWF0ZU5ld0NvbnRyb2woKTtcclxuICAgIHJldHVybiB7IGF0dHIsIGNvbnRyIH07XHJcbn1cblxuY2xhc3MgRHluYW1pY3NDb250ZXh0TW9jayBleHRlbmRzIER5bmFtaWNzQ29udGV4dCB7XHJcbiAgICBfbW9ja0RhdGE7XHJcbiAgICBjb25zdHJ1Y3Rvcihtb2NrRGF0YSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5fbW9ja0RhdGEgPSBtb2NrRGF0YSB8fCBuZXcgRHluYW1pY3NDb250ZXh0TW9ja0RhdGEoe30pO1xyXG4gICAgICAgIHRoaXMuX2dsb2JhbENvbnRleHQgPSBuZXcgR2xvYmFsQ29udGV4dE1vY2soKTtcclxuICAgICAgICB0aGlzLl9mb3JtQ29udGV4dCA9IG5ldyBGb3JtQ29udGV4dE1vY2sodGhpcy5fbW9ja0RhdGEpO1xyXG4gICAgICAgIHRoaXMuX2V4ZWN1dGlvbkNvbnRleHQgPSBuZXcgRXhlY3V0aW9uQ29udGV4dE1vY2sodGhpcy5fZ2xvYmFsQ29udGV4dCwgdGhpcy5fZm9ybUNvbnRleHQpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWF0ZUZyb21Gb3JtKGZvcm0pIHtcclxuICAgICAgICBjb25zdCBtb2NrRGF0YSA9IER5bmFtaWNzQ29udGV4dE1vY2tEYXRhLmNyZWF0ZUZyb21Gb3JtKGZvcm0pO1xyXG4gICAgICAgIHJldHVybiBuZXcgRHluYW1pY3NDb250ZXh0TW9jayhtb2NrRGF0YSk7XHJcbiAgICB9XHJcbiAgICA7XHJcbiAgICBnZXQgbW9ja0RhdGEoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX21vY2tEYXRhO1xyXG4gICAgfVxyXG4gICAgZ2V0IGV4ZWN1dGlvbkNvbnRleHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2V4ZWN1dGlvbkNvbnRleHQ7XHJcbiAgICB9XHJcbiAgICBnZXQgZm9ybUNvbnRleHQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1Db250ZXh0O1xyXG4gICAgfVxyXG4gICAgZ2V0IGdsb2JhbENvbnRleHQoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9nbG9iYWxDb250ZXh0KVxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJHbG9iYWwgQ29udGV4dCBub3QgYXZhaWxhYmxlXCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nbG9iYWxDb250ZXh0O1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEZvcm1WZXJpZmllciB7XHJcbiAgICBfYWN0aW9uO1xyXG4gICAgX2Fzc2VydGlvbjtcclxuICAgIGNvbnN0cnVjdG9yKGFjdGlvbiwgYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xyXG4gICAgICAgIHRoaXMuX2Fzc2VydGlvbiA9IGFzc2VydGlvbjtcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uKCk7XHJcbiAgICAgICAgICAgIC8vIHNldFRpbWVvdXQgdG8gZGVmZXIgZXhlY3V0aW9uIG9mIHRoZSBfYXNzZXJ0aW9uIGZ1bmN0aW9uXHJcbiAgICAgICAgICAgIC8vIHRpbGwgdGhlIGNhbGwgc3RhY2sgaXMgZW1wdHkuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hc3NlcnRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGVzIGFsbCB0aGUgRm9ybVZlcmlmaWVyc1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgZXhlY3V0ZVZlcmlmaWVycyh2ZXJpZmllcnMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAvLyBzZXRUaW1lb3V0IHRvIGRlZmVyIGV4ZWN1dGlvbiBvZiB0aGUgX2Fzc2VydGlvbiBmdW5jdGlvblxyXG4gICAgICAgICAgICAvLyB0aWxsIHRoZSBjYWxsIHN0YWNrIGlzIGVtcHR5LlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2ZXJpZmllciBvZiB2ZXJpZmllcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdmVyaWZpZXIuZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cblxuY2xhc3MgRmFrZVJlc3BvbnNlIHtcclxuICAgIHRleHQ7XHJcbiAgICBjb25zdHJ1Y3Rvcih0ZXh0KSB7XHJcbiAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDtcclxuICAgIH1cclxufVxuXG5jbGFzcyBGYWtlQ29tbWFuZFJlc3BvbnNlIGV4dGVuZHMgRmFrZVJlc3BvbnNlIHtcclxuICAgIF9jYWxsZWQ7XHJcbiAgICBtYXRjaGVyO1xyXG4gICAgY29uc3RydWN0b3IoY29tbWFuZE5hbWUsIGNvbW1hbmRSZXN1bHQsIGNvbW1hbmRQYXJhbWV0ZXIgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgICAgICAgIGFkc3NmX2NvbW1hbmRuYW1lOiBjb21tYW5kTmFtZSxcclxuICAgICAgICAgICAgYWRzc2ZfcGFyYW1ldGVyOiBKU09OLnN0cmluZ2lmeShjb21tYW5kUGFyYW1ldGVyKSxcclxuICAgICAgICAgICAgYWRzc2ZfcmVzdWx0OiBKU09OLnN0cmluZ2lmeShjb21tYW5kUmVzdWx0KSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHN1cGVyKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgICB0aGlzLl9jYWxsZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm1hdGNoZXIgPSAodXJsLCBvcHRzKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghb3B0cy5ib2R5KVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBvYmogPSBKU09OLnBhcnNlKG9wdHMuYm9keT8udG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBvYmouYWRzc2ZfY29tbWFuZG5hbWUgPT09IGNvbW1hbmROYW1lO1xyXG4gICAgICAgICAgICB0aGlzLl9jYWxsZWQgPSB0aGlzLl9jYWxsZWQgfHwgbWF0Y2hlcztcclxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXM7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGdvdENhbGxlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY2FsbGVkO1xyXG4gICAgfVxyXG59XG5cbmNsYXNzIEZha2VPRGF0YVJlc3BvbnNlIGV4dGVuZHMgRmFrZVJlc3BvbnNlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcclxuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5KVxyXG4gICAgICAgICAgICBkYXRhID0geyB2YWx1ZTogZGF0YSB9O1xyXG4gICAgICAgIHN1cGVyKEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgIH1cclxufVxuXG5jbGFzcyBGYWtlU2VydmVyIHtcclxuICAgIGZldGNoTW9jaztcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hNb2NrID0gZmV0Y2g7XHJcbiAgICB9XHJcbiAgICByZXN0b3JlKCkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hNb2NrLnJlc3RvcmUoKTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyUmVzcG9uc2UobWF0Y2hlciwgcmVzcG9uc2UsIG9wdGlvbnMpIHtcclxuICAgICAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBGYWtlUmVzcG9uc2UpXHJcbiAgICAgICAgICAgIHJlc3BvbnNlID0gcmVzcG9uc2UudGV4dDtcclxuICAgICAgICB0aGlzLmZldGNoTW9jay5tb2NrKG1hdGNoZXIsIHJlc3BvbnNlLCBvcHRpb25zKTtcclxuICAgIH1cclxufVxuXG5mdW5jdGlvbiByZXNvbHZlUGx1cmFsTmFtZU9yVGhyb3cocGx1cmFsTmFtZSkge1xyXG4gICAgaWYgKHR5cGVvZiBwbHVyYWxOYW1lID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgcmV0dXJuIHBsdXJhbE5hbWU7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBFcnJvcihcIkludmFsaWQgYXJndW1lbnQgXFxcInBsdXJhbE5hbWVcXFwiLiBQYXJhbWV0ZXIgc2hvdWxkIGJlIG9mIHR5cGUgc3RyaW5nLlwiKTtcclxufVxyXG5mdW5jdGlvbiByZXNvbHZlUGx1cmFsTmFtZU9mT0RhdGFFbnRpdHlPclRocm93KGVudGl0eSkge1xyXG4gICAgaWYgKCEhZW50aXR5KSB7XHJcbiAgICAgICAgdmFyIGVudGl0eUluc3RhbmNlID0gbmV3IGVudGl0eSgpO1xyXG4gICAgICAgIGlmICghIWVudGl0eUluc3RhbmNlLkVudGl0eVNldE5hbWUgJiYgdHlwZW9mIGVudGl0eUluc3RhbmNlLkVudGl0eVNldE5hbWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVudGl0eUluc3RhbmNlLkVudGl0eVNldE5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IFxcXCJlbnRpdHlcXFwiLiBQYXJhbWV0ZXIgc2hvdWxkIGJlIG9mIHR5cGUgT0RhdGFFbnRpdHkuXCIpO1xyXG59XHJcbmNsYXNzIE9kYXRhUmVnRXhCdWlsZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBSZWdleCBleHByZXNzaW9uIHRoYXQgbWF0Y2hlcyBhIHJldHJpZXZlIHN0YXRlbWVudCBvZiBhIHNpbmdsZSBlbnRpdHlcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge09EYXRhRW50aXR5fSBlbnRpdHkgVGhlIGVudGl0eSBvYmplY3QgKGUuZy4gQWNjb3VudClcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBndWlkIFRoZSBlbnRpdHkgaWRcclxuICAgICAqIEByZXR1cm5zIHtSZWdFeHB9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyByZXRyaWV2ZVNpbmdsZShlbnRpdHksIGd1aWQpIHtcclxuICAgICAgICBsZXQgcGx1cmFsTmFtZSA9IHJlc29sdmVQbHVyYWxOYW1lT2ZPRGF0YUVudGl0eU9yVGhyb3coZW50aXR5KTtcclxuICAgICAgICBpZiAodHlwZW9mIGd1aWQgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IFxcXCJndWlkXFxcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoYCR7cGx1cmFsTmFtZX1cXFxcKCR7Z3VpZH1cXFxcKWApO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIFJlZ2V4IGV4cHJlc3Npb24gdGhhdCBtYXRjaGVzIGEgcmV0cmlldmUgc3RhdGVtZW50IG9mIGEgc2luZ2xlIGVudGl0eVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbnRpdHkgVGhlIGVudGl0eSdzIHBsdXJhbCBuYW1lIChlLmcuIFwiYWNjb3VudHNcIilcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBndWlkIFRoZSBlbnRpdHkgaWRcclxuICAgICAqIEByZXR1cm5zIHtSZWdFeHB9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyByZXRyaWV2ZVNpbmdsZUJ5UmVzb3VyY2VOYW1lKHBsdXJhbE5hbWUsIGd1aWQpIHtcclxuICAgICAgICBsZXQgZW50aXR5TmFtZSA9IHJlc29sdmVQbHVyYWxOYW1lT3JUaHJvdyhwbHVyYWxOYW1lKTtcclxuICAgICAgICBpZiAodHlwZW9mIGd1aWQgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGFyZ3VtZW50IFxcXCJndWlkXFxcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoYCR7ZW50aXR5TmFtZX1cXFxcKCR7Z3VpZH1cXFxcKWApO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAqIENyZWF0ZXMgYW4gUmVnZXggZXhwcmVzc2lvbiB0aGF0IG1hdGNoZXMgYSByZXRyaWV2ZSBzdGF0ZW1lbnQgb2YgYSBhbGwgcmVjb3JkcyBvZiBhIHNwZWNpZmljIGVudGl0eSB0eXBlXHJcbiAgICAqXHJcbiAgICAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gZW50aXR5T3JQbHVyYWxOYW1lIFRoZSBlbnRpdHkgb2JqZWN0IChlLmcuIEFjY291bnQpIG9yIHBsdXJhbCBuYW1lIChlLmcuIFwiYWNjb3VudHNcIilcclxuICAgICogQHJldHVybnMge1JlZ0V4cH1cclxuICAgICovXHJcbiAgICBzdGF0aWMgcmV0cmlldmVBbGwoZW50aXR5KSB7XHJcbiAgICAgICAgY29uc3QgcGx1cmFsTmFtZSA9IHJlc29sdmVQbHVyYWxOYW1lT2ZPRGF0YUVudGl0eU9yVGhyb3coZW50aXR5KTtcclxuICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChwbHVyYWxOYW1lKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgKiBDcmVhdGVzIGFuIFJlZ2V4IGV4cHJlc3Npb24gdGhhdCBtYXRjaGVzIGEgcmV0cmlldmUgc3RhdGVtZW50IG9mIGEgYWxsIHJlY29yZHMgb2YgYSBzcGVjaWZpYyBlbnRpdHkgdHlwZVxyXG4gICAgKlxyXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gcmVzb3VyY2VOYW1lIFRoZSBlbnRpdHkncyBwbHVyYWwgbmFtZSAoZS5nLiBcImFjY291bnRzXCIpXHJcbiAgICAqIEByZXR1cm5zIHtSZWdFeHB9XHJcbiAgICAqL1xyXG4gICAgc3RhdGljIHJldHJpZXZlQWxsQnlSZXNvdXJjZU5hbWUocmVzb3VyY2VOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgcGx1cmFsTmFtZSA9IHJlc29sdmVQbHVyYWxOYW1lT3JUaHJvdyhyZXNvdXJjZU5hbWUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUmVnRXhwKHBsdXJhbE5hbWUpO1xyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IEF0dHJpYnV0ZU1vY2ssIEJvb2xlYW5Gb3JtQXR0cmlidXRlLCBCb29sZWFuT0RhdGFBdHRyaWJ1dGUsIENhY2hlZFJpYmJvblJ1bGVFbnRyeSwgQ2FjaGVkUmliYm9uUnVsZUV4ZWN1dG9yLCBDbGllbnRDb250ZXh0TW9jaywgQ29udHJvbE1vY2ssIEN1c3RvbWVyRm9ybUF0dHJpYnV0ZSwgQ3VzdG9tZXJPRGF0YUF0dHJpYnV0ZSwgRGF0ZVRpbWVGb3JtQXR0cmlidXRlLCBEYXRlVGltZU9EYXRhQXR0cmlidXRlLCBEYXRlVGltZU9EYXRhQXR0cmlidXRlRmlsdGVyLCBEZWNpbWFsRm9ybUF0dHJpYnV0ZSwgRGVjaW1hbE9EYXRhQXR0cmlidXRlLCBEaXNwbGF5UnVsZSwgRG91YmxlRm9ybUF0dHJpYnV0ZSwgRG91YmxlT0RhdGFBdHRyaWJ1dGUsIER5bmFtaWNzQ29udGV4dCwgRHluYW1pY3NDb250ZXh0TW9jaywgRHluYW1pY3NDb250ZXh0TW9ja0RhdGEsIEVuYWJsZVJ1bGUsIEVudGl0eSwgRW50aXR5TmFtZUZvcm1BdHRyaWJ1dGUsIEVudGl0eU5hbWVPRGF0YUF0dHJpYnV0ZSwgRXhlY3V0aW9uQ29udGV4dE1vY2ssIEV4cGlyZXMsIEZha2VDb21tYW5kUmVzcG9uc2UsIEZha2VPRGF0YVJlc3BvbnNlLCBGYWtlUmVzcG9uc2UsIEZha2VTZXJ2ZXIsIEZpbHRlckdyb3VwLCBGaWx0ZXJSdWxlLCBGaWx0ZXJWYWx1ZSwgRmx1ZW50UnVsZUZhY3RvcnksIEZsdWVudFJ1bGVzLCBGb290ZXJTZWN0aW9uTW9jaywgRm9ybUF0dHJpYnV0ZUJhc2UsIEZvcm1Db250ZXh0RGF0YU1vY2ssIEZvcm1Db250ZXh0RGF0YVByb2Nlc3NNb2NrLCBGb3JtQ29udGV4dEVudGl0eU1vY2ssIEZvcm1Db250ZXh0TW9jaywgRm9ybUNvbnRleHRVSU1vY2ssIEZvcm1JdGVtTW9jaywgRm9ybU9iamVjdEJhc2UsIEZvcm1TZWxlY3Rvck1vY2ssIEZvcm1UeXBlcywgRm9ybVV0aWxzLCBGb3JtVmVyaWZpZXIsIEdsb2JhbENvbnRleHRNb2NrLCBHdWlkLCBHdWlkcywgSGVhZGVyU2VjdGlvbk1vY2ssIEludGVnZXJGb3JtQXR0cmlidXRlLCBJbnRlZ2VyT0RhdGFBdHRyaWJ1dGUsIEl0ZW1Db2xsZWN0aW9uLCBMb2dMZXZlbCwgTG9nZ2VyLCBMb29rVXBDdXN0b21GaWx0ZXIsIExvb2t1cEF0dHJpYnV0ZU1vY2ssIExvb2t1cENvbnRyb2xNb2NrLCBMb29rdXBDb252ZXJ0ZXIsIExvb2t1cEZvcm1BdHRyaWJ1dGUsIExvb2t1cE9EYXRhQXR0cmlidXRlLCBNZW1vRm9ybUF0dHJpYnV0ZSwgTWVtb09EYXRhQXR0cmlidXRlLCBNb25leUZvcm1BdHRyaWJ1dGUsIE1vbmV5T0RhdGFBdHRyaWJ1dGUsIE11bHRpU2VsZWN0UGlja2xpc3RGb3JtQXR0cmlidXRlLCBNdWx0aVNlbGVjdFBpY2tsaXN0T0RhdGFBdHRyaWJ1dGUsIE5vdGlmaWNhdGlvbkxldmVsLCBOb3RpZmljYXRpb25SdWxlLCBOdW1iZXJPRGF0YUF0dHJpYnV0ZUZpbHRlciwgT0RhdGFBdHRyaWJ1dGVGaWx0ZXJCYXNlLCBPRGF0YUF0dHJpYnV0ZU9yZGVyLCBPRGF0YUNvbW1hbmQsIE9EYXRhQ29tbWFuZFJlc3BvbnNlLCBPRGF0YUVudGl0eSwgT0RhdGFFcnJvciwgT0RhdGFGYWlsdXJlLCBPRGF0YVF1ZXJ5QnVpbGRlciwgT0RhdGFRdWVyeUJ1aWxkZXJMb2dpYywgT0RhdGFRdWVyeUJ1aWxkZXJNb2RlLCBPRGF0YVF1ZXJ5UGFyYW1ldGVycywgT0RhdGFRdWVyeVJlc3BvbnNlTWFwcGVyLCBPRGF0YVJlcXVlc3QsIE9EYXRhUmVzcG9uc2UsIE9EYXRhUmVzcG9uc2VUeXBlcywgT2JzZXJ2YWJsZSwgT2RhdGFSZWdFeEJ1aWxkZXIsIE9uU2F2ZVJ1bGUsIE9wdGlvblNldEF0dHJpYnV0ZU1vY2ssIE9wdGlvblNldENvbnRyb2xNb2NrLCBPcmRlckRpcmVjdGlvbiwgT3JnYW5pemF0aW9uU2V0dGluZ3NNb2NrLCBPd25lckZvcm1BdHRyaWJ1dGUsIE93bmVyT0RhdGFBdHRyaWJ1dGUsIFBhcnR5TGlzdEZvcm1BdHRyaWJ1dGUsIFBhcnR5TGlzdE9EYXRhQXR0cmlidXRlLCBQaWNrbGlzdENvbnZlcnRlciwgUGlja2xpc3RGb3JtQXR0cmlidXRlLCBQaWNrbGlzdE9EYXRhQXR0cmlidXRlLCBRdWVyeU9wZXJhdG9ycywgUmVxdWlyZVJ1bGUsIFJpYmJvbkNvbnRleHQsIFJpYmJvbkNvbnRyYWN0QmFzZSwgUmliYm9uQ29udHJvbGxlckJhc2UsIFJ1bGVCYXNlLCBSdWxlRGVmaW5pdGlvbiwgUnVsZVN0b3JlLCBSdWxlVHlwZSwgU2VjdGlvbiwgU2VjdGlvbk1vY2ssIFN0YXRlRm9ybUF0dHJpYnV0ZSwgU3RhdGVPRGF0YUF0dHJpYnV0ZSwgU3RhdHVzRm9ybUF0dHJpYnV0ZSwgU3RhdHVzT0RhdGFBdHRyaWJ1dGUsIFN0b3JhZ2UsIFN0cmluZ0Zvcm1BdHRyaWJ1dGUsIFN0cmluZ09EYXRhQXR0cmlidXRlLCBTdHJpbmdPRGF0YUF0dHJpYnV0ZUZpbHRlciwgU3Vic2NyaWJlUnVsZSwgVGFiLCBUYWJNb2NrLCBUcmlnZ2VyYWJsZVJ1bGVCYXNlLCBVbmlxdWVpZGVudGlmaWVyRm9ybUF0dHJpYnV0ZSwgVW5pcXVlaWRlbnRpZmllck9EYXRhQXR0cmlidXRlLCBVc2VyU2V0dGluZ3NNb2NrLCBWYWx1ZVJ1bGUgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@avanade/bizapps-sdk/dist/bizapps-sdk.esm.js\n");

/***/ }),

/***/ "./src/entity/Account/Ribbon/account.ribbon.controller.ts":
/*!****************************************************************!*\
  !*** ./src/entity/Account/Ribbon/account.ribbon.controller.ts ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AccountRibbonController\": () => (/* binding */ AccountRibbonController)\n/* harmony export */ });\n/* harmony import */ var _generated_forms_account_informaci_form_generated__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../generated/forms/account.informaci.form.generated */ \"./src/generated/forms/account.informaci.form.generated.ts\");\n/* harmony import */ var _Services_accountCommandService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../Services/accountCommandService */ \"./src/entity/Account/Services/accountCommandService.ts\");\n\n\nclass AccountRibbonController {\n  constructor(dynamicsContext) {\n    this.dynamicsContext = dynamicsContext;\n    this.form = new _generated_forms_account_informaci_form_generated__WEBPACK_IMPORTED_MODULE_0__.AccountForm(this.dynamicsContext.formContext);\n    this.syncCantensOK = \"001\";\n    this.syncCantensKO = \"002\";\n  }\n  /* #region Unsubscribe Button */\n\n\n  async unsubscribe() {\n    const commandController = new _Services_accountCommandService__WEBPACK_IMPORTED_MODULE_1__.AccountCommandService(this.dynamicsContext); //await commandController.unsubscribe(this.form.objectId);\n\n    await this.dynamicsContext.formContext.data.refresh(false);\n  }\n\n  async isUnsubscribeEnabled() {\n    return new Promise(resolve => setTimeout(() => {\n      resolve(true);\n    }, 1000));\n  }\n  /* #endregion */\n\n\n  async syncCatens() {\n    this.clrearAllNotifications();\n    const entityCode = this.form.pfc_catalog_code.getValue();\n    let url = \"https://azurecatens.azurewebsites.net/api/CallCatens/codi/\" + entityCode + \"?code=cJacZSk9M1UgnGvW6CtiuWC0hmDdCtk5BW9MamNwiapD7XZuwJ0dQw==\";\n    this.postData(url);\n  }\n\n  async postData(url) {\n    let result;\n    const options = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      } //body: JSON.stringify(inputData),\n\n    };\n    fetch(url, options).then(response => {\n      debugger;\n\n      switch (response.status) {\n        case 200:\n          this.dynamicsContext.formContext.ui.setFormNotification(\"Sincronizacin con CATENS realizada con xito\", \"INFO\", this.syncCantensOK);\n          break;\n\n        case 400:\n          this.dynamicsContext.formContext.ui.setFormNotification(\"No se ha podido encontrar la entidad.\", \"ERROR\", this.syncCantensKO);\n          break;\n\n        case 404:\n          this.dynamicsContext.formContext.ui.setFormNotification(\"Ha ocurrido un error al llamar al servicio\", \"ERROR\", this.syncCantensKO);\n          break;\n\n        default:\n          console.log(\"No tengo mascota\");\n          break;\n      }\n    }).then(data => {}).catch(e => {\n      this.dynamicsContext.formContext.ui.setFormNotification(\"Ha ocurrido un error inesperado\", \"ERROR\", this.syncCantensKO);\n    });\n  }\n\n  async clrearAllNotifications() {\n    this.dynamicsContext.formContext.ui.clearFormNotification(this.syncCantensOK);\n    this.dynamicsContext.formContext.ui.clearFormNotification(this.syncCantensKO);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZW50aXR5L0FjY291bnQvUmliYm9uL2FjY291bnQucmliYm9uLmNvbnRyb2xsZXIudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQ0E7QUFDQTtBQUVPLE1BQU1FLHVCQUFOLENBQThCO0FBTWpDQyxFQUFBQSxXQUFXLENBQUNDLGVBQUQsRUFBbUM7QUFDMUMsU0FBS0EsZUFBTCxHQUF1QkEsZUFBdkI7QUFDQSxTQUFLQyxJQUFMLEdBQVksSUFBSUwsMEZBQUosQ0FBZ0IsS0FBS0ksZUFBTCxDQUFxQkUsV0FBckMsQ0FBWjtBQUNBLFNBQUtDLGFBQUwsR0FBcUIsS0FBckI7QUFDQSxTQUFLQyxhQUFMLEdBQXFCLEtBQXJCO0FBQ0g7QUFFRDs7O0FBRWlCLFFBQVhDLFdBQVcsR0FBRztBQUNoQixVQUFNQyxpQkFBaUIsR0FBRyxJQUFJVCxrRkFBSixDQUEwQixLQUFLRyxlQUEvQixDQUExQixDQURnQixDQUVoQjs7QUFDQSxVQUFNLEtBQUtBLGVBQUwsQ0FBcUJFLFdBQXJCLENBQWlDSyxJQUFqQyxDQUFzQ0MsT0FBdEMsQ0FBOEMsS0FBOUMsQ0FBTjtBQUNIOztBQUV5QixRQUFwQkMsb0JBQW9CLEdBQUc7QUFDekIsV0FBTyxJQUFJQyxPQUFKLENBQVlDLE9BQU8sSUFBSUMsVUFBVSxDQUFDLE1BQU07QUFBRUQsTUFBQUEsT0FBTyxDQUFDLElBQUQsQ0FBUDtBQUFnQixLQUF6QixFQUEyQixJQUEzQixDQUFqQyxDQUFQO0FBQ0g7QUFFRDs7O0FBRWdCLFFBQVZFLFVBQVUsR0FBRztBQUNmLFNBQUtDLHNCQUFMO0FBQ0EsVUFBTUMsVUFBVSxHQUFHLEtBQUtkLElBQUwsQ0FBVWUsZ0JBQVYsQ0FBMkJDLFFBQTNCLEVBQW5CO0FBQ0EsUUFBSUMsR0FBRyxHQUFHLCtEQUErREgsVUFBL0QsR0FBNEUsZ0VBQXRGO0FBQ0EsU0FBS0ksUUFBTCxDQUFjRCxHQUFkO0FBQ0g7O0FBRWEsUUFBUkMsUUFBUSxDQUFDRCxHQUFELEVBQWE7QUFDdkIsUUFBSUUsTUFBSjtBQUNBLFVBQU1DLE9BQU8sR0FBRztBQUNaQyxNQUFBQSxNQUFNLEVBQUUsTUFESTtBQUVaQyxNQUFBQSxPQUFPLEVBQUU7QUFDVCx3QkFBZ0I7QUFEUCxPQUZHLENBS1o7O0FBTFksS0FBaEI7QUFPWUMsSUFBQUEsS0FBSyxDQUFDTixHQUFELEVBQU1HLE9BQU4sQ0FBTCxDQUFvQkksSUFBcEIsQ0FBeUJDLFFBQVEsSUFBSTtBQUNqQzs7QUFDQSxjQUFRQSxRQUFRLENBQUNDLE1BQWpCO0FBQ0ksYUFBSyxHQUFMO0FBQ0ksZUFBSzNCLGVBQUwsQ0FBcUJFLFdBQXJCLENBQWlDMEIsRUFBakMsQ0FBb0NDLG1CQUFwQyxDQUF3RCwrQ0FBeEQsRUFBeUcsTUFBekcsRUFBaUgsS0FBSzFCLGFBQXRIO0FBQ0Y7O0FBQ0YsYUFBSyxHQUFMO0FBQ0ksZUFBS0gsZUFBTCxDQUFxQkUsV0FBckIsQ0FBaUMwQixFQUFqQyxDQUFvQ0MsbUJBQXBDLENBQXdELHVDQUF4RCxFQUFpRyxPQUFqRyxFQUEwRyxLQUFLekIsYUFBL0c7QUFDRjs7QUFDRixhQUFLLEdBQUw7QUFDSSxlQUFLSixlQUFMLENBQXFCRSxXQUFyQixDQUFpQzBCLEVBQWpDLENBQW9DQyxtQkFBcEMsQ0FBd0QsNENBQXhELEVBQXNHLE9BQXRHLEVBQStHLEtBQUt6QixhQUFwSDtBQUNGOztBQUNGO0FBQ0kwQixVQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxrQkFBWjtBQUNBO0FBWlI7QUFjQyxLQWhCTCxFQWdCT04sSUFoQlAsQ0FnQllsQixJQUFJLElBQUksQ0FFZixDQWxCTCxFQWtCT3lCLEtBbEJQLENBa0JhQyxDQUFDLElBQUk7QUFDVixXQUFLakMsZUFBTCxDQUFxQkUsV0FBckIsQ0FBaUMwQixFQUFqQyxDQUFvQ0MsbUJBQXBDLENBQXdELGlDQUF4RCxFQUEyRixPQUEzRixFQUFvRyxLQUFLekIsYUFBekc7QUFDSCxLQXBCTDtBQXNCZjs7QUFFMkIsUUFBdEJVLHNCQUFzQixHQUM1QjtBQUNJLFNBQUtkLGVBQUwsQ0FBcUJFLFdBQXJCLENBQWlDMEIsRUFBakMsQ0FBb0NNLHFCQUFwQyxDQUEwRCxLQUFLL0IsYUFBL0Q7QUFDQSxTQUFLSCxlQUFMLENBQXFCRSxXQUFyQixDQUFpQzBCLEVBQWpDLENBQW9DTSxxQkFBcEMsQ0FBMEQsS0FBSzlCLGFBQS9EO0FBQ0g7O0FBdkVnQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BhdmFuYWRlL3RlbXBsYXRlLy4vc3JjL2VudGl0eS9BY2NvdW50L1JpYmJvbi9hY2NvdW50LnJpYmJvbi5jb250cm9sbGVyLnRzP2ZhZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRHluYW1pY3NDb250ZXh0IH0gZnJvbSBcIkBhdmFuYWRlL2JpemFwcHMtc2RrXCI7XHJcbmltcG9ydCB7IEFjY291bnRGb3JtIH0gZnJvbSBcIi4uLy4uLy4uL2dlbmVyYXRlZC9mb3Jtcy9hY2NvdW50LmluZm9ybWFjacOzLmZvcm0uZ2VuZXJhdGVkXCI7XHJcbmltcG9ydCB7IEFjY291bnRDb21tYW5kU2VydmljZSB9IGZyb20gXCIuLi9TZXJ2aWNlcy9hY2NvdW50Q29tbWFuZFNlcnZpY2VcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBBY2NvdW50UmliYm9uQ29udHJvbGxlciB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGR5bmFtaWNzQ29udGV4dDogRHluYW1pY3NDb250ZXh0O1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBmb3JtOiBBY2NvdW50Rm9ybTtcclxuICAgIHByaXZhdGUgcmVhZG9ubHkgc3luY0NhbnRlbnNPSzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSByZWFkb25seSBzeW5jQ2FudGVuc0tPOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoZHluYW1pY3NDb250ZXh0OiBEeW5hbWljc0NvbnRleHQpIHtcclxuICAgICAgICB0aGlzLmR5bmFtaWNzQ29udGV4dCA9IGR5bmFtaWNzQ29udGV4dDtcclxuICAgICAgICB0aGlzLmZvcm0gPSBuZXcgQWNjb3VudEZvcm0odGhpcy5keW5hbWljc0NvbnRleHQuZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuc3luY0NhbnRlbnNPSyA9IFwiMDAxXCI7XHJcbiAgICAgICAgdGhpcy5zeW5jQ2FudGVuc0tPID0gXCIwMDJcIjtcclxuICAgIH1cclxuXHJcbiAgICAvKiAjcmVnaW9uIFVuc3Vic2NyaWJlIEJ1dHRvbiAqL1xyXG5cclxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKCkge1xyXG4gICAgICAgIGNvbnN0IGNvbW1hbmRDb250cm9sbGVyID0gbmV3IEFjY291bnRDb21tYW5kU2VydmljZSh0aGlzLmR5bmFtaWNzQ29udGV4dCk7XHJcbiAgICAgICAgLy9hd2FpdCBjb21tYW5kQ29udHJvbGxlci51bnN1YnNjcmliZSh0aGlzLmZvcm0ub2JqZWN0SWQpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuZHluYW1pY3NDb250ZXh0LmZvcm1Db250ZXh0LmRhdGEucmVmcmVzaChmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgaXNVbnN1YnNjcmliZUVuYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiB7IHJlc29sdmUodHJ1ZSk7IH0sIDEwMDApKTtcclxuICAgIH1cclxuXHJcbiAgICAvKiAjZW5kcmVnaW9uICovXHJcblxyXG4gICAgYXN5bmMgc3luY0NhdGVucygpIHtcclxuICAgICAgICB0aGlzLmNscmVhckFsbE5vdGlmaWNhdGlvbnMoKTtcclxuICAgICAgICBjb25zdCBlbnRpdHlDb2RlID0gdGhpcy5mb3JtLnBmY19jYXRhbG9nX2NvZGUuZ2V0VmFsdWUoKTtcclxuICAgICAgICBsZXQgdXJsID0gXCJodHRwczovL2F6dXJlY2F0ZW5zLmF6dXJld2Vic2l0ZXMubmV0L2FwaS9DYWxsQ2F0ZW5zL2NvZGkvXCIgKyBlbnRpdHlDb2RlICsgXCI/Y29kZT1jSmFjWlNrOU0xVWduR3ZXNkN0aXVXQzBobURkQ3RrNUJXOU1hbU53aWFwRDdYWnV3SjBkUXc9PVwiO1xyXG4gICAgICAgIHRoaXMucG9zdERhdGEodXJsKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBwb3N0RGF0YSh1cmw6c3RyaW5nKSB7XHJcbiAgICAgICAgbGV0IHJlc3VsdDtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvL2JvZHk6IEpTT04uc3RyaW5naWZ5KGlucHV0RGF0YSksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdnZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzcG9uc2Uuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDIwMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmR5bmFtaWNzQ29udGV4dC5mb3JtQ29udGV4dC51aS5zZXRGb3JtTm90aWZpY2F0aW9uKFwiU2luY3Jvbml6YWNpw7NuIGNvbiBDQVRFTlMgcmVhbGl6YWRhIGNvbiDDqXhpdG9cIiwgXCJJTkZPXCIsIHRoaXMuc3luY0NhbnRlbnNPSyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0MDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5keW5hbWljc0NvbnRleHQuZm9ybUNvbnRleHQudWkuc2V0Rm9ybU5vdGlmaWNhdGlvbihcIk5vIHNlIGhhIHBvZGlkbyBlbmNvbnRyYXIgbGEgZW50aWRhZC5cIiwgXCJFUlJPUlwiLCB0aGlzLnN5bmNDYW50ZW5zS08pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDA0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHluYW1pY3NDb250ZXh0LmZvcm1Db250ZXh0LnVpLnNldEZvcm1Ob3RpZmljYXRpb24oXCJIYSBvY3VycmlkbyB1biBlcnJvciBhbCBsbGFtYXIgYWwgc2VydmljaW9cIiwgXCJFUlJPUlwiLCB0aGlzLnN5bmNDYW50ZW5zS08pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyB0ZW5nbyBtYXNjb3RhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZGF0YSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHluYW1pY3NDb250ZXh0LmZvcm1Db250ZXh0LnVpLnNldEZvcm1Ob3RpZmljYXRpb24oXCJIYSBvY3VycmlkbyB1biBlcnJvciBpbmVzcGVyYWRvXCIsIFwiRVJST1JcIiwgdGhpcy5zeW5jQ2FudGVuc0tPKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7ICAgXHJcblxyXG4gICAgfVxyXG4gICAgXHJcbiAgICBhc3luYyBjbHJlYXJBbGxOb3RpZmljYXRpb25zKClcclxuICAgIHtcclxuICAgICAgICB0aGlzLmR5bmFtaWNzQ29udGV4dC5mb3JtQ29udGV4dC51aS5jbGVhckZvcm1Ob3RpZmljYXRpb24odGhpcy5zeW5jQ2FudGVuc09LKTtcclxuICAgICAgICB0aGlzLmR5bmFtaWNzQ29udGV4dC5mb3JtQ29udGV4dC51aS5jbGVhckZvcm1Ob3RpZmljYXRpb24odGhpcy5zeW5jQ2FudGVuc0tPKTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQWNjb3VudEZvcm0iLCJBY2NvdW50Q29tbWFuZFNlcnZpY2UiLCJBY2NvdW50UmliYm9uQ29udHJvbGxlciIsImNvbnN0cnVjdG9yIiwiZHluYW1pY3NDb250ZXh0IiwiZm9ybSIsImZvcm1Db250ZXh0Iiwic3luY0NhbnRlbnNPSyIsInN5bmNDYW50ZW5zS08iLCJ1bnN1YnNjcmliZSIsImNvbW1hbmRDb250cm9sbGVyIiwiZGF0YSIsInJlZnJlc2giLCJpc1Vuc3Vic2NyaWJlRW5hYmxlZCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInN5bmNDYXRlbnMiLCJjbHJlYXJBbGxOb3RpZmljYXRpb25zIiwiZW50aXR5Q29kZSIsInBmY19jYXRhbG9nX2NvZGUiLCJnZXRWYWx1ZSIsInVybCIsInBvc3REYXRhIiwicmVzdWx0Iiwib3B0aW9ucyIsIm1ldGhvZCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXNwb25zZSIsInN0YXR1cyIsInVpIiwic2V0Rm9ybU5vdGlmaWNhdGlvbiIsImNvbnNvbGUiLCJsb2ciLCJjYXRjaCIsImUiLCJjbGVhckZvcm1Ob3RpZmljYXRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/entity/Account/Ribbon/account.ribbon.controller.ts\n");

/***/ }),

/***/ "./src/entity/Account/Services/accountCommandService.ts":
/*!**************************************************************!*\
  !*** ./src/entity/Account/Services/accountCommandService.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AccountCommandService\": () => (/* binding */ AccountCommandService)\n/* harmony export */ });\n/* harmony import */ var _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @avanade/bizapps-sdk */ \"./node_modules/@avanade/bizapps-sdk/dist/bizapps-sdk.esm.js\");\n\nclass AccountCommandService extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Observable {\n  constructor(dynamicsContext) {\n    super();\n    this.dynamicsContext = dynamicsContext;\n  }\n\n  async unsubscribe(accountId) {\n    const command = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.ODataCommand(this.dynamicsContext.globalContext);\n    const parameters = {\n      AccountId: accountId\n    };\n    return command.execute(\"Unsubscribe\", parameters);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZW50aXR5L0FjY291bnQvU2VydmljZXMvYWNjb3VudENvbW1hbmRTZXJ2aWNlLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFHTyxNQUFNRSxxQkFBTixTQUFvQ0YsNERBQXBDLENBQStDO0FBR2xERyxFQUFBQSxXQUFXLENBQUNDLGVBQUQsRUFBbUM7QUFDMUM7QUFFQSxTQUFLQSxlQUFMLEdBQXVCQSxlQUF2QjtBQUNIOztBQUVnQixRQUFYQyxXQUFXLENBQUNDLFNBQUQsRUFBb0I7QUFDakMsVUFBTUMsT0FBTyxHQUFHLElBQUlOLDhEQUFKLENBQWlCLEtBQUtHLGVBQUwsQ0FBcUJJLGFBQXRDLENBQWhCO0FBRUEsVUFBTUMsVUFBVSxHQUFHO0FBQ2ZDLE1BQUFBLFNBQVMsRUFBRUo7QUFESSxLQUFuQjtBQUlBLFdBQU9DLE9BQU8sQ0FBQ0ksT0FBUixDQUFnQixhQUFoQixFQUErQkYsVUFBL0IsQ0FBUDtBQUNIOztBQWpCaUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXZhbmFkZS90ZW1wbGF0ZS8uL3NyYy9lbnRpdHkvQWNjb3VudC9TZXJ2aWNlcy9hY2NvdW50Q29tbWFuZFNlcnZpY2UudHM/N2I4NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBPYnNlcnZhYmxlLCBPRGF0YUNvbW1hbmQgfSBmcm9tIFwiQGF2YW5hZGUvYml6YXBwcy1zZGtcIjtcclxuaW1wb3J0IHsgRHluYW1pY3NDb250ZXh0IH0gZnJvbSBcIkBhdmFuYWRlL2JpemFwcHMtc2RrXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgQWNjb3VudENvbW1hbmRTZXJ2aWNlIGV4dGVuZHMgT2JzZXJ2YWJsZSB7XHJcbiAgICBwcml2YXRlIHJlYWRvbmx5IGR5bmFtaWNzQ29udGV4dDogRHluYW1pY3NDb250ZXh0O1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihkeW5hbWljc0NvbnRleHQ6IER5bmFtaWNzQ29udGV4dCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuZHluYW1pY3NDb250ZXh0ID0gZHluYW1pY3NDb250ZXh0O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVuc3Vic2NyaWJlKGFjY291bnRJZDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgY29tbWFuZCA9IG5ldyBPRGF0YUNvbW1hbmQodGhpcy5keW5hbWljc0NvbnRleHQuZ2xvYmFsQ29udGV4dCk7XHJcblxyXG4gICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgICAgIEFjY291bnRJZDogYWNjb3VudElkLFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBjb21tYW5kLmV4ZWN1dGUoXCJVbnN1YnNjcmliZVwiLCBwYXJhbWV0ZXJzKTtcclxuICAgIH1cclxufVxyXG4iXSwibmFtZXMiOlsiT2JzZXJ2YWJsZSIsIk9EYXRhQ29tbWFuZCIsIkFjY291bnRDb21tYW5kU2VydmljZSIsImNvbnN0cnVjdG9yIiwiZHluYW1pY3NDb250ZXh0IiwidW5zdWJzY3JpYmUiLCJhY2NvdW50SWQiLCJjb21tYW5kIiwiZ2xvYmFsQ29udGV4dCIsInBhcmFtZXRlcnMiLCJBY2NvdW50SWQiLCJleGVjdXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/entity/Account/Services/accountCommandService.ts\n");

/***/ }),

/***/ "./src/generated/forms/account.informaci.form.generated.ts":
/*!******************************************************************!*\
  !*** ./src/generated/forms/account.informaci.form.generated.ts ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"AccountForm\": () => (/* binding */ AccountForm),\n/* harmony export */   \"SUMMARY_TABTab\": () => (/* binding */ SUMMARY_TABTab),\n/* harmony export */   \"tab_14Tab\": () => (/* binding */ tab_14Tab),\n/* harmony export */   \"tab_9Tab\": () => (/* binding */ tab_9Tab),\n/* harmony export */   \"tab_11Tab\": () => (/* binding */ tab_11Tab),\n/* harmony export */   \"tab_12Tab\": () => (/* binding */ tab_12Tab),\n/* harmony export */   \"tab_10Tab\": () => (/* binding */ tab_10Tab),\n/* harmony export */   \"tab_13Tab\": () => (/* binding */ tab_13Tab),\n/* harmony export */   \"tab_8Tab\": () => (/* binding */ tab_8Tab)\n/* harmony export */ });\n/* harmony import */ var _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @avanade/bizapps-sdk */ \"./node_modules/@avanade/bizapps-sdk/dist/bizapps-sdk.esm.js\");\n// Available Form(sb): Informaci, TimelineWallControl - Compte - Principal, Compte per a lexperincia de diverses sessions, Sales Insights, Creaci rpida d'un compte, Organismes\n// Actual Form:       Informaci\n\nclass AccountForm extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.FormObjectBase {\n  constructor(formContext) {\n    super(formContext, \"Informaci\");\n    this.Address1_AddressId = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.UniqueidentifierFormAttribute(\"address1_addressid\", formContext);\n    this.Address1_City = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"address1_city\", formContext);\n    this.Address1_Line1 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"address1_line1\", formContext);\n    this.Address1_Line2 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"address1_line2\", formContext);\n    this.Address1_Line3 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"address1_line3\", formContext);\n    this.Address1_PostalCode = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"address1_postalcode\", formContext);\n    this.Address1_StateOrProvince = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"address1_stateorprovince\", formContext);\n    this.Address1_Telephone1 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"address1_telephone1\", formContext);\n    this.Address2_AddressId = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.UniqueidentifierFormAttribute(\"address2_addressid\", formContext);\n    this.CreatedBy = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.LookupFormAttribute(\"createdby\", formContext);\n    this.CreatedOn = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.DateTimeFormAttribute(\"createdon\", formContext);\n    this.EMailAddress1 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"emailaddress1\", formContext);\n    this.ModifiedBy = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.LookupFormAttribute(\"modifiedby\", formContext);\n    this.ModifiedOn = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.DateTimeFormAttribute(\"modifiedon\", formContext);\n    this.Name = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"name\", formContext);\n    this.OwnerId = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.OwnerFormAttribute(\"ownerid\", formContext);\n    this.pfc_acronym = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_acronym\", formContext);\n    this.pfc_brand_acronym = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_brand_acronym\", formContext);\n    this.pfc_catalog_code = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_catalog_code\", formContext);\n    this.pfc_catalogentitytype = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_catalogentitytype\", formContext);\n    this.pfc_ccaa_inventory_code = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_ccaa_inventory_code\", formContext);\n    this.pfc_classification_inventory_ccaa = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_classification_inventory_ccaa\", formContext);\n    this.pfc_departamental_agrupationid = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.LookupFormAttribute(\"pfc_departamental_agrupationid\", formContext);\n    this.pfc_eco_jur_end_date = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.DateTimeFormAttribute(\"pfc_eco_jur_end_date\", formContext);\n    this.pfc_eco_jur_init_date = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.DateTimeFormAttribute(\"pfc_eco_jur_init_date\", formContext);\n    this.pfc_entity_classification = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_entity_classification\", formContext);\n    this.pfc_entitytype = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.PicklistFormAttribute(\"pfc_entitytype\", formContext);\n    this.pfc_governing_body = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_governing_body\", formContext);\n    this.pfc_high_source = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_high_source\", formContext);\n    this.pfc_high_source_information = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_high_source_information\", formContext);\n    this.pfc_lastsynchronization = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.DateTimeFormAttribute(\"pfc_lastsynchronization\", formContext);\n    this.pfc_legal_nature_aggregate = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_legal_nature_aggregate\", formContext);\n    this.pfc_managerId = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.LookupFormAttribute(\"pfc_managerid\", formContext);\n    this.pfc_maximum_number_of_members = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_maximum_number_of_members\", formContext);\n    this.pfc_measuring_participation = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_measuring_participation\", formContext);\n    this.pfc_minimum_number_of_members = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_minimum_number_of_members\", formContext);\n    this.pfc_nif = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_nif\", formContext);\n    this.pfc_observations = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_observations\", formContext);\n    this.pfc_pmp_area = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_pmp_area\", formContext);\n    this.pfc_registration_from = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_registration_from\", formContext);\n    this.pfc_registrationcode = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_registrationcode\", formContext);\n    this.pfc_responsableid = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.LookupFormAttribute(\"pfc_responsableid\", formContext);\n    this.pfc_SAC_address = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_sac_address\", formContext);\n    this.pfc_sectorization_sec_generalitat_criterion = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_sectorization_sec_generalitat_criterion\", formContext);\n    this.pfc_street_type = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_street_type\", formContext);\n    this.pfc_total_members_generalitat = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_total_members_generalitat\", formContext);\n    this.pfc_total_participate_gene_uni = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_total_participate_gene_uni\", formContext);\n    this.pfc_total_participation_generalitat = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_total_participation_generalitat\", formContext);\n    this.pfc_total_participation_public_sector = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"pfc_total_participation_public_sector\", formContext);\n    this.pfc_vinculat_catens = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.BooleanFormAttribute(\"pfc_vinculat_catens\", formContext);\n    this.WebSiteURL = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.StringFormAttribute(\"websiteurl\", formContext);\n    this.SUMMARY_TAB = new SUMMARY_TABTab(\"SUMMARY_TAB\", formContext);\n    this.SUMMARY_TAB.ACCOUNT_INFORMATION = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"SUMMARY_TAB\", \"ACCOUNT_INFORMATION\", formContext);\n    this.SUMMARY_TAB.tab_3_section_2 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"SUMMARY_TAB\", \"tab_3_section_2\", formContext);\n    this.tab_14 = new tab_14Tab(\"tab_14\", formContext);\n    this.tab_14.tab_dades_registrals = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_14\", \"tab_dades_registrals\", formContext);\n    this.tab_14.tab_inventory_data = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_14\", \"tab_inventory_data\", formContext);\n    this.tab_14.tab_economic_legal_data = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_14\", \"tab_economic_legal_data\", formContext);\n    this.tab_14.tab_postal_data = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_14\", \"tab_postal_data\", formContext);\n    this.tab_14.tab_participants_header_data = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_14\", \"tab_participants_header_data\", formContext);\n    this.tab_14.tab_header_data_governing_body = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_14\", \"tab_header_data_governing_body\", formContext);\n    this.tab_9 = new tab_9Tab(\"tab_9\", formContext);\n    this.tab_9.tab_9_section_1 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_9\", \"tab_9_section_1\", formContext);\n    this.tab_11 = new tab_11Tab(\"tab_11\", formContext);\n    this.tab_11.tab_11_section_1 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_11\", \"tab_11_section_1\", formContext);\n    this.tab_12 = new tab_12Tab(\"tab_12\", formContext);\n    this.tab_12.tab_12_section_1 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_12\", \"tab_12_section_1\", formContext);\n    this.tab_10 = new tab_10Tab(\"tab_10\", formContext);\n    this.tab_10.tab_10_section_1 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_10\", \"tab_10_section_1\", formContext);\n    this.tab_13 = new tab_13Tab(\"tab_13\", formContext);\n    this.tab_13.tab_13_section_1 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_13\", \"tab_13_section_1\", formContext);\n    this.tab_8 = new tab_8Tab(\"tab_8\", formContext);\n    this.tab_8.tab_8_section_1 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_8\", \"tab_8_section_1\", formContext);\n    this.tab_8.tab_8_section_3 = new _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Section(\"tab_8\", \"tab_8_section_3\", formContext);\n  }\n\n}\nclass SUMMARY_TABTab extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Tab {\n  constructor(tabName, formContext) {\n    super(tabName, formContext);\n  }\n\n}\nclass tab_14Tab extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Tab {\n  constructor(tabName, formContext) {\n    super(tabName, formContext);\n  }\n\n}\nclass tab_9Tab extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Tab {\n  constructor(tabName, formContext) {\n    super(tabName, formContext);\n  }\n\n}\nclass tab_11Tab extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Tab {\n  constructor(tabName, formContext) {\n    super(tabName, formContext);\n  }\n\n}\nclass tab_12Tab extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Tab {\n  constructor(tabName, formContext) {\n    super(tabName, formContext);\n  }\n\n}\nclass tab_10Tab extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Tab {\n  constructor(tabName, formContext) {\n    super(tabName, formContext);\n  }\n\n}\nclass tab_13Tab extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Tab {\n  constructor(tabName, formContext) {\n    super(tabName, formContext);\n  }\n\n}\nclass tab_8Tab extends _avanade_bizapps_sdk__WEBPACK_IMPORTED_MODULE_0__.Tab {\n  constructor(tabName, formContext) {\n    super(tabName, formContext);\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2VuZXJhdGVkL2Zvcm1zL2FjY291bnQuaW5mb3JtYWNpw7MuZm9ybS5nZW5lcmF0ZWQudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFFQTtBQWFPLE1BQU1VLFdBQU4sU0FBMEJWLGdFQUExQixDQUF5QztBQThENUNXLEVBQUFBLFdBQVcsQ0FBQ0MsV0FBRCxFQUErQjtBQUN0QyxVQUFNQSxXQUFOLEVBQW1CLFlBQW5CO0FBRUEsU0FBS0Msa0JBQUwsR0FBMEIsSUFBSU4sK0VBQUosQ0FBa0Msb0JBQWxDLEVBQXdESyxXQUF4RCxDQUExQjtBQUNBLFNBQUtFLGFBQUwsR0FBcUIsSUFBSVgscUVBQUosQ0FBd0IsZUFBeEIsRUFBeUNTLFdBQXpDLENBQXJCO0FBQ0EsU0FBS0csY0FBTCxHQUFzQixJQUFJWixxRUFBSixDQUF3QixnQkFBeEIsRUFBMENTLFdBQTFDLENBQXRCO0FBQ0EsU0FBS0ksY0FBTCxHQUFzQixJQUFJYixxRUFBSixDQUF3QixnQkFBeEIsRUFBMENTLFdBQTFDLENBQXRCO0FBQ0EsU0FBS0ssY0FBTCxHQUFzQixJQUFJZCxxRUFBSixDQUF3QixnQkFBeEIsRUFBMENTLFdBQTFDLENBQXRCO0FBQ0EsU0FBS00sbUJBQUwsR0FBMkIsSUFBSWYscUVBQUosQ0FBd0IscUJBQXhCLEVBQStDUyxXQUEvQyxDQUEzQjtBQUNBLFNBQUtPLHdCQUFMLEdBQWdDLElBQUloQixxRUFBSixDQUF3QiwwQkFBeEIsRUFBb0RTLFdBQXBELENBQWhDO0FBQ0EsU0FBS1EsbUJBQUwsR0FBMkIsSUFBSWpCLHFFQUFKLENBQXdCLHFCQUF4QixFQUErQ1MsV0FBL0MsQ0FBM0I7QUFDQSxTQUFLUyxrQkFBTCxHQUEwQixJQUFJZCwrRUFBSixDQUFrQyxvQkFBbEMsRUFBd0RLLFdBQXhELENBQTFCO0FBQ0EsU0FBS1UsU0FBTCxHQUFpQixJQUFJakIscUVBQUosQ0FBd0IsV0FBeEIsRUFBcUNPLFdBQXJDLENBQWpCO0FBQ0EsU0FBS1csU0FBTCxHQUFpQixJQUFJakIsdUVBQUosQ0FBMEIsV0FBMUIsRUFBdUNNLFdBQXZDLENBQWpCO0FBQ0EsU0FBS1ksYUFBTCxHQUFxQixJQUFJckIscUVBQUosQ0FBd0IsZUFBeEIsRUFBeUNTLFdBQXpDLENBQXJCO0FBQ0EsU0FBS2EsVUFBTCxHQUFrQixJQUFJcEIscUVBQUosQ0FBd0IsWUFBeEIsRUFBc0NPLFdBQXRDLENBQWxCO0FBQ0EsU0FBS2MsVUFBTCxHQUFrQixJQUFJcEIsdUVBQUosQ0FBMEIsWUFBMUIsRUFBd0NNLFdBQXhDLENBQWxCO0FBQ0EsU0FBS2UsSUFBTCxHQUFZLElBQUl4QixxRUFBSixDQUF3QixNQUF4QixFQUFnQ1MsV0FBaEMsQ0FBWjtBQUNBLFNBQUtnQixPQUFMLEdBQWUsSUFBSXBCLG9FQUFKLENBQXVCLFNBQXZCLEVBQWtDSSxXQUFsQyxDQUFmO0FBQ0EsU0FBS2lCLFdBQUwsR0FBbUIsSUFBSTFCLHFFQUFKLENBQXdCLGFBQXhCLEVBQXVDUyxXQUF2QyxDQUFuQjtBQUNBLFNBQUtrQixpQkFBTCxHQUF5QixJQUFJM0IscUVBQUosQ0FBd0IsbUJBQXhCLEVBQTZDUyxXQUE3QyxDQUF6QjtBQUNBLFNBQUttQixnQkFBTCxHQUF3QixJQUFJNUIscUVBQUosQ0FBd0Isa0JBQXhCLEVBQTRDUyxXQUE1QyxDQUF4QjtBQUNBLFNBQUtvQixxQkFBTCxHQUE2QixJQUFJN0IscUVBQUosQ0FBd0IsdUJBQXhCLEVBQWlEUyxXQUFqRCxDQUE3QjtBQUNBLFNBQUtxQix1QkFBTCxHQUErQixJQUFJOUIscUVBQUosQ0FBd0IseUJBQXhCLEVBQW1EUyxXQUFuRCxDQUEvQjtBQUNBLFNBQUtzQixpQ0FBTCxHQUF5QyxJQUFJL0IscUVBQUosQ0FBd0IsbUNBQXhCLEVBQTZEUyxXQUE3RCxDQUF6QztBQUNBLFNBQUt1Qiw4QkFBTCxHQUFzQyxJQUFJOUIscUVBQUosQ0FBd0IsZ0NBQXhCLEVBQTBETyxXQUExRCxDQUF0QztBQUNBLFNBQUt3QixvQkFBTCxHQUE0QixJQUFJOUIsdUVBQUosQ0FBMEIsc0JBQTFCLEVBQWtETSxXQUFsRCxDQUE1QjtBQUNBLFNBQUt5QixxQkFBTCxHQUE2QixJQUFJL0IsdUVBQUosQ0FBMEIsdUJBQTFCLEVBQW1ETSxXQUFuRCxDQUE3QjtBQUNBLFNBQUswQix5QkFBTCxHQUFpQyxJQUFJbkMscUVBQUosQ0FBd0IsMkJBQXhCLEVBQXFEUyxXQUFyRCxDQUFqQztBQUNBLFNBQUsyQixjQUFMLEdBQXNCLElBQUluQyx1RUFBSixDQUEwQixnQkFBMUIsRUFBNENRLFdBQTVDLENBQXRCO0FBQ0EsU0FBSzRCLGtCQUFMLEdBQTBCLElBQUlyQyxxRUFBSixDQUF3QixvQkFBeEIsRUFBOENTLFdBQTlDLENBQTFCO0FBQ0EsU0FBSzZCLGVBQUwsR0FBdUIsSUFBSXRDLHFFQUFKLENBQXdCLGlCQUF4QixFQUEyQ1MsV0FBM0MsQ0FBdkI7QUFDQSxTQUFLOEIsMkJBQUwsR0FBbUMsSUFBSXZDLHFFQUFKLENBQXdCLDZCQUF4QixFQUF1RFMsV0FBdkQsQ0FBbkM7QUFDQSxTQUFLK0IsdUJBQUwsR0FBK0IsSUFBSXJDLHVFQUFKLENBQTBCLHlCQUExQixFQUFxRE0sV0FBckQsQ0FBL0I7QUFDQSxTQUFLZ0MsMEJBQUwsR0FBa0MsSUFBSXpDLHFFQUFKLENBQXdCLDRCQUF4QixFQUFzRFMsV0FBdEQsQ0FBbEM7QUFDQSxTQUFLaUMsYUFBTCxHQUFxQixJQUFJeEMscUVBQUosQ0FBd0IsZUFBeEIsRUFBeUNPLFdBQXpDLENBQXJCO0FBQ0EsU0FBS2tDLDZCQUFMLEdBQXFDLElBQUkzQyxxRUFBSixDQUF3QiwrQkFBeEIsRUFBeURTLFdBQXpELENBQXJDO0FBQ0EsU0FBS21DLDJCQUFMLEdBQW1DLElBQUk1QyxxRUFBSixDQUF3Qiw2QkFBeEIsRUFBdURTLFdBQXZELENBQW5DO0FBQ0EsU0FBS29DLDZCQUFMLEdBQXFDLElBQUk3QyxxRUFBSixDQUF3QiwrQkFBeEIsRUFBeURTLFdBQXpELENBQXJDO0FBQ0EsU0FBS3FDLE9BQUwsR0FBZSxJQUFJOUMscUVBQUosQ0FBd0IsU0FBeEIsRUFBbUNTLFdBQW5DLENBQWY7QUFDQSxTQUFLc0MsZ0JBQUwsR0FBd0IsSUFBSS9DLHFFQUFKLENBQXdCLGtCQUF4QixFQUE0Q1MsV0FBNUMsQ0FBeEI7QUFDQSxTQUFLdUMsWUFBTCxHQUFvQixJQUFJaEQscUVBQUosQ0FBd0IsY0FBeEIsRUFBd0NTLFdBQXhDLENBQXBCO0FBQ0EsU0FBS3dDLHFCQUFMLEdBQTZCLElBQUlqRCxxRUFBSixDQUF3Qix1QkFBeEIsRUFBaURTLFdBQWpELENBQTdCO0FBQ0EsU0FBS3lDLG9CQUFMLEdBQTRCLElBQUlsRCxxRUFBSixDQUF3QixzQkFBeEIsRUFBZ0RTLFdBQWhELENBQTVCO0FBQ0EsU0FBSzBDLGlCQUFMLEdBQXlCLElBQUlqRCxxRUFBSixDQUF3QixtQkFBeEIsRUFBNkNPLFdBQTdDLENBQXpCO0FBQ0EsU0FBSzJDLGVBQUwsR0FBdUIsSUFBSXBELHFFQUFKLENBQXdCLGlCQUF4QixFQUEyQ1MsV0FBM0MsQ0FBdkI7QUFDQSxTQUFLNEMsMkNBQUwsR0FBbUQsSUFBSXJELHFFQUFKLENBQXdCLDZDQUF4QixFQUF1RVMsV0FBdkUsQ0FBbkQ7QUFDQSxTQUFLNkMsZUFBTCxHQUF1QixJQUFJdEQscUVBQUosQ0FBd0IsaUJBQXhCLEVBQTJDUyxXQUEzQyxDQUF2QjtBQUNBLFNBQUs4Qyw2QkFBTCxHQUFxQyxJQUFJdkQscUVBQUosQ0FBd0IsK0JBQXhCLEVBQXlEUyxXQUF6RCxDQUFyQztBQUNBLFNBQUsrQyw4QkFBTCxHQUFzQyxJQUFJeEQscUVBQUosQ0FBd0IsZ0NBQXhCLEVBQTBEUyxXQUExRCxDQUF0QztBQUNBLFNBQUtnRCxtQ0FBTCxHQUEyQyxJQUFJekQscUVBQUosQ0FBd0IscUNBQXhCLEVBQStEUyxXQUEvRCxDQUEzQztBQUNBLFNBQUtpRCxxQ0FBTCxHQUE2QyxJQUFJMUQscUVBQUosQ0FBd0IsdUNBQXhCLEVBQWlFUyxXQUFqRSxDQUE3QztBQUNBLFNBQUtrRCxtQkFBTCxHQUEyQixJQUFJckQsc0VBQUosQ0FBeUIscUJBQXpCLEVBQWdERyxXQUFoRCxDQUEzQjtBQUNBLFNBQUttRCxVQUFMLEdBQWtCLElBQUk1RCxxRUFBSixDQUF3QixZQUF4QixFQUFzQ1MsV0FBdEMsQ0FBbEI7QUFFQSxTQUFLb0QsV0FBTCxHQUFtQixJQUFJQyxjQUFKLENBQW1CLGFBQW5CLEVBQWtDckQsV0FBbEMsQ0FBbkI7QUFDQSxTQUFLb0QsV0FBTCxDQUFpQkUsbUJBQWpCLEdBQXVDLElBQUloRSx5REFBSixDQUFZLGFBQVosRUFBMkIscUJBQTNCLEVBQWtEVSxXQUFsRCxDQUF2QztBQUNBLFNBQUtvRCxXQUFMLENBQWlCRyxlQUFqQixHQUFtQyxJQUFJakUseURBQUosQ0FBWSxhQUFaLEVBQTJCLGlCQUEzQixFQUE4Q1UsV0FBOUMsQ0FBbkM7QUFDQSxTQUFLd0QsTUFBTCxHQUFjLElBQUlDLFNBQUosQ0FBYyxRQUFkLEVBQXdCekQsV0FBeEIsQ0FBZDtBQUNBLFNBQUt3RCxNQUFMLENBQVlFLG9CQUFaLEdBQW1DLElBQUlwRSx5REFBSixDQUFZLFFBQVosRUFBc0Isc0JBQXRCLEVBQThDVSxXQUE5QyxDQUFuQztBQUNBLFNBQUt3RCxNQUFMLENBQVlHLGtCQUFaLEdBQWlDLElBQUlyRSx5REFBSixDQUFZLFFBQVosRUFBc0Isb0JBQXRCLEVBQTRDVSxXQUE1QyxDQUFqQztBQUNBLFNBQUt3RCxNQUFMLENBQVlJLHVCQUFaLEdBQXNDLElBQUl0RSx5REFBSixDQUFZLFFBQVosRUFBc0IseUJBQXRCLEVBQWlEVSxXQUFqRCxDQUF0QztBQUNBLFNBQUt3RCxNQUFMLENBQVlLLGVBQVosR0FBOEIsSUFBSXZFLHlEQUFKLENBQVksUUFBWixFQUFzQixpQkFBdEIsRUFBeUNVLFdBQXpDLENBQTlCO0FBQ0EsU0FBS3dELE1BQUwsQ0FBWU0sNEJBQVosR0FBMkMsSUFBSXhFLHlEQUFKLENBQVksUUFBWixFQUFzQiw4QkFBdEIsRUFBc0RVLFdBQXRELENBQTNDO0FBQ0EsU0FBS3dELE1BQUwsQ0FBWU8sOEJBQVosR0FBNkMsSUFBSXpFLHlEQUFKLENBQVksUUFBWixFQUFzQixnQ0FBdEIsRUFBd0RVLFdBQXhELENBQTdDO0FBQ0EsU0FBS2dFLEtBQUwsR0FBYSxJQUFJQyxRQUFKLENBQWEsT0FBYixFQUFzQmpFLFdBQXRCLENBQWI7QUFDQSxTQUFLZ0UsS0FBTCxDQUFXRSxlQUFYLEdBQTZCLElBQUk1RSx5REFBSixDQUFZLE9BQVosRUFBcUIsaUJBQXJCLEVBQXdDVSxXQUF4QyxDQUE3QjtBQUNBLFNBQUttRSxNQUFMLEdBQWMsSUFBSUMsU0FBSixDQUFjLFFBQWQsRUFBd0JwRSxXQUF4QixDQUFkO0FBQ0EsU0FBS21FLE1BQUwsQ0FBWUUsZ0JBQVosR0FBK0IsSUFBSS9FLHlEQUFKLENBQVksUUFBWixFQUFzQixrQkFBdEIsRUFBMENVLFdBQTFDLENBQS9CO0FBQ0EsU0FBS3NFLE1BQUwsR0FBYyxJQUFJQyxTQUFKLENBQWMsUUFBZCxFQUF3QnZFLFdBQXhCLENBQWQ7QUFDQSxTQUFLc0UsTUFBTCxDQUFZRSxnQkFBWixHQUErQixJQUFJbEYseURBQUosQ0FBWSxRQUFaLEVBQXNCLGtCQUF0QixFQUEwQ1UsV0FBMUMsQ0FBL0I7QUFDQSxTQUFLeUUsTUFBTCxHQUFjLElBQUlDLFNBQUosQ0FBYyxRQUFkLEVBQXdCMUUsV0FBeEIsQ0FBZDtBQUNBLFNBQUt5RSxNQUFMLENBQVlFLGdCQUFaLEdBQStCLElBQUlyRix5REFBSixDQUFZLFFBQVosRUFBc0Isa0JBQXRCLEVBQTBDVSxXQUExQyxDQUEvQjtBQUNBLFNBQUs0RSxNQUFMLEdBQWMsSUFBSUMsU0FBSixDQUFjLFFBQWQsRUFBd0I3RSxXQUF4QixDQUFkO0FBQ0EsU0FBSzRFLE1BQUwsQ0FBWUUsZ0JBQVosR0FBK0IsSUFBSXhGLHlEQUFKLENBQVksUUFBWixFQUFzQixrQkFBdEIsRUFBMENVLFdBQTFDLENBQS9CO0FBQ0EsU0FBSytFLEtBQUwsR0FBYSxJQUFJQyxRQUFKLENBQWEsT0FBYixFQUFzQmhGLFdBQXRCLENBQWI7QUFDQSxTQUFLK0UsS0FBTCxDQUFXRSxlQUFYLEdBQTZCLElBQUkzRix5REFBSixDQUFZLE9BQVosRUFBcUIsaUJBQXJCLEVBQXdDVSxXQUF4QyxDQUE3QjtBQUNBLFNBQUsrRSxLQUFMLENBQVdHLGVBQVgsR0FBNkIsSUFBSTVGLHlEQUFKLENBQVksT0FBWixFQUFxQixpQkFBckIsRUFBd0NVLFdBQXhDLENBQTdCO0FBQ0g7O0FBNUkyQztBQStJekMsTUFBTXFELGNBQU4sU0FBNkJoRSxxREFBN0IsQ0FBaUM7QUFJcENVLEVBQUFBLFdBQVcsQ0FBQ29GLE9BQUQsRUFBa0JuRixXQUFsQixFQUFnRDtBQUFFLFVBQU1tRixPQUFOLEVBQWVuRixXQUFmO0FBQThCOztBQUp2RDtBQU9qQyxNQUFNeUQsU0FBTixTQUF3QnBFLHFEQUF4QixDQUE0QjtBQVEvQlUsRUFBQUEsV0FBVyxDQUFDb0YsT0FBRCxFQUFrQm5GLFdBQWxCLEVBQWdEO0FBQUUsVUFBTW1GLE9BQU4sRUFBZW5GLFdBQWY7QUFBOEI7O0FBUjVEO0FBVzVCLE1BQU1pRSxRQUFOLFNBQXVCNUUscURBQXZCLENBQTJCO0FBRzlCVSxFQUFBQSxXQUFXLENBQUNvRixPQUFELEVBQWtCbkYsV0FBbEIsRUFBZ0Q7QUFBRSxVQUFNbUYsT0FBTixFQUFlbkYsV0FBZjtBQUE4Qjs7QUFIN0Q7QUFNM0IsTUFBTW9FLFNBQU4sU0FBd0IvRSxxREFBeEIsQ0FBNEI7QUFHL0JVLEVBQUFBLFdBQVcsQ0FBQ29GLE9BQUQsRUFBa0JuRixXQUFsQixFQUFnRDtBQUFFLFVBQU1tRixPQUFOLEVBQWVuRixXQUFmO0FBQThCOztBQUg1RDtBQU01QixNQUFNdUUsU0FBTixTQUF3QmxGLHFEQUF4QixDQUE0QjtBQUcvQlUsRUFBQUEsV0FBVyxDQUFDb0YsT0FBRCxFQUFrQm5GLFdBQWxCLEVBQWdEO0FBQUUsVUFBTW1GLE9BQU4sRUFBZW5GLFdBQWY7QUFBOEI7O0FBSDVEO0FBTTVCLE1BQU0wRSxTQUFOLFNBQXdCckYscURBQXhCLENBQTRCO0FBRy9CVSxFQUFBQSxXQUFXLENBQUNvRixPQUFELEVBQWtCbkYsV0FBbEIsRUFBZ0Q7QUFBRSxVQUFNbUYsT0FBTixFQUFlbkYsV0FBZjtBQUE4Qjs7QUFINUQ7QUFNNUIsTUFBTTZFLFNBQU4sU0FBd0J4RixxREFBeEIsQ0FBNEI7QUFHL0JVLEVBQUFBLFdBQVcsQ0FBQ29GLE9BQUQsRUFBa0JuRixXQUFsQixFQUFnRDtBQUFFLFVBQU1tRixPQUFOLEVBQWVuRixXQUFmO0FBQThCOztBQUg1RDtBQU01QixNQUFNZ0YsUUFBTixTQUF1QjNGLHFEQUF2QixDQUEyQjtBQUk5QlUsRUFBQUEsV0FBVyxDQUFDb0YsT0FBRCxFQUFrQm5GLFdBQWxCLEVBQWdEO0FBQUUsVUFBTW1GLE9BQU4sRUFBZW5GLFdBQWY7QUFBOEI7O0FBSjdEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGF2YW5hZGUvdGVtcGxhdGUvLi9zcmMvZ2VuZXJhdGVkL2Zvcm1zL2FjY291bnQuaW5mb3JtYWNpw7MuZm9ybS5nZW5lcmF0ZWQudHM/MDA1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJcclxuLy8gQXZhaWxhYmxlIEZvcm0oc2IpOiBJbmZvcm1hY2nDsywgVGltZWxpbmVXYWxsQ29udHJvbCAtIENvbXB0ZSAtIFByaW5jaXBhbCwgQ29tcHRlIHBlciBhIGzigJlleHBlcmnDqG5jaWEgZGUgZGl2ZXJzZXMgc2Vzc2lvbnMsIFNhbGVzIEluc2lnaHRzLCBDcmVhY2nDsyByw6BwaWRhIGQndW4gY29tcHRlLCBPcmdhbmlzbWVzXHJcbi8vIEFjdHVhbCBGb3JtOiAgICAgICBJbmZvcm1hY2nDs1xyXG5cclxuaW1wb3J0IHtcclxuICAgIEZvcm1PYmplY3RCYXNlLFxyXG4gICAgVGFiLFxyXG4gICAgU2VjdGlvbixcclxuICAgIFN0cmluZ0Zvcm1BdHRyaWJ1dGUsXHJcbiAgICBQaWNrbGlzdEZvcm1BdHRyaWJ1dGUsXHJcbiAgICBMb29rdXBGb3JtQXR0cmlidXRlLFxyXG4gICAgRGF0ZVRpbWVGb3JtQXR0cmlidXRlLFxyXG4gICAgVW5pcXVlaWRlbnRpZmllckZvcm1BdHRyaWJ1dGUsXHJcbiAgICBPd25lckZvcm1BdHRyaWJ1dGUsXHJcbiAgICBCb29sZWFuRm9ybUF0dHJpYnV0ZVxyXG59IGZyb20gXCJAYXZhbmFkZS9iaXphcHBzLXNka1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFjY291bnRGb3JtIGV4dGVuZHMgRm9ybU9iamVjdEJhc2Uge1xyXG4gICAgcHVibGljIEFkZHJlc3MxX0FkZHJlc3NJZDogVW5pcXVlaWRlbnRpZmllckZvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgQWRkcmVzczFfQ2l0eTogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBBZGRyZXNzMV9MaW5lMTogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBBZGRyZXNzMV9MaW5lMjogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBBZGRyZXNzMV9MaW5lMzogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBBZGRyZXNzMV9Qb3N0YWxDb2RlOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIEFkZHJlc3MxX1N0YXRlT3JQcm92aW5jZTogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBBZGRyZXNzMV9UZWxlcGhvbmUxOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIEFkZHJlc3MyX0FkZHJlc3NJZDogVW5pcXVlaWRlbnRpZmllckZvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgQ3JlYXRlZEJ5OiBMb29rdXBGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIENyZWF0ZWRPbjogRGF0ZVRpbWVGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIEVNYWlsQWRkcmVzczE6IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgTW9kaWZpZWRCeTogTG9va3VwRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBNb2RpZmllZE9uOiBEYXRlVGltZUZvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgTmFtZTogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBPd25lcklkOiBPd25lckZvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX2Fjcm9ueW06IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX2JyYW5kX2Fjcm9ueW06IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX2NhdGFsb2dfY29kZTogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBwZmNfY2F0YWxvZ2VudGl0eXR5cGU6IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX2NjYWFfaW52ZW50b3J5X2NvZGU6IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX2NsYXNzaWZpY2F0aW9uX2ludmVudG9yeV9jY2FhOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19kZXBhcnRhbWVudGFsX2FncnVwYXRpb25pZDogTG9va3VwRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBwZmNfZWNvX2p1cl9lbmRfZGF0ZTogRGF0ZVRpbWVGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19lY29fanVyX2luaXRfZGF0ZTogRGF0ZVRpbWVGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19lbnRpdHlfY2xhc3NpZmljYXRpb246IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX2VudGl0eXR5cGU6IFBpY2tsaXN0Rm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBwZmNfZ292ZXJuaW5nX2JvZHk6IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX2hpZ2hfc291cmNlOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19oaWdoX3NvdXJjZV9pbmZvcm1hdGlvbjogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBwZmNfbGFzdHN5bmNocm9uaXphdGlvbjogRGF0ZVRpbWVGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19sZWdhbF9uYXR1cmVfYWdncmVnYXRlOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19tYW5hZ2VySWQ6IExvb2t1cEZvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX21heGltdW1fbnVtYmVyX29mX21lbWJlcnM6IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX21lYXN1cmluZ19wYXJ0aWNpcGF0aW9uOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19taW5pbXVtX251bWJlcl9vZl9tZW1iZXJzOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19uaWY6IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX29ic2VydmF0aW9uczogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBwZmNfcG1wX2FyZWE6IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX3JlZ2lzdHJhdGlvbl9mcm9tOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19yZWdpc3RyYXRpb25jb2RlOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19yZXNwb25zYWJsZWlkOiBMb29rdXBGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19TQUNfYWRkcmVzczogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBwZmNfc2VjdG9yaXphdGlvbl9zZWNfZ2VuZXJhbGl0YXRfY3JpdGVyaW9uOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG4gICAgcHVibGljIHBmY19zdHJlZXRfdHlwZTogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBwZmNfdG90YWxfbWVtYmVyc19nZW5lcmFsaXRhdDogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBwZmNfdG90YWxfcGFydGljaXBhdGVfZ2VuZV91bmk6IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX3RvdGFsX3BhcnRpY2lwYXRpb25fZ2VuZXJhbGl0YXQ6IFN0cmluZ0Zvcm1BdHRyaWJ1dGU7XHJcbiAgICBwdWJsaWMgcGZjX3RvdGFsX3BhcnRpY2lwYXRpb25fcHVibGljX3NlY3RvcjogU3RyaW5nRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBwZmNfdmluY3VsYXRfY2F0ZW5zOiBCb29sZWFuRm9ybUF0dHJpYnV0ZTtcclxuICAgIHB1YmxpYyBXZWJTaXRlVVJMOiBTdHJpbmdGb3JtQXR0cmlidXRlO1xyXG5cclxuICAgIHB1YmxpYyBTVU1NQVJZX1RBQjogU1VNTUFSWV9UQUJUYWI7XHJcbiAgICBwdWJsaWMgdGFiXzE0OiB0YWJfMTRUYWI7XHJcbiAgICBwdWJsaWMgdGFiXzk6IHRhYl85VGFiO1xyXG4gICAgcHVibGljIHRhYl8xMTogdGFiXzExVGFiO1xyXG4gICAgcHVibGljIHRhYl8xMjogdGFiXzEyVGFiO1xyXG4gICAgcHVibGljIHRhYl8xMDogdGFiXzEwVGFiO1xyXG4gICAgcHVibGljIHRhYl8xMzogdGFiXzEzVGFiO1xyXG4gICAgcHVibGljIHRhYl84OiB0YWJfOFRhYjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihmb3JtQ29udGV4dDogWHJtLkZvcm1Db250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoZm9ybUNvbnRleHQsIFwiSW5mb3JtYWNpw7NcIik7XHJcblxyXG4gICAgICAgIHRoaXMuQWRkcmVzczFfQWRkcmVzc0lkID0gbmV3IFVuaXF1ZWlkZW50aWZpZXJGb3JtQXR0cmlidXRlKFwiYWRkcmVzczFfYWRkcmVzc2lkXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLkFkZHJlc3MxX0NpdHkgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcImFkZHJlc3MxX2NpdHlcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuQWRkcmVzczFfTGluZTEgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcImFkZHJlc3MxX2xpbmUxXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLkFkZHJlc3MxX0xpbmUyID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJhZGRyZXNzMV9saW5lMlwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5BZGRyZXNzMV9MaW5lMyA9IG5ldyBTdHJpbmdGb3JtQXR0cmlidXRlKFwiYWRkcmVzczFfbGluZTNcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuQWRkcmVzczFfUG9zdGFsQ29kZSA9IG5ldyBTdHJpbmdGb3JtQXR0cmlidXRlKFwiYWRkcmVzczFfcG9zdGFsY29kZVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5BZGRyZXNzMV9TdGF0ZU9yUHJvdmluY2UgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcImFkZHJlc3MxX3N0YXRlb3Jwcm92aW5jZVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5BZGRyZXNzMV9UZWxlcGhvbmUxID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJhZGRyZXNzMV90ZWxlcGhvbmUxXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLkFkZHJlc3MyX0FkZHJlc3NJZCA9IG5ldyBVbmlxdWVpZGVudGlmaWVyRm9ybUF0dHJpYnV0ZShcImFkZHJlc3MyX2FkZHJlc3NpZFwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5DcmVhdGVkQnkgPSBuZXcgTG9va3VwRm9ybUF0dHJpYnV0ZShcImNyZWF0ZWRieVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5DcmVhdGVkT24gPSBuZXcgRGF0ZVRpbWVGb3JtQXR0cmlidXRlKFwiY3JlYXRlZG9uXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLkVNYWlsQWRkcmVzczEgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcImVtYWlsYWRkcmVzczFcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuTW9kaWZpZWRCeSA9IG5ldyBMb29rdXBGb3JtQXR0cmlidXRlKFwibW9kaWZpZWRieVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5Nb2RpZmllZE9uID0gbmV3IERhdGVUaW1lRm9ybUF0dHJpYnV0ZShcIm1vZGlmaWVkb25cIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMuTmFtZSA9IG5ldyBTdHJpbmdGb3JtQXR0cmlidXRlKFwibmFtZVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5Pd25lcklkID0gbmV3IE93bmVyRm9ybUF0dHJpYnV0ZShcIm93bmVyaWRcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX2Fjcm9ueW0gPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcInBmY19hY3JvbnltXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19icmFuZF9hY3JvbnltID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfYnJhbmRfYWNyb255bVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfY2F0YWxvZ19jb2RlID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfY2F0YWxvZ19jb2RlXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19jYXRhbG9nZW50aXR5dHlwZSA9IG5ldyBTdHJpbmdGb3JtQXR0cmlidXRlKFwicGZjX2NhdGFsb2dlbnRpdHl0eXBlXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19jY2FhX2ludmVudG9yeV9jb2RlID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfY2NhYV9pbnZlbnRvcnlfY29kZVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfY2xhc3NpZmljYXRpb25faW52ZW50b3J5X2NjYWEgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcInBmY19jbGFzc2lmaWNhdGlvbl9pbnZlbnRvcnlfY2NhYVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfZGVwYXJ0YW1lbnRhbF9hZ3J1cGF0aW9uaWQgPSBuZXcgTG9va3VwRm9ybUF0dHJpYnV0ZShcInBmY19kZXBhcnRhbWVudGFsX2FncnVwYXRpb25pZFwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfZWNvX2p1cl9lbmRfZGF0ZSA9IG5ldyBEYXRlVGltZUZvcm1BdHRyaWJ1dGUoXCJwZmNfZWNvX2p1cl9lbmRfZGF0ZVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfZWNvX2p1cl9pbml0X2RhdGUgPSBuZXcgRGF0ZVRpbWVGb3JtQXR0cmlidXRlKFwicGZjX2Vjb19qdXJfaW5pdF9kYXRlXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19lbnRpdHlfY2xhc3NpZmljYXRpb24gPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcInBmY19lbnRpdHlfY2xhc3NpZmljYXRpb25cIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX2VudGl0eXR5cGUgPSBuZXcgUGlja2xpc3RGb3JtQXR0cmlidXRlKFwicGZjX2VudGl0eXR5cGVcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX2dvdmVybmluZ19ib2R5ID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfZ292ZXJuaW5nX2JvZHlcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX2hpZ2hfc291cmNlID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfaGlnaF9zb3VyY2VcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX2hpZ2hfc291cmNlX2luZm9ybWF0aW9uID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfaGlnaF9zb3VyY2VfaW5mb3JtYXRpb25cIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX2xhc3RzeW5jaHJvbml6YXRpb24gPSBuZXcgRGF0ZVRpbWVGb3JtQXR0cmlidXRlKFwicGZjX2xhc3RzeW5jaHJvbml6YXRpb25cIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX2xlZ2FsX25hdHVyZV9hZ2dyZWdhdGUgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcInBmY19sZWdhbF9uYXR1cmVfYWdncmVnYXRlXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19tYW5hZ2VySWQgPSBuZXcgTG9va3VwRm9ybUF0dHJpYnV0ZShcInBmY19tYW5hZ2VyaWRcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX21heGltdW1fbnVtYmVyX29mX21lbWJlcnMgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcInBmY19tYXhpbXVtX251bWJlcl9vZl9tZW1iZXJzXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19tZWFzdXJpbmdfcGFydGljaXBhdGlvbiA9IG5ldyBTdHJpbmdGb3JtQXR0cmlidXRlKFwicGZjX21lYXN1cmluZ19wYXJ0aWNpcGF0aW9uXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19taW5pbXVtX251bWJlcl9vZl9tZW1iZXJzID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfbWluaW11bV9udW1iZXJfb2ZfbWVtYmVyc1wiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfbmlmID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfbmlmXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19vYnNlcnZhdGlvbnMgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcInBmY19vYnNlcnZhdGlvbnNcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX3BtcF9hcmVhID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfcG1wX2FyZWFcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX3JlZ2lzdHJhdGlvbl9mcm9tID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfcmVnaXN0cmF0aW9uX2Zyb21cIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX3JlZ2lzdHJhdGlvbmNvZGUgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcInBmY19yZWdpc3RyYXRpb25jb2RlXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19yZXNwb25zYWJsZWlkID0gbmV3IExvb2t1cEZvcm1BdHRyaWJ1dGUoXCJwZmNfcmVzcG9uc2FibGVpZFwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfU0FDX2FkZHJlc3MgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcInBmY19zYWNfYWRkcmVzc1wiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfc2VjdG9yaXphdGlvbl9zZWNfZ2VuZXJhbGl0YXRfY3JpdGVyaW9uID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfc2VjdG9yaXphdGlvbl9zZWNfZ2VuZXJhbGl0YXRfY3JpdGVyaW9uXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY19zdHJlZXRfdHlwZSA9IG5ldyBTdHJpbmdGb3JtQXR0cmlidXRlKFwicGZjX3N0cmVldF90eXBlXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnBmY190b3RhbF9tZW1iZXJzX2dlbmVyYWxpdGF0ID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJwZmNfdG90YWxfbWVtYmVyc19nZW5lcmFsaXRhdFwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfdG90YWxfcGFydGljaXBhdGVfZ2VuZV91bmkgPSBuZXcgU3RyaW5nRm9ybUF0dHJpYnV0ZShcInBmY190b3RhbF9wYXJ0aWNpcGF0ZV9nZW5lX3VuaVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfdG90YWxfcGFydGljaXBhdGlvbl9nZW5lcmFsaXRhdCA9IG5ldyBTdHJpbmdGb3JtQXR0cmlidXRlKFwicGZjX3RvdGFsX3BhcnRpY2lwYXRpb25fZ2VuZXJhbGl0YXRcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMucGZjX3RvdGFsX3BhcnRpY2lwYXRpb25fcHVibGljX3NlY3RvciA9IG5ldyBTdHJpbmdGb3JtQXR0cmlidXRlKFwicGZjX3RvdGFsX3BhcnRpY2lwYXRpb25fcHVibGljX3NlY3RvclwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5wZmNfdmluY3VsYXRfY2F0ZW5zID0gbmV3IEJvb2xlYW5Gb3JtQXR0cmlidXRlKFwicGZjX3ZpbmN1bGF0X2NhdGVuc1wiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5XZWJTaXRlVVJMID0gbmV3IFN0cmluZ0Zvcm1BdHRyaWJ1dGUoXCJ3ZWJzaXRldXJsXCIsIGZvcm1Db250ZXh0KTtcclxuXHJcbiAgICAgICAgdGhpcy5TVU1NQVJZX1RBQiA9IG5ldyBTVU1NQVJZX1RBQlRhYihcIlNVTU1BUllfVEFCXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLlNVTU1BUllfVEFCLkFDQ09VTlRfSU5GT1JNQVRJT04gPSBuZXcgU2VjdGlvbihcIlNVTU1BUllfVEFCXCIsIFwiQUNDT1VOVF9JTkZPUk1BVElPTlwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy5TVU1NQVJZX1RBQi50YWJfM19zZWN0aW9uXzIgPSBuZXcgU2VjdGlvbihcIlNVTU1BUllfVEFCXCIsIFwidGFiXzNfc2VjdGlvbl8yXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnRhYl8xNCA9IG5ldyB0YWJfMTRUYWIoXCJ0YWJfMTRcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMudGFiXzE0LnRhYl9kYWRlc19yZWdpc3RyYWxzID0gbmV3IFNlY3Rpb24oXCJ0YWJfMTRcIiwgXCJ0YWJfZGFkZXNfcmVnaXN0cmFsc1wiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy50YWJfMTQudGFiX2ludmVudG9yeV9kYXRhID0gbmV3IFNlY3Rpb24oXCJ0YWJfMTRcIiwgXCJ0YWJfaW52ZW50b3J5X2RhdGFcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMudGFiXzE0LnRhYl9lY29ub21pY19sZWdhbF9kYXRhID0gbmV3IFNlY3Rpb24oXCJ0YWJfMTRcIiwgXCJ0YWJfZWNvbm9taWNfbGVnYWxfZGF0YVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy50YWJfMTQudGFiX3Bvc3RhbF9kYXRhID0gbmV3IFNlY3Rpb24oXCJ0YWJfMTRcIiwgXCJ0YWJfcG9zdGFsX2RhdGFcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMudGFiXzE0LnRhYl9wYXJ0aWNpcGFudHNfaGVhZGVyX2RhdGEgPSBuZXcgU2VjdGlvbihcInRhYl8xNFwiLCBcInRhYl9wYXJ0aWNpcGFudHNfaGVhZGVyX2RhdGFcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMudGFiXzE0LnRhYl9oZWFkZXJfZGF0YV9nb3Zlcm5pbmdfYm9keSA9IG5ldyBTZWN0aW9uKFwidGFiXzE0XCIsIFwidGFiX2hlYWRlcl9kYXRhX2dvdmVybmluZ19ib2R5XCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnRhYl85ID0gbmV3IHRhYl85VGFiKFwidGFiXzlcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMudGFiXzkudGFiXzlfc2VjdGlvbl8xID0gbmV3IFNlY3Rpb24oXCJ0YWJfOVwiLCBcInRhYl85X3NlY3Rpb25fMVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy50YWJfMTEgPSBuZXcgdGFiXzExVGFiKFwidGFiXzExXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnRhYl8xMS50YWJfMTFfc2VjdGlvbl8xID0gbmV3IFNlY3Rpb24oXCJ0YWJfMTFcIiwgXCJ0YWJfMTFfc2VjdGlvbl8xXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnRhYl8xMiA9IG5ldyB0YWJfMTJUYWIoXCJ0YWJfMTJcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMudGFiXzEyLnRhYl8xMl9zZWN0aW9uXzEgPSBuZXcgU2VjdGlvbihcInRhYl8xMlwiLCBcInRhYl8xMl9zZWN0aW9uXzFcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMudGFiXzEwID0gbmV3IHRhYl8xMFRhYihcInRhYl8xMFwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy50YWJfMTAudGFiXzEwX3NlY3Rpb25fMSA9IG5ldyBTZWN0aW9uKFwidGFiXzEwXCIsIFwidGFiXzEwX3NlY3Rpb25fMVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy50YWJfMTMgPSBuZXcgdGFiXzEzVGFiKFwidGFiXzEzXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnRhYl8xMy50YWJfMTNfc2VjdGlvbl8xID0gbmV3IFNlY3Rpb24oXCJ0YWJfMTNcIiwgXCJ0YWJfMTNfc2VjdGlvbl8xXCIsIGZvcm1Db250ZXh0KTtcclxuICAgICAgICB0aGlzLnRhYl84ID0gbmV3IHRhYl84VGFiKFwidGFiXzhcIiwgZm9ybUNvbnRleHQpO1xyXG4gICAgICAgIHRoaXMudGFiXzgudGFiXzhfc2VjdGlvbl8xID0gbmV3IFNlY3Rpb24oXCJ0YWJfOFwiLCBcInRhYl84X3NlY3Rpb25fMVwiLCBmb3JtQ29udGV4dCk7XHJcbiAgICAgICAgdGhpcy50YWJfOC50YWJfOF9zZWN0aW9uXzMgPSBuZXcgU2VjdGlvbihcInRhYl84XCIsIFwidGFiXzhfc2VjdGlvbl8zXCIsIGZvcm1Db250ZXh0KTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFNVTU1BUllfVEFCVGFiIGV4dGVuZHMgVGFiIHtcclxuICAgIHB1YmxpYyBBQ0NPVU5UX0lORk9STUFUSU9OPzogU2VjdGlvbjtcclxuICAgIHB1YmxpYyB0YWJfM19zZWN0aW9uXzI/OiBTZWN0aW9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRhYk5hbWU6IHN0cmluZywgZm9ybUNvbnRleHQ6IFhybS5Gb3JtQ29udGV4dCkgeyBzdXBlcih0YWJOYW1lLCBmb3JtQ29udGV4dCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIHRhYl8xNFRhYiBleHRlbmRzIFRhYiB7XHJcbiAgICBwdWJsaWMgdGFiX2RhZGVzX3JlZ2lzdHJhbHM/OiBTZWN0aW9uO1xyXG4gICAgcHVibGljIHRhYl9pbnZlbnRvcnlfZGF0YT86IFNlY3Rpb247XHJcbiAgICBwdWJsaWMgdGFiX2Vjb25vbWljX2xlZ2FsX2RhdGE/OiBTZWN0aW9uO1xyXG4gICAgcHVibGljIHRhYl9wb3N0YWxfZGF0YT86IFNlY3Rpb247XHJcbiAgICBwdWJsaWMgdGFiX3BhcnRpY2lwYW50c19oZWFkZXJfZGF0YT86IFNlY3Rpb247XHJcbiAgICBwdWJsaWMgdGFiX2hlYWRlcl9kYXRhX2dvdmVybmluZ19ib2R5PzogU2VjdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0YWJOYW1lOiBzdHJpbmcsIGZvcm1Db250ZXh0OiBYcm0uRm9ybUNvbnRleHQpIHsgc3VwZXIodGFiTmFtZSwgZm9ybUNvbnRleHQpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyB0YWJfOVRhYiBleHRlbmRzIFRhYiB7XHJcbiAgICBwdWJsaWMgdGFiXzlfc2VjdGlvbl8xPzogU2VjdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0YWJOYW1lOiBzdHJpbmcsIGZvcm1Db250ZXh0OiBYcm0uRm9ybUNvbnRleHQpIHsgc3VwZXIodGFiTmFtZSwgZm9ybUNvbnRleHQpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyB0YWJfMTFUYWIgZXh0ZW5kcyBUYWIge1xyXG4gICAgcHVibGljIHRhYl8xMV9zZWN0aW9uXzE/OiBTZWN0aW9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRhYk5hbWU6IHN0cmluZywgZm9ybUNvbnRleHQ6IFhybS5Gb3JtQ29udGV4dCkgeyBzdXBlcih0YWJOYW1lLCBmb3JtQ29udGV4dCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIHRhYl8xMlRhYiBleHRlbmRzIFRhYiB7XHJcbiAgICBwdWJsaWMgdGFiXzEyX3NlY3Rpb25fMT86IFNlY3Rpb247XHJcblxyXG4gICAgY29uc3RydWN0b3IodGFiTmFtZTogc3RyaW5nLCBmb3JtQ29udGV4dDogWHJtLkZvcm1Db250ZXh0KSB7IHN1cGVyKHRhYk5hbWUsIGZvcm1Db250ZXh0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgdGFiXzEwVGFiIGV4dGVuZHMgVGFiIHtcclxuICAgIHB1YmxpYyB0YWJfMTBfc2VjdGlvbl8xPzogU2VjdGlvbjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0YWJOYW1lOiBzdHJpbmcsIGZvcm1Db250ZXh0OiBYcm0uRm9ybUNvbnRleHQpIHsgc3VwZXIodGFiTmFtZSwgZm9ybUNvbnRleHQpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyB0YWJfMTNUYWIgZXh0ZW5kcyBUYWIge1xyXG4gICAgcHVibGljIHRhYl8xM19zZWN0aW9uXzE/OiBTZWN0aW9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHRhYk5hbWU6IHN0cmluZywgZm9ybUNvbnRleHQ6IFhybS5Gb3JtQ29udGV4dCkgeyBzdXBlcih0YWJOYW1lLCBmb3JtQ29udGV4dCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIHRhYl84VGFiIGV4dGVuZHMgVGFiIHtcclxuICAgIHB1YmxpYyB0YWJfOF9zZWN0aW9uXzE/OiBTZWN0aW9uO1xyXG4gICAgcHVibGljIHRhYl84X3NlY3Rpb25fMz86IFNlY3Rpb247XHJcblxyXG4gICAgY29uc3RydWN0b3IodGFiTmFtZTogc3RyaW5nLCBmb3JtQ29udGV4dDogWHJtLkZvcm1Db250ZXh0KSB7IHN1cGVyKHRhYk5hbWUsIGZvcm1Db250ZXh0KTsgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJGb3JtT2JqZWN0QmFzZSIsIlRhYiIsIlNlY3Rpb24iLCJTdHJpbmdGb3JtQXR0cmlidXRlIiwiUGlja2xpc3RGb3JtQXR0cmlidXRlIiwiTG9va3VwRm9ybUF0dHJpYnV0ZSIsIkRhdGVUaW1lRm9ybUF0dHJpYnV0ZSIsIlVuaXF1ZWlkZW50aWZpZXJGb3JtQXR0cmlidXRlIiwiT3duZXJGb3JtQXR0cmlidXRlIiwiQm9vbGVhbkZvcm1BdHRyaWJ1dGUiLCJBY2NvdW50Rm9ybSIsImNvbnN0cnVjdG9yIiwiZm9ybUNvbnRleHQiLCJBZGRyZXNzMV9BZGRyZXNzSWQiLCJBZGRyZXNzMV9DaXR5IiwiQWRkcmVzczFfTGluZTEiLCJBZGRyZXNzMV9MaW5lMiIsIkFkZHJlc3MxX0xpbmUzIiwiQWRkcmVzczFfUG9zdGFsQ29kZSIsIkFkZHJlc3MxX1N0YXRlT3JQcm92aW5jZSIsIkFkZHJlc3MxX1RlbGVwaG9uZTEiLCJBZGRyZXNzMl9BZGRyZXNzSWQiLCJDcmVhdGVkQnkiLCJDcmVhdGVkT24iLCJFTWFpbEFkZHJlc3MxIiwiTW9kaWZpZWRCeSIsIk1vZGlmaWVkT24iLCJOYW1lIiwiT3duZXJJZCIsInBmY19hY3JvbnltIiwicGZjX2JyYW5kX2Fjcm9ueW0iLCJwZmNfY2F0YWxvZ19jb2RlIiwicGZjX2NhdGFsb2dlbnRpdHl0eXBlIiwicGZjX2NjYWFfaW52ZW50b3J5X2NvZGUiLCJwZmNfY2xhc3NpZmljYXRpb25faW52ZW50b3J5X2NjYWEiLCJwZmNfZGVwYXJ0YW1lbnRhbF9hZ3J1cGF0aW9uaWQiLCJwZmNfZWNvX2p1cl9lbmRfZGF0ZSIsInBmY19lY29fanVyX2luaXRfZGF0ZSIsInBmY19lbnRpdHlfY2xhc3NpZmljYXRpb24iLCJwZmNfZW50aXR5dHlwZSIsInBmY19nb3Zlcm5pbmdfYm9keSIsInBmY19oaWdoX3NvdXJjZSIsInBmY19oaWdoX3NvdXJjZV9pbmZvcm1hdGlvbiIsInBmY19sYXN0c3luY2hyb25pemF0aW9uIiwicGZjX2xlZ2FsX25hdHVyZV9hZ2dyZWdhdGUiLCJwZmNfbWFuYWdlcklkIiwicGZjX21heGltdW1fbnVtYmVyX29mX21lbWJlcnMiLCJwZmNfbWVhc3VyaW5nX3BhcnRpY2lwYXRpb24iLCJwZmNfbWluaW11bV9udW1iZXJfb2ZfbWVtYmVycyIsInBmY19uaWYiLCJwZmNfb2JzZXJ2YXRpb25zIiwicGZjX3BtcF9hcmVhIiwicGZjX3JlZ2lzdHJhdGlvbl9mcm9tIiwicGZjX3JlZ2lzdHJhdGlvbmNvZGUiLCJwZmNfcmVzcG9uc2FibGVpZCIsInBmY19TQUNfYWRkcmVzcyIsInBmY19zZWN0b3JpemF0aW9uX3NlY19nZW5lcmFsaXRhdF9jcml0ZXJpb24iLCJwZmNfc3RyZWV0X3R5cGUiLCJwZmNfdG90YWxfbWVtYmVyc19nZW5lcmFsaXRhdCIsInBmY190b3RhbF9wYXJ0aWNpcGF0ZV9nZW5lX3VuaSIsInBmY190b3RhbF9wYXJ0aWNpcGF0aW9uX2dlbmVyYWxpdGF0IiwicGZjX3RvdGFsX3BhcnRpY2lwYXRpb25fcHVibGljX3NlY3RvciIsInBmY192aW5jdWxhdF9jYXRlbnMiLCJXZWJTaXRlVVJMIiwiU1VNTUFSWV9UQUIiLCJTVU1NQVJZX1RBQlRhYiIsIkFDQ09VTlRfSU5GT1JNQVRJT04iLCJ0YWJfM19zZWN0aW9uXzIiLCJ0YWJfMTQiLCJ0YWJfMTRUYWIiLCJ0YWJfZGFkZXNfcmVnaXN0cmFscyIsInRhYl9pbnZlbnRvcnlfZGF0YSIsInRhYl9lY29ub21pY19sZWdhbF9kYXRhIiwidGFiX3Bvc3RhbF9kYXRhIiwidGFiX3BhcnRpY2lwYW50c19oZWFkZXJfZGF0YSIsInRhYl9oZWFkZXJfZGF0YV9nb3Zlcm5pbmdfYm9keSIsInRhYl85IiwidGFiXzlUYWIiLCJ0YWJfOV9zZWN0aW9uXzEiLCJ0YWJfMTEiLCJ0YWJfMTFUYWIiLCJ0YWJfMTFfc2VjdGlvbl8xIiwidGFiXzEyIiwidGFiXzEyVGFiIiwidGFiXzEyX3NlY3Rpb25fMSIsInRhYl8xMCIsInRhYl8xMFRhYiIsInRhYl8xMF9zZWN0aW9uXzEiLCJ0YWJfMTMiLCJ0YWJfMTNUYWIiLCJ0YWJfMTNfc2VjdGlvbl8xIiwidGFiXzgiLCJ0YWJfOFRhYiIsInRhYl84X3NlY3Rpb25fMSIsInRhYl84X3NlY3Rpb25fMyIsInRhYk5hbWUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/generated/forms/account.informaci.form.generated.ts\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/entity/Account/Ribbon/account.ribbon.controller.ts");
/******/ 	var __webpack_export_target__ = window;
/******/ 	for(var i in __webpack_exports__) __webpack_export_target__[i] = __webpack_exports__[i];
/******/ 	if(__webpack_exports__.__esModule) Object.defineProperty(__webpack_export_target__, "__esModule", { value: true });
/******/ 	
/******/ })()
;